
% Default to the notebook output style

    


% Inherit from the specified cell style.




    
\documentclass[11pt]{article}

    
    
    \usepackage[T1]{fontenc}
    % Nicer default font (+ math font) than Computer Modern for most use cases
    \usepackage{mathpazo}

    % Basic figure setup, for now with no caption control since it's done
    % automatically by Pandoc (which extracts ![](path) syntax from Markdown).
    \usepackage{graphicx}
    % We will generate all images so they have a width \maxwidth. This means
    % that they will get their normal width if they fit onto the page, but
    % are scaled down if they would overflow the margins.
    \makeatletter
    \def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth
    \else\Gin@nat@width\fi}
    \makeatother
    \let\Oldincludegraphics\includegraphics
    % Set max figure width to be 80% of text width, for now hardcoded.
    \renewcommand{\includegraphics}[1]{\Oldincludegraphics[width=.8\maxwidth]{#1}}
    % Ensure that by default, figures have no caption (until we provide a
    % proper Figure object with a Caption API and a way to capture that
    % in the conversion process - todo).
    \usepackage{caption}
    \DeclareCaptionLabelFormat{nolabel}{}
    \captionsetup{labelformat=nolabel}

    \usepackage{adjustbox} % Used to constrain images to a maximum size 
    \usepackage{xcolor} % Allow colors to be defined
    \usepackage{enumerate} % Needed for markdown enumerations to work
    \usepackage{geometry} % Used to adjust the document margins
    \usepackage{amsmath} % Equations
    \usepackage{amssymb} % Equations
    \usepackage{textcomp} % defines textquotesingle
    % Hack from http://tex.stackexchange.com/a/47451/13684:
    \AtBeginDocument{%
        \def\PYZsq{\textquotesingle}% Upright quotes in Pygmentized code
    }
    \usepackage{upquote} % Upright quotes for verbatim code
    \usepackage{eurosym} % defines \euro
    \usepackage[mathletters]{ucs} % Extended unicode (utf-8) support
    \usepackage[utf8x]{inputenc} % Allow utf-8 characters in the tex document
    \usepackage{fancyvrb} % verbatim replacement that allows latex
    \usepackage{grffile} % extends the file name processing of package graphics 
                         % to support a larger range 
    % The hyperref package gives us a pdf with properly built
    % internal navigation ('pdf bookmarks' for the table of contents,
    % internal cross-reference links, web links for URLs, etc.)
    \usepackage{hyperref}
    \usepackage{longtable} % longtable support required by pandoc >1.10
    \usepackage{booktabs}  % table support for pandoc > 1.12.2
    \usepackage[inline]{enumitem} % IRkernel/repr support (it uses the enumerate* environment)
    \usepackage[normalem]{ulem} % ulem is needed to support strikethroughs (\sout)
                                % normalem makes italics be italics, not underlines
    

    
    
    % Colors for the hyperref package
    \definecolor{urlcolor}{rgb}{0,.145,.698}
    \definecolor{linkcolor}{rgb}{.71,0.21,0.01}
    \definecolor{citecolor}{rgb}{.12,.54,.11}

    % ANSI colors
    \definecolor{ansi-black}{HTML}{3E424D}
    \definecolor{ansi-black-intense}{HTML}{282C36}
    \definecolor{ansi-red}{HTML}{E75C58}
    \definecolor{ansi-red-intense}{HTML}{B22B31}
    \definecolor{ansi-green}{HTML}{00A250}
    \definecolor{ansi-green-intense}{HTML}{007427}
    \definecolor{ansi-yellow}{HTML}{DDB62B}
    \definecolor{ansi-yellow-intense}{HTML}{B27D12}
    \definecolor{ansi-blue}{HTML}{208FFB}
    \definecolor{ansi-blue-intense}{HTML}{0065CA}
    \definecolor{ansi-magenta}{HTML}{D160C4}
    \definecolor{ansi-magenta-intense}{HTML}{A03196}
    \definecolor{ansi-cyan}{HTML}{60C6C8}
    \definecolor{ansi-cyan-intense}{HTML}{258F8F}
    \definecolor{ansi-white}{HTML}{C5C1B4}
    \definecolor{ansi-white-intense}{HTML}{A1A6B2}

    % commands and environments needed by pandoc snippets
    % extracted from the output of `pandoc -s`
    \providecommand{\tightlist}{%
      \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
    \DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
    % Add ',fontsize=\small' for more characters per line
    \newenvironment{Shaded}{}{}
    \newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.56,0.13,0.00}{{#1}}}
    \newcommand{\DecValTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\FloatTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\CharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\StringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\CommentTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textit{{#1}}}}
    \newcommand{\OtherTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{{#1}}}
    \newcommand{\AlertTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.02,0.16,0.49}{{#1}}}
    \newcommand{\RegionMarkerTok}[1]{{#1}}
    \newcommand{\ErrorTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\NormalTok}[1]{{#1}}
    
    % Additional commands for more recent versions of Pandoc
    \newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.53,0.00,0.00}{{#1}}}
    \newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.73,0.40,0.53}{{#1}}}
    \newcommand{\ImportTok}[1]{{#1}}
    \newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.73,0.13,0.13}{\textit{{#1}}}}
    \newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\VariableTok}[1]{\textcolor[rgb]{0.10,0.09,0.49}{{#1}}}
    \newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.40,0.40,0.40}{{#1}}}
    \newcommand{\BuiltInTok}[1]{{#1}}
    \newcommand{\ExtensionTok}[1]{{#1}}
    \newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.74,0.48,0.00}{{#1}}}
    \newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.49,0.56,0.16}{{#1}}}
    \newcommand{\InformationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\WarningTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    
    
    % Define a nice break command that doesn't care if a line doesn't already
    % exist.
    \def\br{\hspace*{\fill} \\* }
    % Math Jax compatability definitions
    \def\gt{>}
    \def\lt{<}
    % Document parameters
    \title{taxi\_v2.0(feature selection)}
    
    
    

    % Pygments definitions
    
\makeatletter
\def\PY@reset{\let\PY@it=\relax \let\PY@bf=\relax%
    \let\PY@ul=\relax \let\PY@tc=\relax%
    \let\PY@bc=\relax \let\PY@ff=\relax}
\def\PY@tok#1{\csname PY@tok@#1\endcsname}
\def\PY@toks#1+{\ifx\relax#1\empty\else%
    \PY@tok{#1}\expandafter\PY@toks\fi}
\def\PY@do#1{\PY@bc{\PY@tc{\PY@ul{%
    \PY@it{\PY@bf{\PY@ff{#1}}}}}}}
\def\PY#1#2{\PY@reset\PY@toks#1+\relax+\PY@do{#2}}

\expandafter\def\csname PY@tok@w\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.73,0.73}{##1}}}
\expandafter\def\csname PY@tok@c\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.74,0.48,0.00}{##1}}}
\expandafter\def\csname PY@tok@k\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kt\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.69,0.00,0.25}{##1}}}
\expandafter\def\csname PY@tok@o\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@ow\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\expandafter\def\csname PY@tok@nb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@nf\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@nc\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@nn\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@ne\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.82,0.25,0.23}{##1}}}
\expandafter\def\csname PY@tok@nv\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@no\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.53,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@nl\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.63,0.63,0.00}{##1}}}
\expandafter\def\csname PY@tok@ni\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.60,0.60,0.60}{##1}}}
\expandafter\def\csname PY@tok@na\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.49,0.56,0.16}{##1}}}
\expandafter\def\csname PY@tok@nt\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@nd\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\expandafter\def\csname PY@tok@s\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sd\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@si\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.53}{##1}}}
\expandafter\def\csname PY@tok@se\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.13}{##1}}}
\expandafter\def\csname PY@tok@sr\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.53}{##1}}}
\expandafter\def\csname PY@tok@ss\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@sx\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@m\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@gh\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@gu\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.50,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@gd\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.63,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@gi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.63,0.00}{##1}}}
\expandafter\def\csname PY@tok@gr\endcsname{\def\PY@tc##1{\textcolor[rgb]{1.00,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@ge\endcsname{\let\PY@it=\textit}
\expandafter\def\csname PY@tok@gs\endcsname{\let\PY@bf=\textbf}
\expandafter\def\csname PY@tok@gp\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@go\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.53,0.53,0.53}{##1}}}
\expandafter\def\csname PY@tok@gt\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.27,0.87}{##1}}}
\expandafter\def\csname PY@tok@err\endcsname{\def\PY@bc##1{\setlength{\fboxsep}{0pt}\fcolorbox[rgb]{1.00,0.00,0.00}{1,1,1}{\strut ##1}}}
\expandafter\def\csname PY@tok@kc\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kd\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kn\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kr\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@bp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@fm\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@vc\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vg\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vm\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@sa\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sc\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@dl\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@s2\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sh\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@s1\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@mb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mf\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mh\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@il\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mo\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@ch\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cm\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cpf\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@c1\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cs\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}

\def\PYZbs{\char`\\}
\def\PYZus{\char`\_}
\def\PYZob{\char`\{}
\def\PYZcb{\char`\}}
\def\PYZca{\char`\^}
\def\PYZam{\char`\&}
\def\PYZlt{\char`\<}
\def\PYZgt{\char`\>}
\def\PYZsh{\char`\#}
\def\PYZpc{\char`\%}
\def\PYZdl{\char`\$}
\def\PYZhy{\char`\-}
\def\PYZsq{\char`\'}
\def\PYZdq{\char`\"}
\def\PYZti{\char`\~}
% for compatibility with earlier versions
\def\PYZat{@}
\def\PYZlb{[}
\def\PYZrb{]}
\makeatother


    % Exact colors from NB
    \definecolor{incolor}{rgb}{0.0, 0.0, 0.5}
    \definecolor{outcolor}{rgb}{0.545, 0.0, 0.0}



    
    % Prevent overflowing lines due to hard-to-break entities
    \sloppy 
    % Setup hyperref package
    \hypersetup{
      breaklinks=true,  % so long urls are correctly broken across lines
      colorlinks=true,
      urlcolor=urlcolor,
      linkcolor=linkcolor,
      citecolor=citecolor,
      }
    % Slightly bigger margins than the latex defaults
    
    \geometry{verbose,tmargin=1in,bmargin=1in,lmargin=1in,rmargin=1in}
    
    

    \begin{document}
    
    
    \maketitle
    
    

    
    \section{Kaggle : New York City Taxi Trip
Duration}\label{kaggle-new-york-city-taxi-trip-duration}

    

    \section{1 EDA (Exploratory Data
Analysis)}\label{eda-exploratory-data-analysis}

    \section{purpose of EDA}\label{purpose-of-eda}

\begin{itemize}
\tightlist
\item
  Suggest hypotheses about the causes of observed phenomena
\item
  Assess assumptions on which statistical inference will be based
\item
  Support the selection of appropriate statistical tools and techniques
\item
  Provide a basis for further data collection through surveys or
  experiments
\end{itemize}

    \section{EDA methods}\label{eda-methods}

\begin{itemize}
\tightlist
\item
  Graphical techniques used in EDA are:

  \begin{itemize}
  \tightlist
  \item
    boxplot

    \begin{itemize}
    \tightlist
    \item
      detailed feature (datetime by month, day of week, hours)
    \end{itemize}
  \item
    historgram or barplot (distribution) \# bin = range of value

    \begin{itemize}
    \tightlist
    \item
      origin feature (pick lat,long, drop lat, long, duration, passenger
      count, flag)
    \item
      detailed feature (datetime by month, day of week, hours)
    \end{itemize}
  \item
    scatter plot

    \begin{itemize}
    \tightlist
    \item
      duration vs distance = to check odd data
    \end{itemize}
  \item
    Parallel Coordinates vs Colormaps vs Andrews curves charts
  \item
    odd ratio????
  \end{itemize}
\item
  Quantative methods:

  \begin{itemize}
  \tightlist
  \item
    Trimean == tukey method?
  \end{itemize}
\end{itemize}

    \section{1.1 Understanding data}\label{understanding-data}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}1}]:} \PY{k+kn}{from} \PY{n+nn}{IPython}\PY{n+nn}{.}\PY{n+nn}{display} \PY{k}{import} \PY{n}{display}
        \PY{k+kn}{import} \PY{n+nn}{numpy} \PY{k}{as} \PY{n+nn}{np}
        \PY{k+kn}{import} \PY{n+nn}{matplotlib}\PY{n+nn}{.}\PY{n+nn}{pyplot} \PY{k}{as} \PY{n+nn}{plt}
        \PY{k+kn}{import} \PY{n+nn}{pandas} \PY{k}{as} \PY{n+nn}{pd}
        \PY{k+kn}{import} \PY{n+nn}{mglearn}
        \PY{k+kn}{import} \PY{n+nn}{seaborn} \PY{k}{as} \PY{n+nn}{sns}
        \PY{k+kn}{import} \PY{n+nn}{ipyleaflet}
        \PY{k+kn}{from} \PY{n+nn}{math} \PY{k}{import} \PY{n}{sin}\PY{p}{,} \PY{n}{cos}\PY{p}{,} \PY{n}{sqrt}\PY{p}{,} \PY{n}{atan2}\PY{p}{,} \PY{n}{radians}
        \PY{k+kn}{import} \PY{n+nn}{folium}
        \PY{k+kn}{import} \PY{n+nn}{folium}\PY{n+nn}{.}\PY{n+nn}{plugins} \PY{k}{as} \PY{n+nn}{plugins}
        \PY{k+kn}{import} \PY{n+nn}{os}
        \PY{k+kn}{from} \PY{n+nn}{folium}\PY{n+nn}{.}\PY{n+nn}{plugins} \PY{k}{import} \PY{n}{MarkerCluster}     \PY{c+c1}{\PYZsh{} Map}
        \PY{k+kn}{from} \PY{n+nn}{geographiclib}\PY{n+nn}{.}\PY{n+nn}{geodesic} \PY{k}{import} \PY{n}{Geodesic}  \PY{c+c1}{\PYZsh{} Map}
        \PY{k+kn}{import} \PY{n+nn}{time}\PY{o}{,} \PY{n+nn}{datetime}                        \PY{c+c1}{\PYZsh{} time data}
        \PY{k+kn}{import} \PY{n+nn}{calendar}
        \PY{k+kn}{import} \PY{n+nn}{scipy}
        
        
        \PY{o}{\PYZpc{}}\PY{k}{matplotlib} inline
        
        
        \PY{c+c1}{\PYZsh{} machine learning}
        \PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{linear\PYZus{}model} \PY{k}{import} \PY{n}{LogisticRegression}
        \PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{svm} \PY{k}{import} \PY{n}{SVC}\PY{p}{,} \PY{n}{LinearSVC}
        \PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{ensemble} \PY{k}{import} \PY{n}{RandomForestClassifier}
        \PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{neighbors} \PY{k}{import} \PY{n}{KNeighborsClassifier}
        \PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{naive\PYZus{}bayes} \PY{k}{import} \PY{n}{GaussianNB}
        \PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{linear\PYZus{}model} \PY{k}{import} \PY{n}{Perceptron}
        \PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{linear\PYZus{}model} \PY{k}{import} \PY{n}{SGDClassifier}
        \PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{tree} \PY{k}{import} \PY{n}{DecisionTreeClassifier}
        
        \PY{k+kn}{import} \PY{n+nn}{statsmodels}\PY{n+nn}{.}\PY{n+nn}{api} \PY{k}{as} \PY{n+nn}{sm}
        \PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{datasets} \PY{k}{import} \PY{n}{make\PYZus{}blobs}
        \PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{preprocessing} \PY{k}{import} \PY{n}{scale}\PY{p}{,} \PY{n}{robust\PYZus{}scale}\PY{p}{,} \PY{n}{minmax\PYZus{}scale}\PY{p}{,} \PY{n}{maxabs\PYZus{}scale}
        \PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{preprocessing} \PY{k}{import} \PY{n}{normalize}
        \PY{k+kn}{import} \PY{n+nn}{statsmodels}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
/home/jk/enter/lib/python3.6/site-packages/statsmodels/compat/pandas.py:56: FutureWarning: The pandas.core.datetools module is deprecated and will be removed in a future version. Please use the pandas.tseries module instead.
  from pandas.core import datetools

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}2}]:} \PY{n}{train} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{\PYZti{}/Documents/data/taxi\PYZus{}data/train.csv}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
        \PY{n}{train}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}2}]:}           id  vendor\_id      pickup\_datetime     dropoff\_datetime  \textbackslash{}
        0  id2875421          2  2016-03-14 17:24:55  2016-03-14 17:32:30   
        1  id2377394          1  2016-06-12 00:43:35  2016-06-12 00:54:38   
        2  id3858529          2  2016-01-19 11:35:24  2016-01-19 12:10:48   
        3  id3504673          2  2016-04-06 19:32:31  2016-04-06 19:39:40   
        4  id2181028          2  2016-03-26 13:30:55  2016-03-26 13:38:10   
        
           passenger\_count  pickup\_longitude  pickup\_latitude  dropoff\_longitude  \textbackslash{}
        0                1        -73.982155        40.767937         -73.964630   
        1                1        -73.980415        40.738564         -73.999481   
        2                1        -73.979027        40.763939         -74.005333   
        3                1        -74.010040        40.719971         -74.012268   
        4                1        -73.973053        40.793209         -73.972923   
        
           dropoff\_latitude store\_and\_fwd\_flag  trip\_duration  
        0         40.765602                  N            455  
        1         40.731152                  N            663  
        2         40.710087                  N           2124  
        3         40.706718                  N            429  
        4         40.782520                  N            435  
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}3}]:} \PY{n}{test} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{\PYZti{}/Documents/data/taxi\PYZus{}data/test.csv}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
        \PY{n}{test}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}3}]:}           id  vendor\_id      pickup\_datetime  passenger\_count  \textbackslash{}
        0  id3004672          1  2016-06-30 23:59:58                1   
        1  id3505355          1  2016-06-30 23:59:53                1   
        2  id1217141          1  2016-06-30 23:59:47                1   
        3  id2150126          2  2016-06-30 23:59:41                1   
        4  id1598245          1  2016-06-30 23:59:33                1   
        
           pickup\_longitude  pickup\_latitude  dropoff\_longitude  dropoff\_latitude  \textbackslash{}
        0        -73.988129        40.732029         -73.990173         40.756680   
        1        -73.964203        40.679993         -73.959808         40.655403   
        2        -73.997437        40.737583         -73.986160         40.729523   
        3        -73.956070        40.771900         -73.986427         40.730469   
        4        -73.970215        40.761475         -73.961510         40.755890   
        
          store\_and\_fwd\_flag  
        0                  N  
        1                  N  
        2                  N  
        3                  N  
        4                  N  
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}4}]:} \PY{c+c1}{\PYZsh{} test1 = pd.read\PYZus{}csv(\PYZdq{}\PYZti{}/Documents/data/taxi\PYZus{}data/test.csv\PYZdq{})}
        \PY{c+c1}{\PYZsh{} test1.head()}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}5}]:} \PY{n}{sample\PYZus{}submission} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{\PYZti{}/Documents/data/taxi\PYZus{}data/sample\PYZus{}submission.csv}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
        \PY{n}{sample\PYZus{}submission}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}5}]:}           id  trip\_duration
        0  id3004672            959
        1  id3505355            959
        2  id1217141            959
        3  id2150126            959
        4  id1598245            959
\end{Verbatim}
            
    \section{1.1.a Data type and unit}\label{a-data-type-and-unit}

    \section{unit}\label{unit}

\subsubsection{1. latitude / longtitude = decimal
degree}\label{latitude-longtitude-decimal-degree}

\begin{itemize}
\tightlist
\item
  111.32mm per 0.000001° / 11.132 m per 0.0001° / 1.1132 km per 0.01° /
  111.32 km per 1.0°
\item
  14 demical degree
\item
  ex) 40.767937 , -73.982155
\end{itemize}

\subsubsection{2. datetime = year-month-day:
hour-minute-second}\label{datetime-year-month-day-hour-minute-second}

\subsubsection{3. vendor\_id = 1, 2}\label{vendor_id-1-2}

\subsubsection{4. passenger\_count = 0,,,,9}\label{passenger_count-09}

\subsubsection{4. store\_and\_fwd\_flag = N,
Y}\label{store_and_fwd_flag-n-y}

\subsubsection{6. duration = second}\label{duration-second}

\begin{itemize}
\tightlist
\item
  ex) 455 sec = 7min 35sec
\end{itemize}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}6}]:} \PY{n}{train}\PY{o}{.}\PY{n}{info}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
<class 'pandas.core.frame.DataFrame'>
RangeIndex: 1458644 entries, 0 to 1458643
Data columns (total 11 columns):
id                    1458644 non-null object
vendor\_id             1458644 non-null int64
pickup\_datetime       1458644 non-null object
dropoff\_datetime      1458644 non-null object
passenger\_count       1458644 non-null int64
pickup\_longitude      1458644 non-null float64
pickup\_latitude       1458644 non-null float64
dropoff\_longitude     1458644 non-null float64
dropoff\_latitude      1458644 non-null float64
store\_and\_fwd\_flag    1458644 non-null object
trip\_duration         1458644 non-null int64
dtypes: float64(4), int64(3), object(4)
memory usage: 122.4+ MB

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}7}]:} \PY{n}{test}\PY{o}{.}\PY{n}{info}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
<class 'pandas.core.frame.DataFrame'>
RangeIndex: 625134 entries, 0 to 625133
Data columns (total 9 columns):
id                    625134 non-null object
vendor\_id             625134 non-null int64
pickup\_datetime       625134 non-null object
passenger\_count       625134 non-null int64
pickup\_longitude      625134 non-null float64
pickup\_latitude       625134 non-null float64
dropoff\_longitude     625134 non-null float64
dropoff\_latitude      625134 non-null float64
store\_and\_fwd\_flag    625134 non-null object
dtypes: float64(4), int64(2), object(3)
memory usage: 42.9+ MB

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}8}]:} \PY{n}{sample\PYZus{}submission}\PY{o}{.}\PY{n}{info}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
<class 'pandas.core.frame.DataFrame'>
RangeIndex: 625134 entries, 0 to 625133
Data columns (total 2 columns):
id               625134 non-null object
trip\_duration    625134 non-null int64
dtypes: int64(1), object(1)
memory usage: 9.5+ MB

    \end{Verbatim}

    \section{train data}\label{train-data}

\begin{itemize}
\tightlist
\item
  1.4M data, 11 columns
\end{itemize}

\section{test data}\label{test-data}

\begin{itemize}
\tightlist
\item
  0.6M data, 9 columns (no dropoff\_datetime, trip\_duration)
\end{itemize}

\section{sample\_submission}\label{sample_submission}

\begin{itemize}
\tightlist
\item
  0.6M data, 2 columns (id, trip\_duration)
\end{itemize}

    \section{New York border coordinate}\label{new-york-border-coordinate}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}9}]:} \PY{c+c1}{\PYZsh{} new york city coordinate = (41.145495, −73.994901)}
        \PY{n}{city\PYZus{}long\PYZus{}border} \PY{o}{=} \PY{p}{(}\PY{o}{\PYZhy{}}\PY{l+m+mf}{74.03}\PY{p}{,} \PY{o}{\PYZhy{}}\PY{l+m+mf}{73.75}\PY{p}{)}
        \PY{n}{city\PYZus{}lat\PYZus{}border} \PY{o}{=} \PY{p}{(}\PY{l+m+mf}{40.63}\PY{p}{,} \PY{l+m+mf}{40.85}\PY{p}{)}
\end{Verbatim}


    \section{1.1.b Missing Data check}\label{b-missing-data-check}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}10}]:} \PY{c+c1}{\PYZsh{}none of missing data}
         \PY{n}{train2} \PY{o}{=} \PY{n}{train}\PY{o}{.}\PY{n}{dropna}\PY{p}{(}\PY{n}{how} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{any}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{test2} \PY{o}{=} \PY{n}{test}\PY{o}{.}\PY{n}{dropna}\PY{p}{(}\PY{n}{how} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{any}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n+nb}{len}\PY{p}{(}\PY{n}{train}\PY{p}{)} \PY{o}{==} \PY{n+nb}{len}\PY{p}{(}\PY{n}{train2}\PY{p}{)}\PY{p}{,} \PY{n+nb}{len}\PY{p}{(}\PY{n}{test}\PY{p}{)} \PY{o}{==} \PY{n+nb}{len}\PY{p}{(}\PY{n}{test2}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}10}]:} (True, True)
\end{Verbatim}
            
    \section{1.1.c Trip duration check}\label{c-trip-duration-check}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}11}]:} \PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{pickup\PYZus{}datetime}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]} \PY{o}{=}  \PY{n}{pd}\PY{o}{.}\PY{n}{to\PYZus{}datetime}\PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{pickup\PYZus{}datetime}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{)}
         \PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{dropoff\PYZus{}datetime}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]} \PY{o}{=}  \PY{n}{pd}\PY{o}{.}\PY{n}{to\PYZus{}datetime}\PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{dropoff\PYZus{}datetime}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{)}
         \PY{n}{sample\PYZus{}duration} \PY{o}{=} \PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{dropoff\PYZus{}datetime}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]} \PY{o}{\PYZhy{}} \PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{pickup\PYZus{}datetime}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}
         \PY{n}{sample\PYZus{}duration\PYZus{}sec} \PY{o}{=} \PY{n}{sample\PYZus{}duration}\PY{o}{.}\PY{n}{dt}\PY{o}{.}\PY{n}{total\PYZus{}seconds}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{astype}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{int}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{train}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{trip\PYZus{}sec}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=}  \PY{n}{sample\PYZus{}duration\PYZus{}sec}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}12}]:} \PY{n}{train\PYZus{}d} \PY{o}{=} \PY{n}{train}\PY{p}{[}\PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{trip\PYZus{}duration}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]} \PY{o}{!=} \PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{trip\PYZus{}sec}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{]}
         \PY{n+nb}{len}\PY{p}{(}\PY{n}{train\PYZus{}d}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}12}]:} 0
\end{Verbatim}
            
    \section{id trip != duration
calcuation}\label{id-trip-duration-calcuation}

id1864733 id0369307 id1325766 id0053347

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}13}]:} \PY{c+c1}{\PYZsh{} train[train.trip\PYZus{}duration \PYZgt{} 100000]}
\end{Verbatim}


    \subsubsection{NYC Taxi Trip Duration {[}Train
data{]}는}\label{nyc-taxi-trip-duration-train-datauxb294}

\subsubsection{총 1,458,644 Row와 11 Column으로 구성되어
있으며,}\label{uxcd1d-1458644-rowuxc640-11-columnuxc73cuxb85c-uxad6cuxc131uxb418uxc5b4-uxc788uxc73cuxba70}

\subsubsection{Missing Data는 존재하지
않습니다.}\label{missing-datauxb294-uxc874uxc7acuxd558uxc9c0-uxc54auxc2b5uxb2c8uxb2e4.}

    \section{1.1.c Column information}\label{c-column-information}

    \begin{itemize}
\tightlist
\item
  id : 개별 Taxi에 부여된 고유 id (이건 그냥 쓴거예요...)
\item
  verdor\_id : Taxi Company id
  \textgreater{}\textgreater{}\textgreater{} 1, 2로 구성되어 있는걸로
  봐서 2개의 회사를 대상
\item
  pickup/dropoff datetime : 출발/도착 시간정보
  \textgreater{}\textgreater{} 년, 월, 일, 시각 정보가 포함
\item
  passenger\_count : 승객수 \textgreater{}\textgreater{}\textgreater{}
  0\textasciitilde{}9명까지 존재
\item
  pickup/dropoff\_longitude \& latitude : 출발/도착 지리정보
\item
  store\_and\_fwd\_flag : whether the trip data was sent immediately to
  the vendor (``N'') or held in the memory of the taxi because there was
  no connection to the server (``Y'')
\item
  trip\_duration : 탑승시간 \textgreater{}\textgreater{}\textgreater{}
  단위는 Seconds
\end{itemize}

    \section{1.2 Feature Engineering \& Data
Cleaning}\label{feature-engineering-data-cleaning}

    \subsubsection{1.2.a Add columns with detailed
informations}\label{a-add-columns-with-detailed-informations}

    \begin{itemize}
\tightlist
\item
  duration per min
\item
  datetime per hour
\item
  datetime per day of week
\item
  datetime per month
\end{itemize}

    \section{drop "dropoff\_datetime"
column}\label{drop-dropoff_datetime-column}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}14}]:} \PY{n}{train} \PY{o}{=} \PY{n}{train}\PY{o}{.}\PY{n}{drop}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{dropoff\PYZus{}datetime}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}15}]:} \PY{c+c1}{\PYZsh{}data type convert to datetime from object}
         \PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{pickup\PYZus{}datetime}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]} \PY{o}{=}  \PY{n}{pd}\PY{o}{.}\PY{n}{to\PYZus{}datetime}\PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{pickup\PYZus{}datetime}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{)}
         \PY{n}{test}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{pickup\PYZus{}datetime}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]} \PY{o}{=}  \PY{n}{pd}\PY{o}{.}\PY{n}{to\PYZus{}datetime}\PY{p}{(}\PY{n}{test}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{pickup\PYZus{}datetime}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}16}]:} \PY{c+c1}{\PYZsh{} \PYZsh{}data type convert to datetime from object}
         \PY{c+c1}{\PYZsh{} \PYZsh{}not exist dropoff data}
         \PY{c+c1}{\PYZsh{} test1[\PYZdq{}pickup\PYZus{}datetime\PYZdq{}] =  pd.to\PYZus{}datetime(test1[\PYZdq{}pickup\PYZus{}datetime\PYZdq{}])}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}17}]:} \PY{c+c1}{\PYZsh{}day of week}
         \PY{c+c1}{\PYZsh{}Monday=0, Sunday=6}
         \PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{pick\PYZus{}dayofweek}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]} \PY{o}{=} \PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{pickup\PYZus{}datetime}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{o}{.}\PY{n}{dt}\PY{o}{.}\PY{n}{dayofweek}
         \PY{c+c1}{\PYZsh{} train[\PYZdq{}drop\PYZus{}dayofweek\PYZdq{}] = train[\PYZdq{}dropoff\PYZus{}datetime\PYZdq{}].dt.dayofweek.astype(\PYZdq{}int\PYZdq{})}
         
         \PY{c+c1}{\PYZsh{}date by month}
         \PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{pick\PYZus{}dayofmonth}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]} \PY{o}{=} \PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{pickup\PYZus{}datetime}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{o}{.}\PY{n}{dt}\PY{o}{.}\PY{n}{month}
         \PY{c+c1}{\PYZsh{} train[\PYZdq{}drop\PYZus{}dayofmonth\PYZdq{}] = train[\PYZdq{}dropoff\PYZus{}datetime\PYZdq{}].dt.month.astype(\PYZdq{}int\PYZdq{})}
         
         \PY{c+c1}{\PYZsh{} \PYZsh{}date by hour}
         \PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{pick\PYZus{}datehour}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]} \PY{o}{=} \PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{pickup\PYZus{}datetime}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{o}{.}\PY{n}{dt}\PY{o}{.}\PY{n}{hour}
         \PY{c+c1}{\PYZsh{} \PYZsh{} train[\PYZdq{}drop\PYZus{}datehour\PYZdq{}] = train[\PYZdq{}dropoff\PYZus{}datetime\PYZdq{}].dt.hour.astype(\PYZdq{}int\PYZdq{})}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}18}]:} \PY{c+c1}{\PYZsh{} \PYZsh{}date time convert to sec}
         \PY{c+c1}{\PYZsh{} train[\PYZdq{}pickup\PYZus{}sec\PYZdq{}] = train[\PYZdq{}pickup\PYZus{}datetime\PYZdq{}] \PYZhy{} train[\PYZdq{}pick\PYZus{}dayofweek\PYZdq{}]}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}19}]:} \PY{c+c1}{\PYZsh{}day of week}
         \PY{c+c1}{\PYZsh{}Monday=0, Sunday=6}
         \PY{n}{test}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{pick\PYZus{}dayofweek}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]} \PY{o}{=} \PY{n}{test}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{pickup\PYZus{}datetime}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{o}{.}\PY{n}{dt}\PY{o}{.}\PY{n}{dayofweek}
         
         \PY{c+c1}{\PYZsh{}date by month}
         \PY{n}{test}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{pick\PYZus{}dayofmonth}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]} \PY{o}{=} \PY{n}{test}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{pickup\PYZus{}datetime}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{o}{.}\PY{n}{dt}\PY{o}{.}\PY{n}{month}
         
         \PY{c+c1}{\PYZsh{}date by hour}
         \PY{n}{test}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{pick\PYZus{}datehour}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]} \PY{o}{=} \PY{n}{test}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{pickup\PYZus{}datetime}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{o}{.}\PY{n}{dt}\PY{o}{.}\PY{n}{hour}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}20}]:} \PY{c+c1}{\PYZsh{} \PYZsh{}day of week}
         \PY{c+c1}{\PYZsh{} \PYZsh{}Monday=0, Sunday=6}
         \PY{c+c1}{\PYZsh{} test1[\PYZdq{}pick\PYZus{}dayofweek\PYZdq{}] = test1[\PYZdq{}pickup\PYZus{}datetime\PYZdq{}].dt.dayofweek}
         
         \PY{c+c1}{\PYZsh{} \PYZsh{}date by month}
         \PY{c+c1}{\PYZsh{} test1[\PYZdq{}pick\PYZus{}dayofmonth\PYZdq{}] = test1[\PYZdq{}pickup\PYZus{}datetime\PYZdq{}].dt.month}
         
         \PY{c+c1}{\PYZsh{} \PYZsh{}date by hour}
         \PY{c+c1}{\PYZsh{} test1[\PYZdq{}pick\PYZus{}datehour\PYZdq{}] = test1[\PYZdq{}pickup\PYZus{}datetime\PYZdq{}].dt.hour}
\end{Verbatim}


    \section{1.2.b Distance between pickup and dropoff
location}\label{b-distance-between-pickup-and-dropoff-location}

    \section{Geographic space}\label{geographic-space}

\begin{itemize}
\tightlist
\item
  Manhattan distance vs Euclidean distance
\end{itemize}

    \subsubsection{Euclidean distance}\label{euclidean-distance}

\begin{itemize}
\tightlist
\item
  unit = km
\end{itemize}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}21}]:} \PY{c+c1}{\PYZsh{} approximate radius of earth in km}
         \PY{c+c1}{\PYZsh{} train}
         \PY{n}{R} \PY{o}{=} \PY{l+m+mf}{6371.0}
         
         \PY{n}{dist} \PY{o}{=} \PY{p}{[}\PY{p}{]}
         
         \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{train}\PY{p}{)}\PY{p}{)}\PY{p}{:}
             \PY{n}{lat1} \PY{o}{=} \PY{n}{radians}\PY{p}{(}\PY{n}{train}\PY{o}{.}\PY{n}{iloc}\PY{p}{[}\PY{n}{i}\PY{p}{,}\PY{l+m+mi}{5}\PY{p}{]}\PY{p}{)}
             \PY{n}{lon1} \PY{o}{=} \PY{n}{radians}\PY{p}{(}\PY{n}{train}\PY{o}{.}\PY{n}{iloc}\PY{p}{[}\PY{n}{i}\PY{p}{,}\PY{l+m+mi}{4}\PY{p}{]}\PY{p}{)}
             \PY{n}{lat2} \PY{o}{=} \PY{n}{radians}\PY{p}{(}\PY{n}{train}\PY{o}{.}\PY{n}{iloc}\PY{p}{[}\PY{n}{i}\PY{p}{,}\PY{l+m+mi}{7}\PY{p}{]}\PY{p}{)}
             \PY{n}{lon2} \PY{o}{=} \PY{n}{radians}\PY{p}{(}\PY{n}{train}\PY{o}{.}\PY{n}{iloc}\PY{p}{[}\PY{n}{i}\PY{p}{,}\PY{l+m+mi}{6}\PY{p}{]}\PY{p}{)}
         
             \PY{n}{dlon} \PY{o}{=} \PY{n}{lon2} \PY{o}{\PYZhy{}} \PY{n}{lon1}
             \PY{n}{dlat} \PY{o}{=} \PY{n}{lat2} \PY{o}{\PYZhy{}} \PY{n}{lat1}
         
             \PY{n}{a} \PY{o}{=} \PY{n}{sin}\PY{p}{(}\PY{n}{dlat} \PY{o}{/} \PY{l+m+mi}{2}\PY{p}{)}\PY{o}{*}\PY{o}{*}\PY{l+m+mi}{2} \PY{o}{+} \PY{n}{cos}\PY{p}{(}\PY{n}{lat1}\PY{p}{)} \PY{o}{*} \PY{n}{cos}\PY{p}{(}\PY{n}{lat2}\PY{p}{)} \PY{o}{*} \PY{n}{sin}\PY{p}{(}\PY{n}{dlon} \PY{o}{/} \PY{l+m+mi}{2}\PY{p}{)}\PY{o}{*}\PY{o}{*}\PY{l+m+mi}{2}
             \PY{n}{c} \PY{o}{=} \PY{l+m+mi}{2} \PY{o}{*} \PY{n}{atan2}\PY{p}{(}\PY{n}{sqrt}\PY{p}{(}\PY{n}{a}\PY{p}{)}\PY{p}{,} \PY{n}{sqrt}\PY{p}{(}\PY{l+m+mi}{1} \PY{o}{\PYZhy{}} \PY{n}{a}\PY{p}{)}\PY{p}{)}
         
             \PY{n}{distance} \PY{o}{=} \PY{n}{R} \PY{o}{*} \PY{n}{c}
             \PY{n}{dist}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{distance}\PY{p}{)}
             
         \PY{n}{train}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{distance}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{dist}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}22}]:} \PY{c+c1}{\PYZsh{} approximate radius of earth in km}
         \PY{c+c1}{\PYZsh{} test}
         \PY{n}{R} \PY{o}{=} \PY{l+m+mf}{6371.0}
         
         \PY{n}{dist} \PY{o}{=} \PY{p}{[}\PY{p}{]}
         
         \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{test}\PY{p}{)}\PY{p}{)}\PY{p}{:}
             \PY{n}{lat1} \PY{o}{=} \PY{n}{radians}\PY{p}{(}\PY{n}{test}\PY{o}{.}\PY{n}{iloc}\PY{p}{[}\PY{n}{i}\PY{p}{,}\PY{l+m+mi}{5}\PY{p}{]}\PY{p}{)}
             \PY{n}{lon1} \PY{o}{=} \PY{n}{radians}\PY{p}{(}\PY{n}{test}\PY{o}{.}\PY{n}{iloc}\PY{p}{[}\PY{n}{i}\PY{p}{,}\PY{l+m+mi}{4}\PY{p}{]}\PY{p}{)}
             \PY{n}{lat2} \PY{o}{=} \PY{n}{radians}\PY{p}{(}\PY{n}{test}\PY{o}{.}\PY{n}{iloc}\PY{p}{[}\PY{n}{i}\PY{p}{,}\PY{l+m+mi}{7}\PY{p}{]}\PY{p}{)}
             \PY{n}{lon2} \PY{o}{=} \PY{n}{radians}\PY{p}{(}\PY{n}{test}\PY{o}{.}\PY{n}{iloc}\PY{p}{[}\PY{n}{i}\PY{p}{,}\PY{l+m+mi}{6}\PY{p}{]}\PY{p}{)}
         
             \PY{n}{dlon} \PY{o}{=} \PY{n}{lon2} \PY{o}{\PYZhy{}} \PY{n}{lon1}
             \PY{n}{dlat} \PY{o}{=} \PY{n}{lat2} \PY{o}{\PYZhy{}} \PY{n}{lat1}
         
             \PY{n}{a} \PY{o}{=} \PY{n}{sin}\PY{p}{(}\PY{n}{dlat} \PY{o}{/} \PY{l+m+mi}{2}\PY{p}{)}\PY{o}{*}\PY{o}{*}\PY{l+m+mi}{2} \PY{o}{+} \PY{n}{cos}\PY{p}{(}\PY{n}{lat1}\PY{p}{)} \PY{o}{*} \PY{n}{cos}\PY{p}{(}\PY{n}{lat2}\PY{p}{)} \PY{o}{*} \PY{n}{sin}\PY{p}{(}\PY{n}{dlon} \PY{o}{/} \PY{l+m+mi}{2}\PY{p}{)}\PY{o}{*}\PY{o}{*}\PY{l+m+mi}{2}
             \PY{n}{c} \PY{o}{=} \PY{l+m+mi}{2} \PY{o}{*} \PY{n}{atan2}\PY{p}{(}\PY{n}{sqrt}\PY{p}{(}\PY{n}{a}\PY{p}{)}\PY{p}{,} \PY{n}{sqrt}\PY{p}{(}\PY{l+m+mi}{1} \PY{o}{\PYZhy{}} \PY{n}{a}\PY{p}{)}\PY{p}{)}
         
             \PY{n}{distance} \PY{o}{=} \PY{n}{R} \PY{o}{*} \PY{n}{c}
             \PY{n}{dist}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{distance}\PY{p}{)}
             
         \PY{n}{test}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{distance}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{dist}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}23}]:} \PY{n}{train}\PY{o}{.}\PY{n}{distance}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}23}]:} 0    1.498521
         1    1.805507
         2    6.385098
         3    1.485498
         4    1.188588
         Name: distance, dtype: float64
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}24}]:} \PY{n}{d1} \PY{o}{=} \PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{dropoff\PYZus{}latitude}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]} \PY{o}{\PYZhy{}} \PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{pickup\PYZus{}latitude}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{)}\PY{o}{*} \PY{l+m+mf}{1.1132} \PY{o}{*} \PY{l+m+mi}{100}
         \PY{n+nb}{print}\PY{p}{(}\PY{n}{d1}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{)}
         \PY{n}{d1abs} \PY{o}{=} \PY{n+nb}{abs}\PY{p}{(}\PY{n}{d1}\PY{p}{)}
         \PY{n+nb}{print}\PY{p}{(}\PY{n}{d1abs}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{)}
         \PY{n}{d2} \PY{o}{=} \PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{dropoff\PYZus{}longitude}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]} \PY{o}{\PYZhy{}} \PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{pickup\PYZus{}longitude}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{)}\PY{o}{*} \PY{l+m+mf}{1.1132} \PY{o}{*} \PY{l+m+mi}{100}
         \PY{n+nb}{print}\PY{p}{(}\PY{n}{d2}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{)}
         \PY{n}{d2abs} \PY{o}{=} \PY{n+nb}{abs}\PY{p}{(}\PY{n}{d2}\PY{p}{)}
         \PY{n+nb}{print}\PY{p}{(}\PY{n}{d2abs}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{)}
         \PY{n}{d3} \PY{o}{=} \PY{n}{d1abs} \PY{o}{+} \PY{n}{d2abs}
         \PY{n+nb}{print}\PY{p}{(}\PY{n}{d3}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{)}
         
         \PY{k}{def} \PY{n+nf}{powerto}\PY{p}{(}\PY{n}{x}\PY{p}{,} \PY{n}{n}\PY{p}{)}\PY{p}{:}
             \PY{k}{return} \PY{n}{x}\PY{o}{*}\PY{o}{*}\PY{n}{n}
         
         \PY{c+c1}{\PYZsh{}1.9680865780429986}
         \PY{p}{(}\PY{l+m+mf}{0.259887}\PY{o}{*}\PY{o}{*}\PY{l+m+mi}{2} \PY{o}{+} \PY{l+m+mf}{1.950852}\PY{o}{*}\PY{o}{*}\PY{l+m+mi}{2}\PY{p}{)}\PY{o}{*}\PY{o}{*}\PY{l+m+mf}{0.5}
         
         \PY{n}{d3u} \PY{o}{=} \PY{n}{powerto}\PY{p}{(}\PY{n}{d1}\PY{p}{,}\PY{l+m+mi}{2}\PY{p}{)} \PY{o}{+} \PY{n}{powerto}\PY{p}{(}\PY{n}{d2}\PY{p}{,}\PY{l+m+mi}{2}\PY{p}{)}
         \PY{n}{d3u} \PY{o}{=} \PY{n}{powerto}\PY{p}{(}\PY{n}{d3u}\PY{p}{,} \PY{l+m+mf}{0.5}\PY{p}{)}
         \PY{n}{d3u}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
0   -0.259887
1   -0.825099
2   -5.994814
3   -1.475241
4   -1.189875
dtype: float64
0    0.259887
1    0.825099
2    5.994814
3    1.475241
4    1.189875
dtype: float64
0    1.950852
1   -2.122411
2   -2.928401
3   -0.247997
4    0.014438
dtype: float64
0    1.950852
1    2.122411
2    2.928401
3    0.247997
4    0.014438
dtype: float64
0    2.210739
1    2.947510
2    8.923215
3    1.723238
4    1.204313
dtype: float64

    \end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}24}]:} 0    1.968086
         1    2.277151
         2    6.671831
         3    1.495941
         4    1.189963
         dtype: float64
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}25}]:} \PY{n}{d1} \PY{o}{=} \PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{dropoff\PYZus{}latitude}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]} \PY{o}{\PYZhy{}} \PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{pickup\PYZus{}latitude}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{)}\PY{o}{*} \PY{l+m+mf}{1.1132} \PY{o}{*} \PY{l+m+mi}{100}
         \PY{n+nb}{print}\PY{p}{(}\PY{n}{d1}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{)}
         \PY{n}{d1abs} \PY{o}{=} \PY{n+nb}{abs}\PY{p}{(}\PY{n}{d1}\PY{p}{)}
         \PY{n+nb}{print}\PY{p}{(}\PY{n}{d1abs}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
0   -0.259887
1   -0.825099
2   -5.994814
3   -1.475241
4   -1.189875
dtype: float64
0    0.259887
1    0.825099
2    5.994814
3    1.475241
4    1.189875
dtype: float64

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}26}]:} \PY{n}{d2} \PY{o}{=} \PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{dropoff\PYZus{}longitude}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]} \PY{o}{\PYZhy{}} \PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{pickup\PYZus{}longitude}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{)}\PY{o}{*} \PY{l+m+mf}{1.1132} \PY{o}{*} \PY{l+m+mi}{100}
         \PY{n+nb}{print}\PY{p}{(}\PY{n}{d2}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{)}
         \PY{n}{d2abs} \PY{o}{=} \PY{n+nb}{abs}\PY{p}{(}\PY{n}{d2}\PY{p}{)}
         \PY{n+nb}{print}\PY{p}{(}\PY{n}{d2abs}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
0    1.950852
1   -2.122411
2   -2.928401
3   -0.247997
4    0.014438
dtype: float64
0    1.950852
1    2.122411
2    2.928401
3    0.247997
4    0.014438
dtype: float64

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}27}]:} \PY{n}{d3} \PY{o}{=} \PY{n}{d1abs} \PY{o}{+} \PY{n}{d2abs}
         \PY{n}{d3}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}27}]:} 0    2.210739
         1    2.947510
         2    8.923215
         3    1.723238
         4    1.204313
         dtype: float64
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}28}]:} \PY{k}{def} \PY{n+nf}{powerto}\PY{p}{(}\PY{n}{x}\PY{p}{,} \PY{n}{n}\PY{p}{)}\PY{p}{:}
             \PY{k}{return} \PY{n}{x}\PY{o}{*}\PY{o}{*}\PY{n}{n}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}29}]:} \PY{p}{(}\PY{l+m+mf}{0.259887}\PY{o}{*}\PY{o}{*}\PY{l+m+mi}{2} \PY{o}{+} \PY{l+m+mf}{1.950852}\PY{o}{*}\PY{o}{*}\PY{l+m+mi}{2}\PY{p}{)}\PY{o}{*}\PY{o}{*}\PY{l+m+mf}{0.5}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}29}]:} 1.9680865780429986
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}30}]:} \PY{n}{d3u} \PY{o}{=} \PY{n}{powerto}\PY{p}{(}\PY{n}{d1}\PY{p}{,}\PY{l+m+mi}{2}\PY{p}{)} \PY{o}{+} \PY{n}{powerto}\PY{p}{(}\PY{n}{d2}\PY{p}{,}\PY{l+m+mi}{2}\PY{p}{)}
         \PY{n}{d3u} \PY{o}{=} \PY{n}{powerto}\PY{p}{(}\PY{n}{d3u}\PY{p}{,} \PY{l+m+mf}{0.5}\PY{p}{)}
         \PY{n}{d3u}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}30}]:} 0    1.968086
         1    2.277151
         2    6.671831
         3    1.495941
         4    1.189963
         dtype: float64
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}31}]:} \PY{k+kn}{from} \PY{n+nn}{math} \PY{k}{import} \PY{n}{cos}\PY{p}{,} \PY{n}{asin}\PY{p}{,} \PY{n}{sqrt}
         \PY{k}{def} \PY{n+nf}{dist}\PY{p}{(}\PY{n}{lat1}\PY{p}{,} \PY{n}{lon1}\PY{p}{,} \PY{n}{lat2}\PY{p}{,} \PY{n}{lon2}\PY{p}{)}\PY{p}{:}
             \PY{n}{p} \PY{o}{=} \PY{l+m+mf}{0.017453292519943295}     \PY{c+c1}{\PYZsh{}Pi/180}
             \PY{n}{a} \PY{o}{=} \PY{l+m+mf}{0.5} \PY{o}{\PYZhy{}} \PY{n}{cos}\PY{p}{(}\PY{p}{(}\PY{n}{lat2} \PY{o}{\PYZhy{}} \PY{n}{lat1}\PY{p}{)} \PY{o}{*} \PY{n}{p}\PY{p}{)}\PY{o}{/}\PY{l+m+mi}{2} \PY{o}{+} \PY{n}{cos}\PY{p}{(}\PY{n}{lat1} \PY{o}{*} \PY{n}{p}\PY{p}{)} \PY{o}{*} \PY{n}{cos}\PY{p}{(}\PY{n}{lat2} \PY{o}{*} \PY{n}{p}\PY{p}{)} \PY{o}{*} \PY{p}{(}\PY{l+m+mi}{1} \PY{o}{\PYZhy{}} \PY{n}{cos}\PY{p}{(}\PY{p}{(}\PY{n}{lon2} \PY{o}{\PYZhy{}} \PY{n}{lon1}\PY{p}{)} \PY{o}{*} \PY{n}{p}\PY{p}{)}\PY{p}{)} \PY{o}{/} \PY{l+m+mi}{2}
             \PY{k}{return} \PY{l+m+mi}{12742} \PY{o}{*} \PY{n}{asin}\PY{p}{(}\PY{n}{sqrt}\PY{p}{(}\PY{n}{a}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}32}]:} \PY{n}{taxi\PYZus{}ex} \PY{o}{=} \PY{n}{train}\PY{o}{.}\PY{n}{copy}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}33}]:} \PY{n}{lat1} \PY{o}{=} \PY{n}{train}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pickup\PYZus{}latitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}
         \PY{n}{lon1} \PY{o}{=} \PY{n}{train}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pickup\PYZus{}longitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}
         \PY{n}{lat2} \PY{o}{=} \PY{n}{train}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dropoff\PYZus{}latitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}
         \PY{n}{lon2} \PY{o}{=} \PY{n}{train}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dropoff\PYZus{}longitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}
         
         \PY{n}{dist}\PY{p}{(}\PY{n}{lat1}\PY{p}{,} \PY{n}{lon1}\PY{p}{,} \PY{n}{lat2}\PY{p}{,} \PY{n}{lon2}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}33}]:} 1.498520778185159
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}34}]:} \PY{n}{train}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}34}]:}           id  vendor\_id     pickup\_datetime  passenger\_count  \textbackslash{}
         0  id2875421          2 2016-03-14 17:24:55                1   
         1  id2377394          1 2016-06-12 00:43:35                1   
         2  id3858529          2 2016-01-19 11:35:24                1   
         3  id3504673          2 2016-04-06 19:32:31                1   
         4  id2181028          2 2016-03-26 13:30:55                1   
         
            pickup\_longitude  pickup\_latitude  dropoff\_longitude  dropoff\_latitude  \textbackslash{}
         0        -73.982155        40.767937         -73.964630         40.765602   
         1        -73.980415        40.738564         -73.999481         40.731152   
         2        -73.979027        40.763939         -74.005333         40.710087   
         3        -74.010040        40.719971         -74.012268         40.706718   
         4        -73.973053        40.793209         -73.972923         40.782520   
         
           store\_and\_fwd\_flag  trip\_duration  trip\_sec  pick\_dayofweek  \textbackslash{}
         0                  N            455       455               0   
         1                  N            663       663               6   
         2                  N           2124      2124               1   
         3                  N            429       429               2   
         4                  N            435       435               5   
         
            pick\_dayofmonth  pick\_datehour  distance  
         0                3             17  1.498521  
         1                6              0  1.805507  
         2                1             11  6.385098  
         3                4             19  1.485498  
         4                3             13  1.188588  
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}35}]:} \PY{c+c1}{\PYZsh{} for i in range(len(train)):}
         \PY{c+c1}{\PYZsh{}     lat1 = train[\PYZsq{}pickup\PYZus{}latitude\PYZsq{}][i]}
         \PY{c+c1}{\PYZsh{}     lon1 = train[\PYZsq{}pickup\PYZus{}longitude\PYZsq{}][i]}
         \PY{c+c1}{\PYZsh{}     lat2 = train[\PYZsq{}dropoff\PYZus{}latitude\PYZsq{}][i]}
         \PY{c+c1}{\PYZsh{}     lon2 = train[\PYZsq{}dropoff\PYZus{}longitude\PYZsq{}][i]}
         \PY{c+c1}{\PYZsh{}     taxi\PYZus{}ex.at[i, \PYZsq{}distance\PYZsq{}] = dist(lat1, lon1, lat2, lon2)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}36}]:} \PY{c+c1}{\PYZsh{} \PYZsh{} approximate radius of earth in km}
         \PY{c+c1}{\PYZsh{} R = 6371.0}
         
         \PY{c+c1}{\PYZsh{} dist = []}
         
         \PY{c+c1}{\PYZsh{} for i in range(len(test1)):}
         \PY{c+c1}{\PYZsh{}     lat1 = radians(test1.iloc[i,5])}
         \PY{c+c1}{\PYZsh{}     lon1 = radians(test1.iloc[i,4])}
         \PY{c+c1}{\PYZsh{}     lat2 = radians(test1.iloc[i,7])}
         \PY{c+c1}{\PYZsh{}     lon2 = radians(test1.iloc[i,6])}
         
         \PY{c+c1}{\PYZsh{}     dlon = lon2 \PYZhy{} lon1}
         \PY{c+c1}{\PYZsh{}     dlat = lat2 \PYZhy{} lat1}
         
         \PY{c+c1}{\PYZsh{}     a = sin(dlat / 2)**2 + cos(lat1) * cos(lat2) * sin(dlon / 2)**2}
         \PY{c+c1}{\PYZsh{}     c = 2 * atan2(sqrt(a), sqrt(1 \PYZhy{} a))}
         
         \PY{c+c1}{\PYZsh{}     distance = R * c}
         \PY{c+c1}{\PYZsh{}     dist.append(distance)}
             
         \PY{c+c1}{\PYZsh{} test1[\PYZsq{}distance\PYZsq{}] = dist}
\end{Verbatim}


    \section{1.2.c Outlier Removal}\label{c-outlier-removal}

    \subsection{\#\#\# qualitative analysis}\label{qualitative-analysis}

\begin{itemize}
\item
\item
\end{itemize}

\subsubsection{quantitative analysis}\label{quantitative-analysis}

\begin{itemize}
\tightlist
\item
  Peirce's criterion
\item
  Tukey's fences
\item
  In anomaly detection
\item
  Modified Thompson Tau test
\end{itemize}

    \subsubsection{Tukey's fences}\label{tukeys-fences}

    \subsubsection{location coordinates mean,
median}\label{location-coordinates-mean-median}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}37}]:} \PY{n+nb}{print}\PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{pickup\PYZus{}latitude}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{p}{)}\PY{p}{,} \PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{dropoff\PYZus{}latitude}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{p}{)}\PY{p}{)}
         \PY{n+nb}{print}\PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{pickup\PYZus{}latitude}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{o}{.}\PY{n}{median}\PY{p}{(}\PY{p}{)}\PY{p}{,} \PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{dropoff\PYZus{}latitude}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{o}{.}\PY{n}{median}\PY{p}{(}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
40.750920908391734 40.7517995149002
40.75410079956055 40.75452423095703

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}38}]:} \PY{n+nb}{print}\PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{pickup\PYZus{}longitude}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{p}{)}\PY{p}{,} \PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{dropoff\PYZus{}longitude}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{p}{)}\PY{p}{)}
         \PY{n+nb}{print}\PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{pickup\PYZus{}longitude}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{o}{.}\PY{n}{median}\PY{p}{(}\PY{p}{)}\PY{p}{,} \PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{dropoff\PYZus{}longitude}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{o}{.}\PY{n}{median}\PY{p}{(}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
-73.97348630489282 -73.9734159469458
-73.98174285888672 -73.97975158691406

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}39}]:} \PY{n+nb}{print}\PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{distance}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{p}{)}\PY{p}{,} \PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{distance}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{o}{.}\PY{n}{median}\PY{p}{(}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
3.4408639020108267 2.093717132926714

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}40}]:} \PY{c+c1}{\PYZsh{}outlier IQR method}
         \PY{c+c1}{\PYZsh{}out of 75 percent value}
         \PY{n}{train\PYZus{}1} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{o}{.}\PY{n}{quantile}\PY{p}{(}\PY{n}{train}\PY{p}{,} \PY{n}{q} \PY{o}{=} \PY{l+m+mf}{0.75}\PY{p}{)}
         
         \PY{c+c1}{\PYZsh{}out of 25 percent value}
         \PY{n}{train\PYZus{}3} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{o}{.}\PY{n}{quantile}\PY{p}{(}\PY{n}{train}\PY{p}{,} \PY{n}{q} \PY{o}{=} \PY{l+m+mf}{0.25}\PY{p}{)}
         
         \PY{n}{iqr} \PY{o}{=} \PY{n}{train\PYZus{}3} \PY{o}{\PYZhy{}} \PY{n}{train\PYZus{}1}
         
         \PY{n}{lower\PYZus{}bound} \PY{o}{=} \PY{n}{train\PYZus{}1} \PY{o}{\PYZhy{}} \PY{p}{(}\PY{n}{iqr} \PY{o}{*} \PY{l+m+mf}{1.5}\PY{p}{)}
         \PY{n}{upper\PYZus{}bound} \PY{o}{=} \PY{n}{train\PYZus{}3} \PY{o}{+} \PY{p}{(}\PY{n}{iqr} \PY{o}{*} \PY{l+m+mf}{1.5}\PY{p}{)}
         \PY{n+nb}{print}\PY{p}{(}\PY{n}{lower\PYZus{}bound}\PY{o}{.}\PY{n}{pickup\PYZus{}longitude}\PY{p}{,} \PY{n}{lower\PYZus{}bound}\PY{o}{.}\PY{n}{pickup\PYZus{}latitude}\PY{p}{,} \PY{n}{lower\PYZus{}bound}\PY{o}{.}\PY{n}{dropoff\PYZus{}longitude}\PY{p}{,} \PY{n}{lower\PYZus{}bound}\PY{o}{.}\PY{n}{dropoff\PYZus{}latitude}\PY{p}{)}
         \PY{n+nb}{print}\PY{p}{(}\PY{n}{upper\PYZus{}bound}\PY{o}{.}\PY{n}{pickup\PYZus{}longitude}\PY{p}{,} \PY{n}{upper\PYZus{}bound}\PY{o}{.}\PY{n}{pickup\PYZus{}latitude}\PY{p}{,} \PY{n}{upper\PYZus{}bound}\PY{o}{.}\PY{n}{dropoff\PYZus{}longitude}\PY{p}{,} \PY{n}{upper\PYZus{}bound}\PY{o}{.}\PY{n}{dropoff\PYZus{}latitude}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
-73.93052673339841 40.81488037109375 -73.9205436706543 40.82069730758667
-74.02867126464847 40.690826416015625 -74.03379440307617 40.68499708175659

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}41}]:} \PY{n}{pick\PYZus{}long} \PY{o}{=} \PY{n}{lower\PYZus{}bound}\PY{o}{.}\PY{n}{pickup\PYZus{}longitude} \PY{o}{\PYZhy{}} \PY{n}{upper\PYZus{}bound}\PY{o}{.}\PY{n}{pickup\PYZus{}longitude}
         \PY{n}{pick\PYZus{}lat} \PY{o}{=} \PY{n}{lower\PYZus{}bound}\PY{o}{.}\PY{n}{pickup\PYZus{}latitude} \PY{o}{\PYZhy{}} \PY{n}{upper\PYZus{}bound}\PY{o}{.}\PY{n}{pickup\PYZus{}latitude}
         \PY{n+nb}{print}\PY{p}{(}\PY{n}{pick\PYZus{}long}\PY{p}{,} \PY{n}{pick\PYZus{}lat}\PY{p}{)}
         \PY{n}{drop\PYZus{}long} \PY{o}{=} \PY{n}{lower\PYZus{}bound}\PY{o}{.}\PY{n}{dropoff\PYZus{}longitude} \PY{o}{\PYZhy{}} \PY{n}{upper\PYZus{}bound}\PY{o}{.}\PY{n}{dropoff\PYZus{}longitude}
         \PY{n}{drop\PYZus{}lat} \PY{o}{=} \PY{n}{lower\PYZus{}bound}\PY{o}{.}\PY{n}{dropoff\PYZus{}latitude} \PY{o}{\PYZhy{}} \PY{n}{upper\PYZus{}bound}\PY{o}{.}\PY{n}{dropoff\PYZus{}latitude}
         \PY{n+nb}{print}\PY{p}{(}\PY{n}{drop\PYZus{}long}\PY{p}{,} \PY{n}{drop\PYZus{}lat}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
0.09814453125005684 0.124053955078125
0.113250732421875 0.13570022583007812

    \end{Verbatim}

    \section{decimal degree difference}\label{decimal-degree-difference}

\begin{itemize}
\tightlist
\item
  0.1 = 10km difference
\end{itemize}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}42}]:} \PY{n}{before\PYZus{}train} \PY{o}{=} \PY{n+nb}{len}\PY{p}{(}\PY{n}{train}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}43}]:} \PY{c+c1}{\PYZsh{}removal outliers by IQR method}
         \PY{c+c1}{\PYZsh{}time data has not been modified}
         \PY{n}{train} \PY{o}{=} \PY{n}{train}\PY{p}{[}\PY{n}{train}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pickup\PYZus{}longitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{\PYZlt{}}\PY{o}{=} \PY{n}{lower\PYZus{}bound}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{pickup\PYZus{}longitude}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{]}
         \PY{n}{train} \PY{o}{=} \PY{n}{train}\PY{p}{[}\PY{n}{train}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pickup\PYZus{}longitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{\PYZgt{}}\PY{o}{=} \PY{n}{upper\PYZus{}bound}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{pickup\PYZus{}longitude}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{]}
         \PY{n}{train} \PY{o}{=} \PY{n}{train}\PY{p}{[}\PY{n}{train}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pickup\PYZus{}latitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{\PYZlt{}}\PY{o}{=} \PY{n}{lower\PYZus{}bound}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{pickup\PYZus{}latitude}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{]}
         \PY{n}{train} \PY{o}{=} \PY{n}{train}\PY{p}{[}\PY{n}{train}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pickup\PYZus{}latitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{\PYZgt{}}\PY{o}{=} \PY{n}{upper\PYZus{}bound}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{pickup\PYZus{}latitude}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{]}
         \PY{n}{train} \PY{o}{=} \PY{n}{train}\PY{p}{[}\PY{n}{train}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dropoff\PYZus{}longitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{\PYZlt{}}\PY{o}{=} \PY{n}{lower\PYZus{}bound}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{dropoff\PYZus{}longitude}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{]}
         \PY{n}{train} \PY{o}{=} \PY{n}{train}\PY{p}{[}\PY{n}{train}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dropoff\PYZus{}longitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{\PYZgt{}}\PY{o}{=} \PY{n}{upper\PYZus{}bound}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{dropoff\PYZus{}longitude}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{]}
         \PY{n}{train} \PY{o}{=} \PY{n}{train}\PY{p}{[}\PY{n}{train}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dropoff\PYZus{}latitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{\PYZlt{}}\PY{o}{=} \PY{n}{lower\PYZus{}bound}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{dropoff\PYZus{}latitude}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{]}
         \PY{n}{train} \PY{o}{=} \PY{n}{train}\PY{p}{[}\PY{n}{train}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dropoff\PYZus{}latitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{\PYZgt{}}\PY{o}{=} \PY{n}{upper\PYZus{}bound}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{dropoff\PYZus{}latitude}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{]}
         \PY{n}{train} \PY{o}{=} \PY{n}{train}\PY{p}{[}\PY{n}{train}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{trip\PYZus{}duration}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{\PYZlt{}}\PY{o}{=} \PY{n}{lower\PYZus{}bound}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{trip\PYZus{}duration}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{]}
         \PY{n}{train} \PY{o}{=} \PY{n}{train}\PY{p}{[}\PY{n}{train}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{trip\PYZus{}duration}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{\PYZgt{}}\PY{o}{=} \PY{n}{upper\PYZus{}bound}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{trip\PYZus{}duration}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{]}
         \PY{n}{train} \PY{o}{=} \PY{n}{train}\PY{p}{[}\PY{n}{train}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{distance}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{\PYZlt{}}\PY{o}{=} \PY{n}{lower\PYZus{}bound}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{distance}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{]}
         \PY{n}{train} \PY{o}{=} \PY{n}{train}\PY{p}{[}\PY{n}{train}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{distance}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{\PYZgt{}}\PY{o}{=} \PY{n}{upper\PYZus{}bound}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{distance}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{]}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}45}]:} \PY{n}{after\PYZus{}train} \PY{o}{=} \PY{n+nb}{len}\PY{p}{(}\PY{n}{train}\PY{p}{)}
         \PY{n}{dropped\PYZus{}bound} \PY{o}{=}  \PY{n}{before\PYZus{}train} \PY{o}{\PYZhy{}} \PY{n}{after\PYZus{}train}
         \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{number of deleted outlier : }\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{dropped\PYZus{}bound}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
number of deleted outlier :  222493

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}46}]:} \PY{c+c1}{\PYZsh{} \PYZsh{}outlier IQR method}
         \PY{c+c1}{\PYZsh{} \PYZsh{}out of 75 percent value}
         \PY{c+c1}{\PYZsh{} test\PYZus{}1 = pd.DataFrame.quantile(test, q = 0.75)}
         \PY{c+c1}{\PYZsh{} test\PYZus{}1}
         
         \PY{c+c1}{\PYZsh{} \PYZsh{}out of 25 percent value}
         \PY{c+c1}{\PYZsh{} test\PYZus{}3 = pd.DataFrame.quantile(test, q = 0.25)}
         \PY{c+c1}{\PYZsh{} test\PYZus{}3}
         
         \PY{c+c1}{\PYZsh{} iqr = test\PYZus{}3 \PYZhy{} test\PYZus{}1}
         \PY{c+c1}{\PYZsh{} iqr}
         
         \PY{c+c1}{\PYZsh{} lower\PYZus{}bound = test\PYZus{}1 \PYZhy{} (iqr * 1.5)}
         \PY{c+c1}{\PYZsh{} upper\PYZus{}bound = test\PYZus{}3 + (iqr * 1.5)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}47}]:} \PY{c+c1}{\PYZsh{} \PYZsh{}removal outliers by IQR method}
         \PY{c+c1}{\PYZsh{} \PYZsh{}time data has not been modified}
         \PY{c+c1}{\PYZsh{} test = test[test[\PYZsq{}pickup\PYZus{}longitude\PYZsq{}] \PYZlt{}= lower\PYZus{}bound[\PYZdq{}pickup\PYZus{}longitude\PYZdq{}]]}
         \PY{c+c1}{\PYZsh{} test = test[test[\PYZsq{}pickup\PYZus{}longitude\PYZsq{}] \PYZgt{}= upper\PYZus{}bound[\PYZdq{}pickup\PYZus{}longitude\PYZdq{}]]}
         \PY{c+c1}{\PYZsh{} test = test[test[\PYZsq{}pickup\PYZus{}latitude\PYZsq{}] \PYZlt{}= lower\PYZus{}bound[\PYZdq{}pickup\PYZus{}latitude\PYZdq{}]]}
         \PY{c+c1}{\PYZsh{} test = test[test[\PYZsq{}pickup\PYZus{}latitude\PYZsq{}] \PYZgt{}= upper\PYZus{}bound[\PYZdq{}pickup\PYZus{}latitude\PYZdq{}]]}
         \PY{c+c1}{\PYZsh{} test = test[test[\PYZsq{}dropoff\PYZus{}longitude\PYZsq{}] \PYZlt{}= lower\PYZus{}bound[\PYZdq{}dropoff\PYZus{}longitude\PYZdq{}]]}
         \PY{c+c1}{\PYZsh{} test = test[test[\PYZsq{}dropoff\PYZus{}longitude\PYZsq{}] \PYZgt{}= upper\PYZus{}bound[\PYZdq{}dropoff\PYZus{}longitude\PYZdq{}]]}
         \PY{c+c1}{\PYZsh{} test = test[test[\PYZsq{}dropoff\PYZus{}latitude\PYZsq{}] \PYZlt{}= lower\PYZus{}bound[\PYZdq{}dropoff\PYZus{}latitude\PYZdq{}]]}
         \PY{c+c1}{\PYZsh{} test = test[test[\PYZsq{}dropoff\PYZus{}latitude\PYZsq{}] \PYZgt{}= upper\PYZus{}bound[\PYZdq{}dropoff\PYZus{}latitude\PYZdq{}]]}
         \PY{c+c1}{\PYZsh{} test = test[test[\PYZsq{}distance\PYZsq{}] \PYZlt{}= lower\PYZus{}bound[\PYZdq{}distance\PYZdq{}]]}
         \PY{c+c1}{\PYZsh{} test = test[test[\PYZsq{}distance\PYZsq{}] \PYZgt{}= upper\PYZus{}bound[\PYZdq{}distance\PYZdq{}]]}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}48}]:} \PY{c+c1}{\PYZsh{} train = pd.get\PYZus{}dummies(train, columns=[\PYZdq{}store\PYZus{}and\PYZus{}fwd\PYZus{}flag\PYZdq{}], prefix=\PYZsq{}store\PYZus{}and\PYZus{}fwd\PYZus{}flag\PYZsq{})}
         \PY{c+c1}{\PYZsh{} train = pd.get\PYZus{}dummies(train, columns=[\PYZdq{}pick\PYZus{}datehour\PYZdq{}], prefix=\PYZsq{}pick\PYZus{}datehour\PYZsq{})}
         \PY{c+c1}{\PYZsh{} train = pd.get\PYZus{}dummies(train, columns=[\PYZdq{}pick\PYZus{}dayofweek\PYZdq{}], prefix=\PYZsq{}pick\PYZus{}dayofweek\PYZsq{})}
         \PY{c+c1}{\PYZsh{} train = pd.get\PYZus{}dummies(train, columns=[\PYZdq{}pick\PYZus{}dayofmonth\PYZdq{}], prefix=\PYZsq{}pick\PYZus{}dayofmonth\PYZsq{})}
         \PY{c+c1}{\PYZsh{} train.info()}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}49}]:} \PY{c+c1}{\PYZsh{} test = pd.get\PYZus{}dummies(test, columns=[\PYZdq{}store\PYZus{}and\PYZus{}fwd\PYZus{}flag\PYZdq{}], prefix=\PYZsq{}store\PYZus{}and\PYZus{}fwd\PYZus{}flag\PYZsq{})}
         \PY{c+c1}{\PYZsh{} test = pd.get\PYZus{}dummies(test, columns=[\PYZdq{}pick\PYZus{}datehour\PYZdq{}], prefix=\PYZsq{}pick\PYZus{}datehour\PYZsq{})}
         \PY{c+c1}{\PYZsh{} test = pd.get\PYZus{}dummies(test, columns=[\PYZdq{}pick\PYZus{}dayofweek\PYZdq{}], prefix=\PYZsq{}pick\PYZus{}dayofweek\PYZsq{})}
         \PY{c+c1}{\PYZsh{} test = pd.get\PYZus{}dummies(test, columns=[\PYZdq{}pick\PYZus{}dayofmonth\PYZdq{}], prefix=\PYZsq{}pick\PYZus{}dayofmonth\PYZsq{})}
         \PY{c+c1}{\PYZsh{} test.info()}
\end{Verbatim}


    \section{1.2.d.2 Spatial Data Analysis}\label{d.2-spatial-data-analysis}

\subsubsection{Types of spatial
analysis}\label{types-of-spatial-analysis}

\begin{itemize}
\item
  FA(factor analysis)

  \begin{itemize}
  \tightlist
  \item
    Euclidean metric = \textgreater{} PCA(principal component analysis)
  \item
    Chi-Square distance =\textgreater{} Correspondence Analysis (similar
    to PCA, but better for categrorical data)
  \item
    Generalized Mahalanobis distance =\textgreater{} Discriminant
    Analysis
  \end{itemize}
\item
  Spatial autocorrelation
\item
  Spatial stratified heterogeneity

  \begin{itemize}
  \tightlist
  \item
    geographical detector q-statistic
  \end{itemize}
\end{itemize}

\subsubsection{Spatial dependency or
auto-correlation}\label{spatial-dependency-or-auto-correlation}

\subsubsection{Scaling}\label{scaling}

\subsubsection{Common errors in spatial
analysis}\label{common-errors-in-spatial-analysis}

\begin{itemize}
\tightlist
\item
  Length
\item
  Locational fallacy
\item
  Ecological fallacy

  \begin{itemize}
  \tightlist
  \item
    Modifiable areal unit problem

    \begin{itemize}
    \tightlist
    \item
      statistical bias
    \end{itemize}
  \end{itemize}
\end{itemize}

    \subsubsection{stack-up coordinates
data}\label{stack-up-coordinates-data}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}93}]:} \PY{n}{coords} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{vstack}\PY{p}{(}\PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pickup\PYZus{}latitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pickup\PYZus{}longitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}\PY{o}{.}\PY{n}{values}\PY{p}{,}
                             \PY{n}{train}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dropoff\PYZus{}latitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dropoff\PYZus{}longitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}\PY{o}{.}\PY{n}{values}\PY{p}{,}
                             \PY{n}{test}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pickup\PYZus{}latitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pickup\PYZus{}longitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}\PY{o}{.}\PY{n}{values}\PY{p}{,}
                             \PY{n}{test}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dropoff\PYZus{}latitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dropoff\PYZus{}longitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}\PY{o}{.}\PY{n}{values}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}94}]:} \PY{c+c1}{\PYZsh{}PCA}
         \PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{decomposition} \PY{k}{import} \PY{n}{PCA}
         
         
         \PY{n}{pca} \PY{o}{=} \PY{n}{PCA}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{fit}\PY{p}{(}\PY{n}{coords}\PY{p}{)}
         \PY{n}{train}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pickup\PYZus{}pca0}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{pca}\PY{o}{.}\PY{n}{transform}\PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pickup\PYZus{}latitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pickup\PYZus{}longitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}\PY{p}{)}\PY{p}{[}\PY{p}{:}\PY{p}{,} \PY{l+m+mi}{0}\PY{p}{]}
         \PY{n}{train}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pickup\PYZus{}pca1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{pca}\PY{o}{.}\PY{n}{transform}\PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pickup\PYZus{}latitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pickup\PYZus{}longitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}\PY{p}{)}\PY{p}{[}\PY{p}{:}\PY{p}{,} \PY{l+m+mi}{1}\PY{p}{]}
         \PY{n}{train}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dropoff\PYZus{}pca0}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{pca}\PY{o}{.}\PY{n}{transform}\PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dropoff\PYZus{}latitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dropoff\PYZus{}longitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}\PY{p}{)}\PY{p}{[}\PY{p}{:}\PY{p}{,} \PY{l+m+mi}{0}\PY{p}{]}
         \PY{n}{train}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dropoff\PYZus{}pca1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{pca}\PY{o}{.}\PY{n}{transform}\PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dropoff\PYZus{}latitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dropoff\PYZus{}longitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}\PY{p}{)}\PY{p}{[}\PY{p}{:}\PY{p}{,} \PY{l+m+mi}{1}\PY{p}{]}
         \PY{n}{test}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pickup\PYZus{}pca0}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{pca}\PY{o}{.}\PY{n}{transform}\PY{p}{(}\PY{n}{test}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pickup\PYZus{}latitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pickup\PYZus{}longitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}\PY{p}{)}\PY{p}{[}\PY{p}{:}\PY{p}{,} \PY{l+m+mi}{0}\PY{p}{]}
         \PY{n}{test}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pickup\PYZus{}pca1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{pca}\PY{o}{.}\PY{n}{transform}\PY{p}{(}\PY{n}{test}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pickup\PYZus{}latitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pickup\PYZus{}longitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}\PY{p}{)}\PY{p}{[}\PY{p}{:}\PY{p}{,} \PY{l+m+mi}{1}\PY{p}{]}
         \PY{n}{test}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dropoff\PYZus{}pca0}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{pca}\PY{o}{.}\PY{n}{transform}\PY{p}{(}\PY{n}{test}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dropoff\PYZus{}latitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dropoff\PYZus{}longitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}\PY{p}{)}\PY{p}{[}\PY{p}{:}\PY{p}{,} \PY{l+m+mi}{0}\PY{p}{]}
         \PY{n}{test}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dropoff\PYZus{}pca1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{pca}\PY{o}{.}\PY{n}{transform}\PY{p}{(}\PY{n}{test}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dropoff\PYZus{}latitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dropoff\PYZus{}longitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}\PY{p}{)}\PY{p}{[}\PY{p}{:}\PY{p}{,} \PY{l+m+mi}{1}\PY{p}{]}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}95}]:} \PY{c+c1}{\PYZsh{} pca = PCA().fit(coords)}
         \PY{c+c1}{\PYZsh{} test1[\PYZsq{}pickup\PYZus{}pca0\PYZsq{}] = pca.transform(test1[[\PYZsq{}pickup\PYZus{}latitude\PYZsq{}, \PYZsq{}pickup\PYZus{}longitude\PYZsq{}]])[:, 0]}
         \PY{c+c1}{\PYZsh{} test1[\PYZsq{}pickup\PYZus{}pca1\PYZsq{}] = pca.transform(test1[[\PYZsq{}pickup\PYZus{}latitude\PYZsq{}, \PYZsq{}pickup\PYZus{}longitude\PYZsq{}]])[:, 1]}
         \PY{c+c1}{\PYZsh{} test1[\PYZsq{}dropoff\PYZus{}pca0\PYZsq{}] = pca.transform(test1[[\PYZsq{}dropoff\PYZus{}latitude\PYZsq{}, \PYZsq{}dropoff\PYZus{}longitude\PYZsq{}]])[:, 0]}
         \PY{c+c1}{\PYZsh{} test1[\PYZsq{}dropoff\PYZus{}pca1\PYZsq{}] = pca.transform(test1[[\PYZsq{}dropoff\PYZus{}latitude\PYZsq{}, \PYZsq{}dropoff\PYZus{}longitude\PYZsq{}]])[:, 1]}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}96}]:} \PY{n}{pca}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}96}]:} PCA(copy=True, iterated\_power='auto', n\_components=None, random\_state=None,
           svd\_solver='auto', tol=0.0, whiten=False)
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}97}]:} \PY{n}{train}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}97}]:}            id  vendor\_id     pickup\_datetime  passenger\_count  \textbackslash{}
         0   id2875421          2 2016-03-14 17:24:55                1   
         1   id2377394          1 2016-06-12 00:43:35                1   
         3   id3504673          2 2016-04-06 19:32:31                1   
         4   id2181028          2 2016-03-26 13:30:55                1   
         5   id0801584          2 2016-01-30 22:01:40                6   
         6   id1813257          1 2016-06-17 22:34:59                4   
         7   id1324603          2 2016-05-21 07:54:58                1   
         8   id1301050          1 2016-05-27 23:12:23                1   
         9   id0012891          2 2016-03-10 21:45:01                1   
         10  id1436371          2 2016-05-10 22:08:41                1   
         
             pickup\_longitude  pickup\_latitude  dropoff\_longitude  dropoff\_latitude  \textbackslash{}
         0         -73.982155        40.767937         -73.964630         40.765602   
         1         -73.980415        40.738564         -73.999481         40.731152   
         3         -74.010040        40.719971         -74.012268         40.706718   
         4         -73.973053        40.793209         -73.972923         40.782520   
         5         -73.982857        40.742195         -73.992081         40.749184   
         6         -73.969017        40.757839         -73.957405         40.765896   
         7         -73.969276        40.797779         -73.922470         40.760559   
         8         -73.999481        40.738400         -73.985786         40.732815   
         9         -73.981049        40.744339         -73.973000         40.789989   
         10        -73.982651        40.763840         -74.002228         40.732990   
         
            store\_and\_fwd\_flag  trip\_duration        {\ldots}          pickup\_pca1  \textbackslash{}
         0                   N            455        {\ldots}             0.015592   
         1                   N            663        {\ldots}            -0.013535   
         3                   N            429        {\ldots}            -0.025818   
         4                   N            435        {\ldots}             0.038529   
         5                   N            443        {\ldots}            -0.009488   
         6                   N            341        {\ldots}             0.003068   
         7                   N           1551        {\ldots}             0.042250   
         8                   N            255        {\ldots}            -0.009877   
         9                   N           1225        {\ldots}            -0.007750   
         10                  N           1274        {\ldots}             0.011677   
         
             dropoff\_pca0  dropoff\_pca1  pickup\_cluster  dropoff\_cluster  \textbackslash{}
         0      -0.015973      0.009795              42               28   
         1       0.025072     -0.016978              24               39   
         3       0.042493     -0.038355              38               49   
         4      -0.011236      0.028031              95               57   
         5       0.014210     -0.000794              41                7   
         6      -0.023110      0.008635              19               61   
         7      -0.056269     -0.003590              95               44   
         8       0.011321     -0.018091              83               85   
         9      -0.012657      0.035364              41               57   
         10      0.027395     -0.014627              81               59   
         
             gauss\_pickup\_cluster  gauss\_dropoff\_cluster  picktime\_cluster  \textbackslash{}
         0                     91                     86                 2   
         1                     82                     19                 4   
         3                     16                     60                 0   
         4                     78                     33                 2   
         5                     59                     55                 0   
         6                     12                     68                 0   
         7                     71                     40                 3   
         8                     64                     35                 0   
         9                     30                     78                 0   
         10                    91                     19                 0   
         
             picktime\_cluster1  picktime\_cluster3  
         0                   1                  4  
         1                   0                  2  
         3                   1                  4  
         4                   4                  4  
         5                   3                  3  
         6                   3                  2  
         7                   2                  0  
         8                   3                  2  
         9                   3                  1  
         10                  3                  0  
         
         [10 rows x 26 columns]
\end{Verbatim}
            
    \section{1.2.d.3 Clustering}\label{d.3-clustering}

\begin{itemize}
\tightlist
\item
  K-means algorithms
\item
  EM(Expectation Maximization) algorithms
\item
  K-medoid algorithms
\end{itemize}

    \subsubsection{k-means clustering}\label{k-means-clustering}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}98}]:} \PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{cluster} \PY{k}{import} \PY{n}{MiniBatchKMeans}
         
         \PY{n}{sample\PYZus{}ind} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{random}\PY{o}{.}\PY{n}{permutation}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{coords}\PY{p}{)}\PY{p}{)}\PY{p}{[}\PY{p}{:}\PY{l+m+mi}{500000}\PY{p}{]}
         \PY{n}{kmeans} \PY{o}{=} \PY{n}{MiniBatchKMeans}\PY{p}{(}\PY{n}{n\PYZus{}clusters}\PY{o}{=}\PY{l+m+mi}{100}\PY{p}{,} \PY{n}{batch\PYZus{}size}\PY{o}{=}\PY{l+m+mi}{10000}\PY{p}{)}\PY{o}{.}\PY{n}{fit}\PY{p}{(}\PY{n}{coords}\PY{p}{[}\PY{n}{sample\PYZus{}ind}\PY{p}{]}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}99}]:} \PY{n}{train}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{p}{:}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pickup\PYZus{}cluster}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{kmeans}\PY{o}{.}\PY{n}{predict}\PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pickup\PYZus{}latitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pickup\PYZus{}longitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}\PY{p}{)}
         \PY{n}{train}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{p}{:}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dropoff\PYZus{}cluster}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{kmeans}\PY{o}{.}\PY{n}{predict}\PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dropoff\PYZus{}latitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dropoff\PYZus{}longitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}\PY{p}{)}
         \PY{n}{test}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{p}{:}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pickup\PYZus{}cluster}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{kmeans}\PY{o}{.}\PY{n}{predict}\PY{p}{(}\PY{n}{test}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pickup\PYZus{}latitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pickup\PYZus{}longitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}\PY{p}{)}
         \PY{n}{test}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{p}{:}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dropoff\PYZus{}cluster}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{kmeans}\PY{o}{.}\PY{n}{predict}\PY{p}{(}\PY{n}{test}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dropoff\PYZus{}latitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dropoff\PYZus{}longitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}100}]:} \PY{c+c1}{\PYZsh{} test1.loc[:, \PYZsq{}pickup\PYZus{}cluster\PYZsq{}] = kmeans.predict(test1[[\PYZsq{}pickup\PYZus{}latitude\PYZsq{}, \PYZsq{}pickup\PYZus{}longitude\PYZsq{}]])}
          \PY{c+c1}{\PYZsh{} test1.loc[:, \PYZsq{}dropoff\PYZus{}cluster\PYZsq{}] = kmeans.predict(test1[[\PYZsq{}dropoff\PYZus{}latitude\PYZsq{}, \PYZsq{}dropoff\PYZus{}longitude\PYZsq{}]])}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}101}]:} \PY{n}{N} \PY{o}{=} \PY{l+m+mi}{100000} \PY{c+c1}{\PYZsh{} number of sample rows in plots}
          
          \PY{n}{fig}\PY{p}{,} \PY{n}{ax} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{subplots}\PY{p}{(}\PY{n}{ncols}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{,} \PY{n}{nrows}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}
          \PY{n}{ax}\PY{o}{.}\PY{n}{scatter}\PY{p}{(}\PY{n}{train}\PY{o}{.}\PY{n}{pickup\PYZus{}longitude}\PY{o}{.}\PY{n}{values}\PY{p}{[}\PY{p}{:}\PY{n}{N}\PY{p}{]}\PY{p}{,} \PY{n}{train}\PY{o}{.}\PY{n}{pickup\PYZus{}latitude}\PY{o}{.}\PY{n}{values}\PY{p}{[}\PY{p}{:}\PY{n}{N}\PY{p}{]}\PY{p}{,} \PY{n}{s}\PY{o}{=}\PY{l+m+mi}{10}\PY{p}{,} \PY{n}{lw}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{,}
                     \PY{n}{c}\PY{o}{=}\PY{n}{train}\PY{o}{.}\PY{n}{pickup\PYZus{}cluster}\PY{p}{[}\PY{p}{:}\PY{n}{N}\PY{p}{]}\PY{o}{.}\PY{n}{values}\PY{p}{,} \PY{n}{cmap}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{tab20}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{alpha}\PY{o}{=}\PY{l+m+mf}{0.2}\PY{p}{)}
          \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}xlim}\PY{p}{(}\PY{n}{city\PYZus{}long\PYZus{}border}\PY{p}{)}
          \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}ylim}\PY{p}{(}\PY{n}{city\PYZus{}lat\PYZus{}border}\PY{p}{)}
          \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}xlabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Longitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}ylabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Latitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_88_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \subsubsection{pick date time
clustering}\label{pick-date-time-clustering}

    \subsubsection{date hour}\label{date-hour}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}102}]:} \PY{n}{coords2} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{vstack}\PY{p}{(}\PY{p}{(}
                               \PY{n}{train}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pick\PYZus{}datehour}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}\PY{o}{.}\PY{n}{values}\PY{p}{,}
                               
                              \PY{n}{test}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pick\PYZus{}datehour}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}\PY{o}{.}\PY{n}{values}\PY{p}{,}
                              \PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}103}]:} \PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{cluster} \PY{k}{import} \PY{n}{MiniBatchKMeans}
          
          \PY{n}{sample\PYZus{}ind2} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{random}\PY{o}{.}\PY{n}{permutation}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{coords2}\PY{p}{)}\PY{p}{)}\PY{p}{[}\PY{p}{:}\PY{l+m+mi}{500000}\PY{p}{]}
          \PY{n}{kmeans2} \PY{o}{=} \PY{n}{MiniBatchKMeans}\PY{p}{(}\PY{n}{n\PYZus{}clusters}\PY{o}{=}\PY{l+m+mi}{5}\PY{p}{,} \PY{n}{batch\PYZus{}size}\PY{o}{=}\PY{l+m+mi}{10000}\PY{p}{)}\PY{o}{.}\PY{n}{fit}\PY{p}{(}\PY{n}{coords2}\PY{p}{[}\PY{n}{sample\PYZus{}ind2}\PY{p}{]}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}104}]:} \PY{n}{kmeans2}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}104}]:} MiniBatchKMeans(batch\_size=10000, compute\_labels=True, init='k-means++',
                  init\_size=None, max\_iter=100, max\_no\_improvement=10, n\_clusters=5,
                  n\_init=3, random\_state=None, reassignment\_ratio=0.01, tol=0.0,
                  verbose=0)
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}105}]:} \PY{n}{train}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{p}{:}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{picktime\PYZus{}cluster1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{kmeans2}\PY{o}{.}\PY{n}{predict}\PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pick\PYZus{}datehour}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}\PY{p}{)}
          \PY{n}{test}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{p}{:}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{picktime\PYZus{}cluster1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{kmeans2}\PY{o}{.}\PY{n}{predict}\PY{p}{(}\PY{n}{test}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pick\PYZus{}datehour}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}109}]:} \PY{n}{train}\PY{o}{.}\PY{n}{picktime\PYZus{}cluster1}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}109}]:} 0     3
          1     4
          3     3
          4     2
          5     0
          6     0
          7     1
          8     0
          9     0
          10    0
          Name: picktime\_cluster1, dtype: int32
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}107}]:} \PY{n}{coords3} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{vstack}\PY{p}{(}\PY{p}{(}
                               \PY{n}{train}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pickup\PYZus{}datetime}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}\PY{o}{.}\PY{n}{values}\PY{p}{,}
                               
                              \PY{n}{test}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pickup\PYZus{}datetime}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}\PY{o}{.}\PY{n}{values}\PY{p}{,}
                              \PY{p}{)}\PY{p}{)}
          
          \PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{cluster} \PY{k}{import} \PY{n}{MiniBatchKMeans}
          
          \PY{n}{sample\PYZus{}ind3} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{random}\PY{o}{.}\PY{n}{permutation}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{coords3}\PY{p}{)}\PY{p}{)}\PY{p}{[}\PY{p}{:}\PY{l+m+mi}{500000}\PY{p}{]}
          \PY{n}{kmeans3} \PY{o}{=} \PY{n}{MiniBatchKMeans}\PY{p}{(}\PY{n}{n\PYZus{}clusters}\PY{o}{=}\PY{l+m+mi}{5}\PY{p}{,} \PY{n}{batch\PYZus{}size}\PY{o}{=}\PY{l+m+mi}{10000}\PY{p}{)}\PY{o}{.}\PY{n}{fit}\PY{p}{(}\PY{n}{coords3}\PY{p}{[}\PY{n}{sample\PYZus{}ind3}\PY{p}{]}\PY{p}{)}
          
          \PY{n}{train}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{p}{:}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{picktime\PYZus{}cluster3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{kmeans3}\PY{o}{.}\PY{n}{predict}\PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pickup\PYZus{}datetime}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}\PY{p}{)}
          \PY{n}{test}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{p}{:}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{picktime\PYZus{}cluster3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{kmeans3}\PY{o}{.}\PY{n}{predict}\PY{p}{(}\PY{n}{test}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pickup\PYZus{}datetime}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}110}]:} \PY{n}{train}\PY{o}{.}\PY{n}{picktime\PYZus{}cluster3}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}110}]:} 0     2
          1     1
          3     3
          4     3
          5     0
          6     1
          7     4
          8     1
          9     2
          10    4
          Name: picktime\_cluster3, dtype: int32
\end{Verbatim}
            
    \section{Gaussian mixture models}\label{gaussian-mixture-models}

\subsubsection{Estimate Maximization}\label{estimate-maximization}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}59}]:} \PY{k+kn}{import} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{mixture}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}60}]:} \PY{c+c1}{\PYZsh{}EM}
         
         \PY{n}{sample\PYZus{}ind} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{random}\PY{o}{.}\PY{n}{permutation}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{coords}\PY{p}{)}\PY{p}{)}\PY{p}{[}\PY{p}{:}\PY{l+m+mi}{500000}\PY{p}{]}
         \PY{n}{gaussian\PYZus{}train} \PY{o}{=} \PY{n}{sklearn}\PY{o}{.}\PY{n}{mixture}\PY{o}{.}\PY{n}{GaussianMixture}\PY{p}{(}\PY{n}{n\PYZus{}components}\PY{o}{=}\PY{l+m+mi}{100}\PY{p}{)}\PY{o}{.}\PY{n}{fit}\PY{p}{(}\PY{n}{coords}\PY{p}{[}\PY{n}{sample\PYZus{}ind}\PY{p}{]}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}61}]:} \PY{n}{gaussian\PYZus{}train}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}61}]:} GaussianMixture(covariance\_type='full', init\_params='kmeans', max\_iter=100,
                 means\_init=None, n\_components=100, n\_init=1, precisions\_init=None,
                 random\_state=None, reg\_covar=1e-06, tol=0.001, verbose=0,
                 verbose\_interval=10, warm\_start=False, weights\_init=None)
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}62}]:} \PY{n}{train}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{p}{:}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{gauss\PYZus{}pickup\PYZus{}cluster}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{gaussian\PYZus{}train}\PY{o}{.}\PY{n}{predict}\PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pickup\PYZus{}latitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pickup\PYZus{}longitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}\PY{p}{)}
         \PY{n}{train}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{p}{:}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{gauss\PYZus{}dropoff\PYZus{}cluster}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{gaussian\PYZus{}train}\PY{o}{.}\PY{n}{predict}\PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dropoff\PYZus{}latitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dropoff\PYZus{}longitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}\PY{p}{)}
         \PY{n}{test}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{p}{:}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{gauss\PYZus{}pickup\PYZus{}cluster}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{gaussian\PYZus{}train}\PY{o}{.}\PY{n}{predict}\PY{p}{(}\PY{n}{test}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pickup\PYZus{}latitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pickup\PYZus{}longitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}\PY{p}{)}
         \PY{n}{test}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{p}{:}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{gauss\PYZus{}dropoff\PYZus{}cluster}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{gaussian\PYZus{}train}\PY{o}{.}\PY{n}{predict}\PY{p}{(}\PY{n}{test}\PY{p}{[}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dropoff\PYZus{}latitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dropoff\PYZus{}longitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{]}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}63}]:} \PY{n}{train}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}63}]:}           id  vendor\_id     pickup\_datetime  passenger\_count  \textbackslash{}
         0  id2875421          2 2016-03-14 17:24:55                1   
         1  id2377394          1 2016-06-12 00:43:35                1   
         3  id3504673          2 2016-04-06 19:32:31                1   
         4  id2181028          2 2016-03-26 13:30:55                1   
         5  id0801584          2 2016-01-30 22:01:40                6   
         
            pickup\_longitude  pickup\_latitude  dropoff\_longitude  dropoff\_latitude  \textbackslash{}
         0        -73.982155        40.767937         -73.964630         40.765602   
         1        -73.980415        40.738564         -73.999481         40.731152   
         3        -74.010040        40.719971         -74.012268         40.706718   
         4        -73.973053        40.793209         -73.972923         40.782520   
         5        -73.982857        40.742195         -73.992081         40.749184   
         
           store\_and\_fwd\_flag  trip\_duration          {\ldots}            pick\_datehour  \textbackslash{}
         0                  N            455          {\ldots}                       17   
         1                  N            663          {\ldots}                        0   
         3                  N            429          {\ldots}                       19   
         4                  N            435          {\ldots}                       13   
         5                  N            443          {\ldots}                       22   
         
            distance  pickup\_pca0  pickup\_pca1  dropoff\_pca0  dropoff\_pca1  \textbackslash{}
         0  1.498521     0.000729     0.015592     -0.015973      0.009795   
         1  1.805507     0.004908    -0.013535      0.025072     -0.016978   
         3  1.485498     0.037656    -0.025818      0.042493     -0.038355   
         4  1.188588    -0.013249     0.038529     -0.011236      0.028031   
         5  1.098942     0.006572    -0.009488      0.014210     -0.000794   
         
            pickup\_cluster  dropoff\_cluster  gauss\_pickup\_cluster  \textbackslash{}
         0              42               28                    91   
         1              24               39                    82   
         3              38               49                    16   
         4              95               57                    78   
         5              41                7                    59   
         
            gauss\_dropoff\_cluster  
         0                     86  
         1                     19  
         3                     60  
         4                     33  
         5                     55  
         
         [5 rows x 23 columns]
\end{Verbatim}
            
    \section{DBSCAN (Density based spatial clustering of applications with
noise)}\label{dbscan-density-based-spatial-clustering-of-applications-with-noise}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}1}]:} \PY{k+kn}{import} \PY{n+nn}{numpy} \PY{k}{as} \PY{n+nn}{np}
        
        \PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{cluster} \PY{k}{import} \PY{n}{DBSCAN}
        \PY{k+kn}{from} \PY{n+nn}{sklearn} \PY{k}{import} \PY{n}{metrics}
        \PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{datasets}\PY{n+nn}{.}\PY{n+nn}{samples\PYZus{}generator} \PY{k}{import} \PY{n}{make\PYZus{}blobs}
        \PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{preprocessing} \PY{k}{import} \PY{n}{StandardScaler}
        
        
        \PY{c+c1}{\PYZsh{} \PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}}
        \PY{c+c1}{\PYZsh{} Generate sample data}
        \PY{n}{centers} \PY{o}{=} \PY{p}{[}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{,} \PY{l+m+mi}{1}\PY{p}{]}\PY{p}{,} \PY{p}{[}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{,} \PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{,} \PY{p}{[}\PY{l+m+mi}{1}\PY{p}{,} \PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{]}
        \PY{n}{X}\PY{p}{,} \PY{n}{labels\PYZus{}true} \PY{o}{=} \PY{n}{make\PYZus{}blobs}\PY{p}{(}\PY{n}{n\PYZus{}samples}\PY{o}{=}\PY{l+m+mi}{750}\PY{p}{,} \PY{n}{centers}\PY{o}{=}\PY{n}{centers}\PY{p}{,} \PY{n}{cluster\PYZus{}std}\PY{o}{=}\PY{l+m+mf}{0.4}\PY{p}{,}
                                    \PY{n}{random\PYZus{}state}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{)}
        
        \PY{n}{X} \PY{o}{=} \PY{n}{StandardScaler}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{fit\PYZus{}transform}\PY{p}{(}\PY{n}{X}\PY{p}{)}
        
        \PY{c+c1}{\PYZsh{} \PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}}
        \PY{c+c1}{\PYZsh{} Compute DBSCAN}
        \PY{n}{db} \PY{o}{=} \PY{n}{DBSCAN}\PY{p}{(}\PY{n}{eps}\PY{o}{=}\PY{l+m+mf}{0.3}\PY{p}{,} \PY{n}{min\PYZus{}samples}\PY{o}{=}\PY{l+m+mi}{10}\PY{p}{)}\PY{o}{.}\PY{n}{fit}\PY{p}{(}\PY{n}{X}\PY{p}{)}
        \PY{n}{core\PYZus{}samples\PYZus{}mask} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{zeros\PYZus{}like}\PY{p}{(}\PY{n}{db}\PY{o}{.}\PY{n}{labels\PYZus{}}\PY{p}{,} \PY{n}{dtype}\PY{o}{=}\PY{n+nb}{bool}\PY{p}{)}
        \PY{n}{core\PYZus{}samples\PYZus{}mask}\PY{p}{[}\PY{n}{db}\PY{o}{.}\PY{n}{core\PYZus{}sample\PYZus{}indices\PYZus{}}\PY{p}{]} \PY{o}{=} \PY{k+kc}{True}
        \PY{n}{labels} \PY{o}{=} \PY{n}{db}\PY{o}{.}\PY{n}{labels\PYZus{}}
        
        \PY{c+c1}{\PYZsh{} Number of clusters in labels, ignoring noise if present.}
        \PY{n}{n\PYZus{}clusters\PYZus{}} \PY{o}{=} \PY{n+nb}{len}\PY{p}{(}\PY{n+nb}{set}\PY{p}{(}\PY{n}{labels}\PY{p}{)}\PY{p}{)} \PY{o}{\PYZhy{}} \PY{p}{(}\PY{l+m+mi}{1} \PY{k}{if} \PY{o}{\PYZhy{}}\PY{l+m+mi}{1} \PY{o+ow}{in} \PY{n}{labels} \PY{k}{else} \PY{l+m+mi}{0}\PY{p}{)}
        
        \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Estimated number of clusters: }\PY{l+s+si}{\PYZpc{}d}\PY{l+s+s1}{\PYZsq{}} \PY{o}{\PYZpc{}} \PY{n}{n\PYZus{}clusters\PYZus{}}\PY{p}{)}
        \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Homogeneity: }\PY{l+s+si}{\PYZpc{}0.3f}\PY{l+s+s2}{\PYZdq{}} \PY{o}{\PYZpc{}} \PY{n}{metrics}\PY{o}{.}\PY{n}{homogeneity\PYZus{}score}\PY{p}{(}\PY{n}{labels\PYZus{}true}\PY{p}{,} \PY{n}{labels}\PY{p}{)}\PY{p}{)}
        \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Completeness: }\PY{l+s+si}{\PYZpc{}0.3f}\PY{l+s+s2}{\PYZdq{}} \PY{o}{\PYZpc{}} \PY{n}{metrics}\PY{o}{.}\PY{n}{completeness\PYZus{}score}\PY{p}{(}\PY{n}{labels\PYZus{}true}\PY{p}{,} \PY{n}{labels}\PY{p}{)}\PY{p}{)}
        \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{V\PYZhy{}measure: }\PY{l+s+si}{\PYZpc{}0.3f}\PY{l+s+s2}{\PYZdq{}} \PY{o}{\PYZpc{}} \PY{n}{metrics}\PY{o}{.}\PY{n}{v\PYZus{}measure\PYZus{}score}\PY{p}{(}\PY{n}{labels\PYZus{}true}\PY{p}{,} \PY{n}{labels}\PY{p}{)}\PY{p}{)}
        \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Adjusted Rand Index: }\PY{l+s+si}{\PYZpc{}0.3f}\PY{l+s+s2}{\PYZdq{}}
              \PY{o}{\PYZpc{}} \PY{n}{metrics}\PY{o}{.}\PY{n}{adjusted\PYZus{}rand\PYZus{}score}\PY{p}{(}\PY{n}{labels\PYZus{}true}\PY{p}{,} \PY{n}{labels}\PY{p}{)}\PY{p}{)}
        \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Adjusted Mutual Information: }\PY{l+s+si}{\PYZpc{}0.3f}\PY{l+s+s2}{\PYZdq{}}
              \PY{o}{\PYZpc{}} \PY{n}{metrics}\PY{o}{.}\PY{n}{adjusted\PYZus{}mutual\PYZus{}info\PYZus{}score}\PY{p}{(}\PY{n}{labels\PYZus{}true}\PY{p}{,} \PY{n}{labels}\PY{p}{)}\PY{p}{)}
        \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Silhouette Coefficient: }\PY{l+s+si}{\PYZpc{}0.3f}\PY{l+s+s2}{\PYZdq{}}
              \PY{o}{\PYZpc{}} \PY{n}{metrics}\PY{o}{.}\PY{n}{silhouette\PYZus{}score}\PY{p}{(}\PY{n}{X}\PY{p}{,} \PY{n}{labels}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
Estimated number of clusters: 3
Homogeneity: 0.953
Completeness: 0.883
V-measure: 0.917
Adjusted Rand Index: 0.952
Adjusted Mutual Information: 0.883
Silhouette Coefficient: 0.626

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}111}]:} \PY{k+kn}{import} \PY{n+nn}{seaborn} \PY{k}{as} \PY{n+nn}{sns}
          \PY{n}{corr} \PY{o}{=} \PY{n}{dataframe}\PY{o}{.}\PY{n}{corr}\PY{p}{(}\PY{p}{)}
          \PY{n}{sns}\PY{o}{.}\PY{n}{heatmap}\PY{p}{(}\PY{n}{corr}\PY{p}{,} 
                      \PY{n}{xticklabels}\PY{o}{=}\PY{n}{corr}\PY{o}{.}\PY{n}{columns}\PY{o}{.}\PY{n}{values}\PY{p}{,}
                      \PY{n}{yticklabels}\PY{o}{=}\PY{n}{corr}\PY{o}{.}\PY{n}{columns}\PY{o}{.}\PY{n}{values}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]

        ---------------------------------------------------------------------------

        NameError                                 Traceback (most recent call last)

        <ipython-input-111-ac11438b4246> in <module>()
          1 import seaborn as sns
    ----> 2 corr = dataframe.corr()
          3 sns.heatmap(corr, 
          4             xticklabels=corr.columns.values,
          5             yticklabels=corr.columns.values)


        NameError: name 'dataframe' is not defined

    \end{Verbatim}

    \section{1.2.e Indivisual feature
visualization}\label{e-indivisual-feature-visualization}

\begin{itemize}
\tightlist
\item
  boxplot
\item
  histogram
\item
  jointplot
\end{itemize}

    \section{y value = \% of value}\label{y-value-of-value}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}39}]:} \PY{c+c1}{\PYZsh{}taxi location latitude, longitude distribution}
         \PY{n}{ax1} \PY{o}{=} \PY{n}{sns}\PY{o}{.}\PY{n}{distplot}\PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{pickup\PYZus{}latitude}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,} \PY{n}{bins} \PY{o}{=} \PY{l+m+mi}{100}\PY{p}{,} \PY{n}{kde}\PY{o}{=}\PY{k+kc}{False}\PY{p}{,} \PY{n}{norm\PYZus{}hist}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}\PY{p}{;}
         \PY{n}{plt}\PY{o}{.}\PY{n}{xlabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pickup\PYZus{}latitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
         
         \PY{n}{ax2} \PY{o}{=} \PY{n}{sns}\PY{o}{.}\PY{n}{distplot}\PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{pickup\PYZus{}longitude}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,} \PY{n}{bins} \PY{o}{=} \PY{l+m+mi}{100}\PY{p}{,} \PY{n}{kde}\PY{o}{=}\PY{k+kc}{False}\PY{p}{,} \PY{n}{norm\PYZus{}hist}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}\PY{p}{;}
         \PY{n}{plt}\PY{o}{.}\PY{n}{xlabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pickup\PYZus{}longitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
         
         \PY{n}{ax3} \PY{o}{=} \PY{n}{sns}\PY{o}{.}\PY{n}{distplot}\PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{dropoff\PYZus{}latitude}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,} \PY{n}{bins} \PY{o}{=} \PY{l+m+mi}{100}\PY{p}{,} \PY{n}{kde}\PY{o}{=}\PY{k+kc}{False}\PY{p}{,} \PY{n}{norm\PYZus{}hist}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}\PY{p}{;}
         \PY{n}{plt}\PY{o}{.}\PY{n}{xlabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dropoff\PYZus{}latitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
         
         \PY{n}{ax4} \PY{o}{=} \PY{n}{sns}\PY{o}{.}\PY{n}{distplot}\PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{dropoff\PYZus{}longitude}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,} \PY{n}{bins} \PY{o}{=} \PY{l+m+mi}{100}\PY{p}{,} \PY{n}{kde}\PY{o}{=}\PY{k+kc}{False}\PY{p}{,} \PY{n}{norm\PYZus{}hist}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}\PY{p}{;}
         \PY{n}{plt}\PY{o}{.}\PY{n}{xlabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{dropoff\PYZus{}longitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_109_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_109_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_109_2.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_109_3.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}40}]:} \PY{c+c1}{\PYZsh{}passenger count}
         \PY{n}{ax1} \PY{o}{=} \PY{n}{sns}\PY{o}{.}\PY{n}{distplot}\PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{passenger\PYZus{}count}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,} \PY{n}{bins} \PY{o}{=} \PY{l+m+mi}{100}\PY{p}{,} \PY{n}{kde}\PY{o}{=}\PY{k+kc}{False}\PY{p}{,} \PY{n}{norm\PYZus{}hist}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}\PY{p}{;}
         \PY{n}{plt}\PY{o}{.}\PY{n}{xlabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{passenger\PYZus{}count}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_110_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}41}]:} \PY{c+c1}{\PYZsh{}duration}
         \PY{n}{ax1} \PY{o}{=} \PY{n}{sns}\PY{o}{.}\PY{n}{distplot}\PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{vendor\PYZus{}id}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,} \PY{n}{bins}\PY{o}{=}\PY{l+m+mi}{100}\PY{p}{,} \PY{n}{kde}\PY{o}{=}\PY{k+kc}{False}\PY{p}{,} \PY{n}{norm\PYZus{}hist}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}\PY{p}{;}
         \PY{n}{plt}\PY{o}{.}\PY{n}{xlabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{trip\PYZus{}duration}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_111_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}42}]:} \PY{c+c1}{\PYZsh{}duration}
         \PY{n}{ax1} \PY{o}{=} \PY{n}{sns}\PY{o}{.}\PY{n}{distplot}\PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{trip\PYZus{}duration}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,} \PY{n}{bins}\PY{o}{=}\PY{l+m+mi}{100}\PY{p}{,} \PY{n}{kde}\PY{o}{=}\PY{k+kc}{False}\PY{p}{,} \PY{n}{norm\PYZus{}hist}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}\PY{p}{;}
         \PY{n}{plt}\PY{o}{.}\PY{n}{xlabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{trip\PYZus{}duration}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_112_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}49}]:} \PY{c+c1}{\PYZsh{} \PYZsh{}pick month boxplot}
         \PY{c+c1}{\PYZsh{} ax1 = sns.boxplot(train[\PYZdq{}pick\PYZus{}dayofmonth\PYZdq{}],  train[\PYZdq{}trip\PYZus{}duration\PYZdq{}], palette= \PYZsq{}Set2\PYZsq{})}
         \PY{c+c1}{\PYZsh{} ax2 = sns.swarmplot(train[\PYZdq{}pick\PYZus{}dayofmonth\PYZdq{}],  train[\PYZdq{}trip\PYZus{}duration\PYZdq{}], color=\PYZdq{}0.25\PYZdq{}, alpha=.5)}
         \PY{c+c1}{\PYZsh{} plt.show()}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}50}]:} \PY{c+c1}{\PYZsh{}pick day of week boxplot}
         \PY{n}{ax1} \PY{o}{=} \PY{n}{sns}\PY{o}{.}\PY{n}{boxplot}\PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{pick\PYZus{}dayofweek}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,}  \PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{trip\PYZus{}duration}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,} \PY{n}{palette}\PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Set2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{ax2} \PY{o}{=} \PY{n}{sns}\PY{o}{.}\PY{n}{swarmplot}\PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{pick\PYZus{}dayofweek}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,}  \PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{trip\PYZus{}duration}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,} \PY{n}{color}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{0.25}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{alpha}\PY{o}{=}\PY{o}{.}\PY{l+m+mi}{5}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
         \PY{n}{ax3} \PY{o}{=} \PY{n}{sns}\PY{o}{.}\PY{n}{jointplot}\PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pick\PYZus{}dayofweek}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{train}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{trip\PYZus{}duration}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{kind} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{reg}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
/home/jk/enter/lib/python3.6/site-packages/seaborn/categorical.py:462: FutureWarning: remove\_na is deprecated and is a private function. Do not use.
  box\_data = remove\_na(group\_data)

    \end{Verbatim}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_114_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}51}]:} \PY{c+c1}{\PYZsh{}pick hours boxplot}
         \PY{n}{fig} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{15}\PY{p}{,}\PY{l+m+mi}{5}\PY{p}{)}\PY{p}{)}
         \PY{n}{ax1} \PY{o}{=} \PY{n}{sns}\PY{o}{.}\PY{n}{boxplot}\PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{pick\PYZus{}datehour}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,}  \PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{trip\PYZus{}duration}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,} \PY{n}{palette}\PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Set2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{ax2} \PY{o}{=} \PY{n}{sns}\PY{o}{.}\PY{n}{swarmplot}\PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{pick\PYZus{}datehour}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,}  \PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{trip\PYZus{}duration}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,}  \PY{n}{color}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{0.25}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{alpha}\PY{o}{=}\PY{o}{.}\PY{l+m+mi}{5}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
         \PY{n}{ax3} \PY{o}{=} \PY{n}{sns}\PY{o}{.}\PY{n}{jointplot}\PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pick\PYZus{}datehour}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{train}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{trip\PYZus{}duration}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{kind} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{reg}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
/home/jk/enter/lib/python3.6/site-packages/seaborn/categorical.py:462: FutureWarning: remove\_na is deprecated and is a private function. Do not use.
  box\_data = remove\_na(group\_data)

    \end{Verbatim}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_115_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}52}]:} \PY{c+c1}{\PYZsh{}pick month boxplot}
         \PY{n}{ax1} \PY{o}{=} \PY{n}{sns}\PY{o}{.}\PY{n}{boxplot}\PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{pick\PYZus{}dayofmonth}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,}  \PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{trip\PYZus{}duration}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,} \PY{n}{palette}\PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Set2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{ax2} \PY{o}{=} \PY{n}{sns}\PY{o}{.}\PY{n}{swarmplot}\PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{pick\PYZus{}dayofmonth}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,}  \PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{trip\PYZus{}duration}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,}  \PY{n}{color}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{0.25}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{alpha}\PY{o}{=}\PY{o}{.}\PY{l+m+mi}{5}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
         \PY{n}{ax3} \PY{o}{=} \PY{n}{sns}\PY{o}{.}\PY{n}{jointplot}\PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pick\PYZus{}dayofmonth}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{train}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{trip\PYZus{}duration}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{kind} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{reg}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
/home/jk/enter/lib/python3.6/site-packages/seaborn/categorical.py:462: FutureWarning: remove\_na is deprecated and is a private function. Do not use.
  box\_data = remove\_na(group\_data)

    \end{Verbatim}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_116_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}53}]:} \PY{c+c1}{\PYZsh{}pick passenger count boxplot}
         \PY{n}{ax1} \PY{o}{=} \PY{n}{sns}\PY{o}{.}\PY{n}{boxplot}\PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{passenger\PYZus{}count}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,}  \PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{trip\PYZus{}duration}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,} \PY{n}{palette}\PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Set2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{ax2} \PY{o}{=} \PY{n}{sns}\PY{o}{.}\PY{n}{swarmplot}\PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{passenger\PYZus{}count}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,}  \PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{trip\PYZus{}duration}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,}  \PY{n}{color}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{0.25}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{alpha}\PY{o}{=}\PY{o}{.}\PY{l+m+mi}{5}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
         
         \PY{n}{ax3} \PY{o}{=} \PY{n}{sns}\PY{o}{.}\PY{n}{jointplot}\PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{passenger\PYZus{}count}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{train}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{trip\PYZus{}duration}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{kind} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{reg}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
/home/jk/enter/lib/python3.6/site-packages/seaborn/categorical.py:462: FutureWarning: remove\_na is deprecated and is a private function. Do not use.
  box\_data = remove\_na(group\_data)

    \end{Verbatim}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_117_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}58}]:} \PY{c+c1}{\PYZsh{}pick vendor id boxplot}
         \PY{n}{ax1} \PY{o}{=} \PY{n}{sns}\PY{o}{.}\PY{n}{boxplot}\PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{vendor\PYZus{}id}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,}  \PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{trip\PYZus{}duration}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,} \PY{n}{palette}\PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Set2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{ax2} \PY{o}{=} \PY{n}{sns}\PY{o}{.}\PY{n}{swarmplot}\PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{vendor\PYZus{}id}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,}  \PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{trip\PYZus{}duration}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,} \PY{n}{color}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{0.25}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{alpha}\PY{o}{=}\PY{o}{.}\PY{l+m+mi}{5}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
         
         \PY{n}{ax3} \PY{o}{=} \PY{n}{sns}\PY{o}{.}\PY{n}{jointplot}\PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{vendor\PYZus{}id}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{train}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{trip\PYZus{}duration}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{kind} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{reg}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
/home/jk/enter/lib/python3.6/site-packages/seaborn/categorical.py:462: FutureWarning: remove\_na is deprecated and is a private function. Do not use.
  box\_data = remove\_na(group\_data)

    \end{Verbatim}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_118_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_118_2.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}74}]:} \PY{c+c1}{\PYZsh{}pick vendor id boxplot}
         \PY{n}{ax1} \PY{o}{=} \PY{n}{sns}\PY{o}{.}\PY{n}{boxplot}\PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{store\PYZus{}and\PYZus{}fwd\PYZus{}flag}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,}  \PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{trip\PYZus{}duration}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,} \PY{n}{palette}\PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Set2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{ax2} \PY{o}{=} \PY{n}{sns}\PY{o}{.}\PY{n}{swarmplot}\PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{store\PYZus{}and\PYZus{}fwd\PYZus{}flag}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,}  \PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{trip\PYZus{}duration}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,} \PY{n}{color}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{0.25}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{alpha}\PY{o}{=}\PY{o}{.}\PY{l+m+mi}{5}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
         
         \PY{n}{ax3} \PY{o}{=} \PY{n}{sns}\PY{o}{.}\PY{n}{jointplot}\PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{store\PYZus{}and\PYZus{}fwd\PYZus{}flag}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{train}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{trip\PYZus{}duration}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{kind} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{reg}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
/home/jk/enter/lib/python3.6/site-packages/seaborn/categorical.py:462: FutureWarning: remove\_na is deprecated and is a private function. Do not use.
  box\_data = remove\_na(group\_data)

    \end{Verbatim}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_119_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_119_2.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}59}]:}  \PY{c+c1}{\PYZsh{}\PYZsh{} distance와 trip\PYZus{}duration의 jointplot}
         \PY{n}{ax1} \PY{o}{=} \PY{n}{sns}\PY{o}{.}\PY{n}{boxplot}\PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{distance}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,}  \PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{trip\PYZus{}duration}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,} \PY{n}{palette}\PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Set2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{ax2} \PY{o}{=} \PY{n}{sns}\PY{o}{.}\PY{n}{swarmplot}\PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{distance}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,}  \PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{trip\PYZus{}duration}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,} \PY{n}{color}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{0.25}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{alpha}\PY{o}{=}\PY{o}{.}\PY{l+m+mi}{5}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
             
         \PY{n}{ax1} \PY{o}{=} \PY{n}{sns}\PY{o}{.}\PY{n}{jointplot}\PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{distance}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{train}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{trip\PYZus{}duration}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{kind} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{reg}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
/home/jk/enter/lib/python3.6/site-packages/seaborn/categorical.py:462: FutureWarning: remove\_na is deprecated and is a private function. Do not use.
  box\_data = remove\_na(group\_data)

    \end{Verbatim}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_120_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_120_2.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \section{1.2.f Map Visualization}\label{f-map-visualization}

\begin{itemize}
\tightlist
\item
  locate data onto NYC map (pickup location)
\end{itemize}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}57}]:} \PY{c+c1}{\PYZsh{} interactive map visualization}
         \PY{c+c1}{\PYZsh{} pick location and count data on the map}
         \PY{c+c1}{\PYZsh{}center location}
         \PY{n}{center}\PY{o}{=}\PY{p}{[}\PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pickup\PYZus{}latitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{,} \PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{n}{train}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pickup\PYZus{}longitude}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{]}
         
         \PY{n}{m} \PY{o}{=} \PY{n}{folium}\PY{o}{.}\PY{n}{Map}\PY{p}{(}\PY{n}{location} \PY{o}{=} \PY{n}{center}\PY{p}{,} \PY{n}{zoom\PYZus{}start}\PY{o}{=}\PY{l+m+mi}{10}\PY{p}{,} \PY{n}{tiles} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{stamentoner}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         
         \PY{n}{marker\PYZus{}cluster} \PY{o}{=} \PY{n}{MarkerCluster}\PY{p}{(}
             \PY{n}{name}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{1000 clustered icons}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
             \PY{n}{overlay}\PY{o}{=}\PY{k+kc}{True}\PY{p}{,}
             \PY{n}{control}\PY{o}{=}\PY{k+kc}{False}\PY{p}{,}
             \PY{n}{icon\PYZus{}create\PYZus{}function}\PY{o}{=}\PY{k+kc}{None}
         \PY{p}{)}
         
         \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{train}\PY{p}{)}\PY{p}{)}\PY{p}{:}
             \PY{n}{location1}\PY{o}{=}\PY{p}{[}\PY{n}{train}\PY{o}{.}\PY{n}{iloc}\PY{p}{[}\PY{n}{i}\PY{p}{,} \PY{l+m+mi}{5}\PY{p}{]}\PY{p}{,} \PY{n}{train}\PY{o}{.}\PY{n}{iloc}\PY{p}{[}\PY{n}{i}\PY{p}{,} \PY{l+m+mi}{4}\PY{p}{]}\PY{p}{]}
             \PY{n}{folium}\PY{o}{.}\PY{n}{CircleMarker}\PY{p}{(}
                 \PY{n}{location}\PY{o}{=}\PY{n}{location1}\PY{p}{,}
                 \PY{n}{radius}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{,}
                 \PY{n}{color} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{blue}\PY{l+s+s2}{\PYZdq{}}
               \PY{p}{)}\PY{o}{.}\PY{n}{add\PYZus{}to}\PY{p}{(}\PY{n}{m}\PY{p}{)}
             \PY{n}{marker} \PY{o}{=} \PY{n}{folium}\PY{o}{.}\PY{n}{Marker}\PY{p}{(}\PY{n}{location}\PY{o}{=}\PY{n}{location1}\PY{p}{)}
             \PY{n}{marker\PYZus{}cluster}\PY{o}{.}\PY{n}{add\PYZus{}child}\PY{p}{(}\PY{n}{marker}\PY{p}{)}
             \PY{n}{marker\PYZus{}cluster}\PY{o}{.}\PY{n}{add\PYZus{}to}\PY{p}{(}\PY{n}{m}\PY{p}{)}
             
         \PY{n}{m}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}57}]:} <folium.folium.Map at 0x7f8f161032b0>
\end{Verbatim}
            
    \section{1.3 EDA Interpretation \&
conclusion}\label{eda-interpretation-conclusion}

    \section{2. Feature Selection}\label{feature-selection}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}107}]:} \PY{n}{train}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}107}]:}                 id  vendor\_id     pickup\_datetime  passenger\_count  \textbackslash{}
          100879   id0673821          2 2016-03-19 20:53:44                2   
          203245   id3465534          2 2016-04-25 14:31:34                2   
          1133010  id1354600          1 2016-05-04 16:35:10                1   
          1102498  id0962434          1 2016-01-14 04:30:56                1   
          557489   id1750356          2 2016-06-07 08:09:01                6   
          
                   pickup\_longitude  pickup\_latitude  dropoff\_longitude  \textbackslash{}
          100879         -73.990944        40.732998         -73.944931   
          203245         -73.982185        40.752148         -73.988281   
          1133010        -73.969307        40.760986         -73.978966   
          1102498        -73.981865        40.758327         -73.991219   
          557489         -73.959686        40.808899         -73.975456   
          
                   dropoff\_latitude  store\_and\_fwd\_flag  trip\_duration  pick\_dayofweek  \textbackslash{}
          100879          40.774727                   0           1467               5   
          203245          40.742992                   0            331               0   
          1133010         40.747524                   0            357               2   
          1102498         40.750141                   0            221               3   
          557489          40.764610                   0           1838               1   
          
                   pick\_dayofmonth  pick\_datehour  distance  pickup\_pca0  pickup\_pca1  \textbackslash{}
          100879                 3             20  6.045803    -0.023544     0.002960   
          203245                 4             14  1.140205    -0.002798    -0.000652   
          1133010                5             16  1.703721     0.011776     0.004966   
          1102498                1              4  1.203892     0.002479    -0.003884   
          557489                 6              8  5.100504     0.056727    -0.014207   
          
                   dropoff\_pca0  dropoff\_pca1  pickup\_cluster  dropoff\_cluster  
          100879       0.036897      0.017293              32               17  
          203245      -0.013796     -0.000499              94               86  
          1133010     -0.004789      0.004618               3               88  
          1102498     -0.009563     -0.006966              30               31  
          557489       0.011285     -0.002154              73               93  
\end{Verbatim}
            
    \section{3. Modeling}\label{modeling}

    \subsubsection{data type manipulation}\label{data-type-manipulation}

\begin{itemize}
\tightlist
\item
  categorical data convert encoding
\end{itemize}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}38}]:} \PY{c+c1}{\PYZsh{} train[\PYZsq{}store\PYZus{}and\PYZus{}fwd\PYZus{}flag\PYZsq{}] = 1 * (train.store\PYZus{}and\PYZus{}fwd\PYZus{}flag.values == \PYZsq{}Y\PYZsq{})}
         \PY{c+c1}{\PYZsh{} test[\PYZsq{}store\PYZus{}and\PYZus{}fwd\PYZus{}flag\PYZsq{}] = 1 * (test.store\PYZus{}and\PYZus{}fwd\PYZus{}flag.values == \PYZsq{}Y\PYZsq{})}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}56}]:} \PY{c+c1}{\PYZsh{} train = pd.get\PYZus{}dummies(train, columns=[\PYZdq{}store\PYZus{}and\PYZus{}fwd\PYZus{}flag\PYZdq{}], prefix=\PYZsq{}store\PYZus{}and\PYZus{}fwd\PYZus{}flag\PYZsq{})}
         \PY{c+c1}{\PYZsh{} test = pd.get\PYZus{}dummies(test, columns=[\PYZdq{}store\PYZus{}and\PYZus{}fwd\PYZus{}flag\PYZdq{}], prefix=\PYZsq{}store\PYZus{}and\PYZus{}fwd\PYZus{}flag\PYZsq{})}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}41}]:} \PY{n}{train}\PY{o}{.}\PY{n}{info}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
<class 'pandas.core.frame.DataFrame'>
Int64Index: 1236151 entries, 0 to 1458643
Data columns (total 15 columns):
id                    1236151 non-null object
vendor\_id             1236151 non-null int64
pickup\_datetime       1236151 non-null datetime64[ns]
passenger\_count       1236151 non-null int64
pickup\_longitude      1236151 non-null float64
pickup\_latitude       1236151 non-null float64
dropoff\_longitude     1236151 non-null float64
dropoff\_latitude      1236151 non-null float64
store\_and\_fwd\_flag    1236151 non-null object
trip\_duration         1236151 non-null int64
trip\_sec              1236151 non-null int64
pick\_dayofweek        1236151 non-null int64
pick\_dayofmonth       1236151 non-null int64
pick\_datehour         1236151 non-null int64
distance              1236151 non-null float64
dtypes: datetime64[ns](1), float64(5), int64(7), object(2)
memory usage: 150.9+ MB

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}42}]:} \PY{n}{test}\PY{o}{.}\PY{n}{info}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
<class 'pandas.core.frame.DataFrame'>
RangeIndex: 625134 entries, 0 to 625133
Data columns (total 13 columns):
id                    625134 non-null object
vendor\_id             625134 non-null int64
pickup\_datetime       625134 non-null datetime64[ns]
passenger\_count       625134 non-null int64
pickup\_longitude      625134 non-null float64
pickup\_latitude       625134 non-null float64
dropoff\_longitude     625134 non-null float64
dropoff\_latitude      625134 non-null float64
store\_and\_fwd\_flag    625134 non-null object
pick\_dayofweek        625134 non-null int64
pick\_dayofmonth       625134 non-null int64
pick\_datehour         625134 non-null int64
distance              625134 non-null float64
dtypes: datetime64[ns](1), float64(5), int64(5), object(2)
memory usage: 62.0+ MB

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}44}]:} \PY{n}{X\PYZus{}train} \PY{o}{=} \PY{n}{train}\PY{o}{.}\PY{n}{drop}\PY{p}{(}\PY{n}{labels} \PY{o}{=} \PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{id}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{trip\PYZus{}duration}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{pickup\PYZus{}datetime}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{store\PYZus{}and\PYZus{}fwd\PYZus{}flag}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{trip\PYZus{}sec}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}
         \PY{n}{Y\PYZus{}train} \PY{o}{=} \PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{trip\PYZus{}duration}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}
         \PY{n}{X\PYZus{}test}  \PY{o}{=} \PY{n}{test}\PY{o}{.}\PY{n}{drop}\PY{p}{(}\PY{n}{labels} \PY{o}{=} \PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{id}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{pickup\PYZus{}datetime}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{store\PYZus{}and\PYZus{}fwd\PYZus{}flag}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}\PY{o}{.}\PY{n}{copy}\PY{p}{(}\PY{p}{)}
         \PY{n}{X\PYZus{}train}\PY{o}{.}\PY{n}{shape}\PY{p}{,} \PY{n}{Y\PYZus{}train}\PY{o}{.}\PY{n}{shape}\PY{p}{,} \PY{n}{X\PYZus{}test}\PY{o}{.}\PY{n}{shape}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}44}]:} ((1236151, 10), (1236151,), (625134, 10))
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}45}]:} \PY{c+c1}{\PYZsh{} X\PYZus{}test1  = test1.drop(labels = [\PYZdq{}id\PYZdq{}, \PYZdq{}pickup\PYZus{}datetime\PYZdq{}, ], axis=1).copy()}
         \PY{c+c1}{\PYZsh{} X\PYZus{}test1.shape}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}37}]:} \PY{c+c1}{\PYZsh{} from sklearn.model\PYZus{}selection import KFold \PYZsh{} import KFold}
         \PY{c+c1}{\PYZsh{} X = np.array([[1, 2], [3, 4], [1, 2], [3, 4]]) \PYZsh{} create an array}
         \PY{c+c1}{\PYZsh{} y = np.array([1, 2, 3, 4]) \PYZsh{} Create another array}
         \PY{c+c1}{\PYZsh{} kf = KFold(n\PYZus{}splits=2) \PYZsh{} Define the split \PYZhy{} into 2 folds }
         \PY{c+c1}{\PYZsh{} kf.get\PYZus{}n\PYZus{}splits(X) \PYZsh{} returns the number of splitting iterations in the cross\PYZhy{}validator}
         \PY{c+c1}{\PYZsh{} print(kf) }
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}38}]:} \PY{c+c1}{\PYZsh{} import pandas as pd}
         \PY{c+c1}{\PYZsh{} import numpy as np}
         \PY{c+c1}{\PYZsh{} import matplotlib.pyplot as plt}
         \PY{c+c1}{\PYZsh{} import seaborn as sns}
         \PY{c+c1}{\PYZsh{} \PYZpc{}matplotlib inline}
         
         \PY{c+c1}{\PYZsh{} from collections import Counter}
         
         \PY{c+c1}{\PYZsh{} from sklearn.ensemble import RandomForestClassifier, AdaBoostClassifier, GradientBoostingClassifier, ExtraTreesClassifier, VotingClassifier}
         \PY{c+c1}{\PYZsh{} from sklearn.discriminant\PYZus{}analysis import LinearDiscriminantAnalysis}
         \PY{c+c1}{\PYZsh{} from sklearn.linear\PYZus{}model import LogisticRegression}
         \PY{c+c1}{\PYZsh{} from sklearn.neighbors import KNeighborsClassifier}
         \PY{c+c1}{\PYZsh{} from sklearn.tree import DecisionTreeClassifier}
         \PY{c+c1}{\PYZsh{} from sklearn.neural\PYZus{}network import MLPClassifier}
         \PY{c+c1}{\PYZsh{} from sklearn.svm import SVC}
         \PY{c+c1}{\PYZsh{} from sklearn.model\PYZus{}selection import GridSearchCV, cross\PYZus{}val\PYZus{}score, StratifiedKFold, learning\PYZus{}curve}
         
         \PY{c+c1}{\PYZsh{} sns.set(style=\PYZsq{}white\PYZsq{}, context=\PYZsq{}notebook\PYZsq{}, palette=\PYZsq{}deep\PYZsq{})}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}39}]:} \PY{c+c1}{\PYZsh{} cross\PYZus{}val\PYZus{}score(estimator= lasso, X= X\PYZus{}train, y = Y\PYZus{}train, scoring = \PYZdq{}accuracy\PYZdq{}, cv = \PYZdq{}kFold\PYZdq{}, n\PYZus{}jobs=4)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}40}]:} \PY{c+c1}{\PYZsh{} for train\PYZus{}index, test\PYZus{}index in kf.split(X):}
         \PY{c+c1}{\PYZsh{}  print(\PYZsq{}TRAIN:\PYZsq{}, train\PYZus{}index, \PYZsq{}TEST:\PYZsq{}, test\PYZus{}index)}
         \PY{c+c1}{\PYZsh{}  X\PYZus{}train, X\PYZus{}test = X[train\PYZus{}index], X[test\PYZus{}index]}
         \PY{c+c1}{\PYZsh{}  y\PYZus{}train, y\PYZus{}test = y[train\PYZus{}index], y[test\PYZus{}index]}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}46}]:} \PY{k+kn}{import} \PY{n+nn}{statsmodels}\PY{n+nn}{.}\PY{n+nn}{api} \PY{k}{as} \PY{n+nn}{sm}
         \PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{datasets} \PY{k}{import} \PY{n}{make\PYZus{}blobs}
         
         \PY{n}{OLS\PYZus{}model} \PY{o}{=} \PY{n}{sm}\PY{o}{.}\PY{n}{OLS}\PY{p}{(}\PY{n}{Y\PYZus{}train}\PY{p}{,} \PY{n}{X\PYZus{}train}\PY{p}{)}\PY{o}{.}\PY{n}{fit}\PY{p}{(}\PY{p}{)}
         \PY{n+nb}{print}\PY{p}{(}\PY{n}{OLS\PYZus{}model}\PY{o}{.}\PY{n}{summary}\PY{p}{(}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
                            OLS Regression Results                            
==============================================================================
Dep. Variable:          trip\_duration   R-squared:                       0.865
Model:                            OLS   Adj. R-squared:                  0.865
Method:                 Least Squares   F-statistic:                 7.929e+05
Date:                Tue, 06 Mar 2018   Prob (F-statistic):               0.00
Time:                        19:01:05   Log-Likelihood:            -8.7525e+06
No. Observations:             1236151   AIC:                         1.750e+07
Df Residuals:                 1236141   BIC:                         1.751e+07
Df Model:                          10                                         
Covariance Type:            nonrobust                                         
=====================================================================================
                        coef    std err          t      P>|t|      [0.025      0.975]
-------------------------------------------------------------------------------------
vendor\_id            -0.8065      0.542     -1.488      0.137      -1.869       0.256
passenger\_count       2.6996      0.206     13.099      0.000       2.296       3.104
pickup\_longitude     62.3952     17.922      3.482      0.000      27.269      97.522
pickup\_latitude     429.9204     16.485     26.080      0.000     397.611     462.230
dropoff\_longitude  -574.5808     18.058    -31.819      0.000    -609.973    -539.188
dropoff\_latitude  -1354.4420     15.530    -87.214      0.000   -1384.880   -1324.004
pick\_dayofweek      -11.6721      0.134    -87.409      0.000     -11.934     -11.410
pick\_dayofmonth      10.1896      0.154     66.161      0.000       9.888      10.491
pick\_datehour         3.2785      0.041     79.082      0.000       3.197       3.360
distance            182.7861      0.174   1049.024      0.000     182.445     183.128
==============================================================================
Omnibus:                   237565.240   Durbin-Watson:                   2.000
Prob(Omnibus):                  0.000   Jarque-Bera (JB):           516481.630
Skew:                           1.121   Prob(JB):                         0.00
Kurtosis:                       5.235   Cond. No.                     1.36e+04
==============================================================================

Warnings:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.
[2] The condition number is large, 1.36e+04. This might indicate that there are
strong multicollinearity or other numerical problems.

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}73}]:} \PY{n}{OLS\PYZus{}model}\PY{o}{.}\PY{n}{params}\PY{p}{,} \PY{n}{OLS\PYZus{}model}\PY{o}{.}\PY{n}{tvalues}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}73}]:} (vendor\_id              -0.806520
          passenger\_count         2.699621
          pickup\_longitude       62.395189
          pickup\_latitude       429.920354
          dropoff\_longitude    -574.580837
          dropoff\_latitude    -1354.442022
          pick\_dayofweek        -11.672138
          pick\_dayofmonth        10.189583
          pick\_datehour           3.278461
          distance              182.786077
          dtype: float64, vendor\_id              -1.488145
          passenger\_count        13.099377
          pickup\_longitude        3.481502
          pickup\_latitude        26.079999
          dropoff\_longitude     -31.819021
          dropoff\_latitude      -87.214235
          pick\_dayofweek        -87.409445
          pick\_dayofmonth        66.161386
          pick\_datehour          79.082294
          distance             1049.024160
          dtype: float64)
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}53}]:} \PY{n}{Y\PYZus{}test\PYZus{}OLS} \PY{o}{=} \PY{n}{OLS\PYZus{}model}\PY{o}{.}\PY{n}{predict}\PY{p}{(}\PY{n}{X\PYZus{}test}\PY{p}{)}
         \PY{n}{Y\PYZus{}test\PYZus{}OLS}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{,} \PY{n+nb}{len}\PY{p}{(}\PY{n}{Y\PYZus{}test\PYZus{}OLS}\PY{p}{)}
         
         \PY{n}{sub} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{p}{(}\PY{p}{)}
         \PY{n}{sub}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Id}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{test}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{id}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}
         \PY{n}{sub}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{trip\PYZus{}duration}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{Y\PYZus{}test\PYZus{}OLS}
         \PY{n}{sub}\PY{o}{.}\PY{n}{to\PYZus{}csv}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{submission\PYZus{}OLS.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{index}\PY{o}{=}\PY{k+kc}{False}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}58}]:} \PY{c+c1}{\PYZsh{}score(RMSLE) = 0.54618 (850/1257) 67\PYZpc{}}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}61}]:} \PY{n}{X\PYZus{}train\PYZus{}vendor} \PY{o}{=} \PY{n}{train}\PY{o}{.}\PY{n}{drop}\PY{p}{(}\PY{n}{labels} \PY{o}{=} \PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{id}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{vendor\PYZus{}id}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{trip\PYZus{}duration}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{pickup\PYZus{}datetime}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{store\PYZus{}and\PYZus{}fwd\PYZus{}flag}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{trip\PYZus{}sec}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}
         \PY{n}{Y\PYZus{}train\PYZus{}vendor} \PY{o}{=} \PY{n}{train}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{trip\PYZus{}duration}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}
         \PY{n}{X\PYZus{}test\PYZus{}vendor}  \PY{o}{=} \PY{n}{test}\PY{o}{.}\PY{n}{drop}\PY{p}{(}\PY{n}{labels} \PY{o}{=} \PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{id}\PY{l+s+s2}{\PYZdq{}} \PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{vendor\PYZus{}id}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{pickup\PYZus{}datetime}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{store\PYZus{}and\PYZus{}fwd\PYZus{}flag}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}\PY{o}{.}\PY{n}{copy}\PY{p}{(}\PY{p}{)}
         \PY{n}{X\PYZus{}train}\PY{o}{.}\PY{n}{shape}\PY{p}{,} \PY{n}{Y\PYZus{}train}\PY{o}{.}\PY{n}{shape}\PY{p}{,} \PY{n}{X\PYZus{}test}\PY{o}{.}\PY{n}{shape}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}61}]:} ((1236151, 10), (1236151,), (625134, 10))
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}63}]:} \PY{n}{OLS\PYZus{}model\PYZus{}vendor} \PY{o}{=} \PY{n}{sm}\PY{o}{.}\PY{n}{OLS}\PY{p}{(}\PY{n}{Y\PYZus{}train\PYZus{}vendor}\PY{p}{,} \PY{n}{X\PYZus{}train\PYZus{}vendor}\PY{p}{)}\PY{o}{.}\PY{n}{fit}\PY{p}{(}\PY{p}{)}
         \PY{n+nb}{print}\PY{p}{(}\PY{n}{OLS\PYZus{}model\PYZus{}vendor}\PY{o}{.}\PY{n}{summary}\PY{p}{(}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
                            OLS Regression Results                            
==============================================================================
Dep. Variable:          trip\_duration   R-squared:                       0.865
Model:                            OLS   Adj. R-squared:                  0.865
Method:                 Least Squares   F-statistic:                 8.810e+05
Date:                Tue, 06 Mar 2018   Prob (F-statistic):               0.00
Time:                        19:14:20   Log-Likelihood:            -8.7525e+06
No. Observations:             1236151   AIC:                         1.750e+07
Df Residuals:                 1236142   BIC:                         1.751e+07
Df Model:                           9                                         
Covariance Type:            nonrobust                                         
=====================================================================================
                        coef    std err          t      P>|t|      [0.025      0.975]
-------------------------------------------------------------------------------------
passenger\_count       2.6103      0.197     13.240      0.000       2.224       2.997
pickup\_longitude     62.2766     17.922      3.475      0.001      27.151      97.403
pickup\_latitude     429.8081     16.485     26.073      0.000     397.499     462.117
dropoff\_longitude  -574.5415     18.058    -31.817      0.000    -609.934    -539.149
dropoff\_latitude  -1354.5004     15.530    -87.218      0.000   -1384.939   -1324.062
pick\_dayofweek      -11.6711      0.134    -87.403      0.000     -11.933     -11.409
pick\_dayofmonth      10.1910      0.154     66.172      0.000       9.889      10.493
pick\_datehour         3.2781      0.041     79.074      0.000       3.197       3.359
distance            182.7860      0.174   1049.023      0.000     182.444     183.128
==============================================================================
Omnibus:                   237562.047   Durbin-Watson:                   2.000
Prob(Omnibus):                  0.000   Jarque-Bera (JB):           516468.536
Skew:                           1.121   Prob(JB):                         0.00
Kurtosis:                       5.235   Cond. No.                     1.36e+04
==============================================================================

Warnings:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.
[2] The condition number is large, 1.36e+04. This might indicate that there are
strong multicollinearity or other numerical problems.

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}64}]:} \PY{n}{Y\PYZus{}test\PYZus{}OLS\PYZus{}vendor} \PY{o}{=} \PY{n}{OLS\PYZus{}model\PYZus{}vendor}\PY{o}{.}\PY{n}{predict}\PY{p}{(}\PY{n}{X\PYZus{}test\PYZus{}vendor}\PY{p}{)}
         \PY{n}{Y\PYZus{}test\PYZus{}OLS\PYZus{}vendor}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{,} \PY{n+nb}{len}\PY{p}{(}\PY{n}{Y\PYZus{}test\PYZus{}OLS\PYZus{}vendor}\PY{p}{)}
         
         \PY{n}{sub} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{p}{(}\PY{p}{)}
         \PY{n}{sub}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Id}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{test}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{id}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}
         \PY{n}{sub}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{trip\PYZus{}duration}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{Y\PYZus{}test\PYZus{}OLS\PYZus{}vendor}
         \PY{n}{sub}\PY{o}{.}\PY{n}{to\PYZus{}csv}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{submission\PYZus{}OLS\PYZus{}vendor.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{index}\PY{o}{=}\PY{k+kc}{False}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}65}]:} \PY{c+c1}{\PYZsh{}score = 0.54616, 850/1257}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}54}]:} \PY{n}{Index1} \PY{o}{=} \PY{n}{X\PYZus{}train}\PY{o}{.}\PY{n}{columns}
         \PY{n+nb}{print}\PY{p}{(}\PY{n}{Index1}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
Index(['vendor\_id', 'passenger\_count', 'pickup\_longitude', 'pickup\_latitude',
       'dropoff\_longitude', 'dropoff\_latitude', 'pick\_dayofweek',
       'pick\_dayofmonth', 'pick\_datehour', 'distance'],
      dtype='object')

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}66}]:} \PY{n}{model2} \PY{o}{=} \PY{n}{sm}\PY{o}{.}\PY{n}{OLS}\PY{o}{.}\PY{n}{from\PYZus{}formula}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{trip\PYZus{}duration \PYZti{} distance}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{data}\PY{o}{=}\PY{n}{train}\PY{p}{)}\PY{o}{.}\PY{n}{fit}\PY{p}{(}\PY{p}{)}
         \PY{n+nb}{print}\PY{p}{(}\PY{n}{model2}\PY{o}{.}\PY{n}{summary}\PY{p}{(}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
                            OLS Regression Results                            
==============================================================================
Dep. Variable:          trip\_duration   R-squared:                       0.470
Model:                            OLS   Adj. R-squared:                  0.470
Method:                 Least Squares   F-statistic:                 1.097e+06
Date:                Tue, 06 Mar 2018   Prob (F-statistic):               0.00
Time:                        19:19:01   Log-Likelihood:            -8.7702e+06
No. Observations:             1236151   AIC:                         1.754e+07
Df Residuals:                 1236149   BIC:                         1.754e+07
Df Model:                           1                                         
Covariance Type:            nonrobust                                         
==============================================================================
                 coef    std err          t      P>|t|      [0.025      0.975]
------------------------------------------------------------------------------
Intercept    262.0415      0.472    555.330      0.000     261.117     262.966
distance     182.7532      0.175   1047.179      0.000     182.411     183.095
==============================================================================
Omnibus:                   230190.121   Durbin-Watson:                   2.000
Prob(Omnibus):                  0.000   Jarque-Bera (JB):           484026.846
Skew:                           1.103   Prob(JB):                         0.00
Kurtosis:                       5.128   Cond. No.                         5.34
==============================================================================

Warnings:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}67}]:} \PY{n}{Y\PYZus{}model2} \PY{o}{=} \PY{n}{model2}\PY{o}{.}\PY{n}{predict}\PY{p}{(}\PY{n}{test}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{distance}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
         \PY{n}{Y\PYZus{}model2}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{,} \PY{n+nb}{len}\PY{p}{(}\PY{n}{Y\PYZus{}model2}\PY{p}{)}
         
         \PY{n}{sub} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{p}{(}\PY{p}{)}
         \PY{n}{sub}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Id}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{test}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{id}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}
         \PY{n}{sub}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{trip\PYZus{}duration}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{Y\PYZus{}model2}
         \PY{n}{sub}\PY{o}{.}\PY{n}{to\PYZus{}csv}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{submission\PYZus{}model2.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{index}\PY{o}{=}\PY{k+kc}{False}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}68}]:} \PY{c+c1}{\PYZsh{}score = 0.55410, 867/1256}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}72}]:} \PY{n}{model2\PYZus{}2} \PY{o}{=} \PY{n}{sm}\PY{o}{.}\PY{n}{OLS}\PY{o}{.}\PY{n}{from\PYZus{}formula}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{trip\PYZus{}duration \PYZti{} C(vendor\PYZus{}id) + passenger\PYZus{}count + pickup\PYZus{}longitude + pickup\PYZus{}latitude + dropoff\PYZus{}longitude + dropoff\PYZus{}latitude + C(store\PYZus{}and\PYZus{}fwd\PYZus{}flag) + C(pick\PYZus{}dayofweek) + C(pick\PYZus{}dayofmonth) + C(pick\PYZus{}datehour) + distance + pickup\PYZus{}pca0 + pickup\PYZus{}pca1 + dropoff\PYZus{}pca0 + dropoff\PYZus{}pca1 + C(pickup\PYZus{}cluster) + C(dropoff\PYZus{}cluster) + 0}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{data}\PY{o}{=}\PY{n}{train}\PY{p}{)}\PY{o}{.}\PY{n}{fit}\PY{p}{(}\PY{p}{)}
         \PY{n+nb}{print}\PY{p}{(}\PY{n}{model2\PYZus{}2}\PY{o}{.}\PY{n}{summary}\PY{p}{(}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
                            OLS Regression Results                            
==============================================================================
Dep. Variable:          trip\_duration   R-squared:                       0.671
Model:                            OLS   Adj. R-squared:                  0.596
Method:                 Least Squares   F-statistic:                     8.901
Date:                Mon, 05 Mar 2018   Prob (F-statistic):          6.14e-136
Time:                        19:58:46   Log-Likelihood:                -8423.8
No. Observations:                1234   AIC:                         1.731e+04
Df Residuals:                    1003   BIC:                         1.849e+04
Df Model:                         230                                         
Covariance Type:            nonrobust                                         
==============================================================================================
                                 coef    std err          t      P>|t|      [0.025      0.975]
----------------------------------------------------------------------------------------------
C(vendor\_id)[1]              -24.5987     21.032     -1.170      0.242     -65.871      16.673
C(vendor\_id)[2]              -42.6913     20.999     -2.033      0.042     -83.898      -1.485
C(store\_and\_fwd\_flag)[T.1]   185.7810     92.387      2.011      0.045       4.488     367.074
C(pick\_dayofweek)[T.1]        74.2615     30.089      2.468      0.014      15.216     133.307
C(pick\_dayofweek)[T.2]        42.9054     29.206      1.469      0.142     -14.406     100.216
C(pick\_dayofweek)[T.3]        80.5519     29.036      2.774      0.006      23.574     137.530
C(pick\_dayofweek)[T.4]        41.7573     30.249      1.380      0.168     -17.601     101.116
C(pick\_dayofweek)[T.5]        45.2183     29.931      1.511      0.131     -13.517     103.953
C(pick\_dayofweek)[T.6]       -26.6407     31.614     -0.843      0.400     -88.678      35.396
C(pick\_dayofmonth)[T.2]       58.9228     27.379      2.152      0.032       5.196     112.649
C(pick\_dayofmonth)[T.3]       61.7487     26.912      2.294      0.022       8.939     114.558
C(pick\_dayofmonth)[T.4]       89.1000     27.709      3.216      0.001      34.726     143.474
C(pick\_dayofmonth)[T.5]       78.6495     27.528      2.857      0.004      24.630     132.669
C(pick\_dayofmonth)[T.6]       62.2652     28.003      2.224      0.026       7.314     117.216
C(pick\_datehour)[T.1]       -125.1621     61.098     -2.049      0.041    -245.057      -5.267
C(pick\_datehour)[T.2]       -161.2712     90.445     -1.783      0.075    -338.754      16.212
C(pick\_datehour)[T.3]       -207.2450     86.527     -2.395      0.017    -377.039     -37.451
C(pick\_datehour)[T.4]       -294.0364     94.664     -3.106      0.002    -479.798    -108.275
C(pick\_datehour)[T.5]       -195.0278    108.277     -1.801      0.072    -407.503      17.447
C(pick\_datehour)[T.6]       -247.0803     66.637     -3.708      0.000    -377.843    -116.317
C(pick\_datehour)[T.7]       -113.4153     54.086     -2.097      0.036    -219.550      -7.281
C(pick\_datehour)[T.8]         91.2494     54.010      1.689      0.091     -14.737     197.236
C(pick\_datehour)[T.9]         70.5413     59.056      1.194      0.233     -45.346     186.428
C(pick\_datehour)[T.10]        96.5889     51.590      1.872      0.061      -4.647     197.825
C(pick\_datehour)[T.11]       104.4954     55.070      1.898      0.058      -3.570     212.561
C(pick\_datehour)[T.12]        69.6932     51.661      1.349      0.178     -31.682     171.069
C(pick\_datehour)[T.13]        39.6682     51.579      0.769      0.442     -61.547     140.883
C(pick\_datehour)[T.14]        66.3981     52.537      1.264      0.207     -36.696     169.493
C(pick\_datehour)[T.15]        60.7125     55.124      1.101      0.271     -47.459     168.884
C(pick\_datehour)[T.16]        92.3077     52.582      1.755      0.079     -10.876     195.492
C(pick\_datehour)[T.17]        39.9663     52.301      0.764      0.445     -62.665     142.597
C(pick\_datehour)[T.18]        31.0344     49.334      0.629      0.529     -65.776     127.845
C(pick\_datehour)[T.19]        32.5742     49.285      0.661      0.509     -64.140     129.288
C(pick\_datehour)[T.20]       -52.5681     49.393     -1.064      0.287    -149.494      44.358
C(pick\_datehour)[T.21]       -82.2672     48.939     -1.681      0.093    -178.303      13.768
C(pick\_datehour)[T.22]       -77.6749     50.888     -1.526      0.127    -177.533      22.183
C(pick\_datehour)[T.23]       -88.3353     52.504     -1.682      0.093    -191.366      14.695
C(pickup\_cluster)[T.1]        16.6586    218.268      0.076      0.939    -411.656     444.973
C(pickup\_cluster)[T.2]       264.9260    288.306      0.919      0.358    -300.827     830.679
C(pickup\_cluster)[T.3]        63.7051    137.691      0.463      0.644    -206.491     333.901
C(pickup\_cluster)[T.4]       -18.0341    153.414     -0.118      0.906    -319.084     283.016
C(pickup\_cluster)[T.5]      -183.6834    209.257     -0.878      0.380    -594.315     226.949
C(pickup\_cluster)[T.7]        84.4429    158.935      0.531      0.595    -227.440     396.326
C(pickup\_cluster)[T.8]       120.6091    106.398      1.134      0.257     -88.180     329.398
C(pickup\_cluster)[T.9]      -167.4819    159.003     -1.053      0.292    -479.498     144.535
C(pickup\_cluster)[T.10]       14.6414    112.009      0.131      0.896    -205.157     234.439
C(pickup\_cluster)[T.11]      -45.6655    344.656     -0.132      0.895    -721.994     630.663
C(pickup\_cluster)[T.12]      -61.3096     85.261     -0.719      0.472    -228.620     106.000
C(pickup\_cluster)[T.14]       -7.1489    164.990     -0.043      0.965    -330.915     316.617
C(pickup\_cluster)[T.15]       54.8720    228.798      0.240      0.811    -394.106     503.850
C(pickup\_cluster)[T.16]      106.1898    104.574      1.015      0.310     -99.019     311.399
C(pickup\_cluster)[T.17]      -30.1839    246.064     -0.123      0.902    -513.044     452.676
C(pickup\_cluster)[T.18]      236.8903    197.814      1.198      0.231    -151.286     625.067
C(pickup\_cluster)[T.19]      -37.4690    119.549     -0.313      0.754    -272.064     197.126
C(pickup\_cluster)[T.20]     -115.2837    335.899     -0.343      0.732    -774.430     543.862
C(pickup\_cluster)[T.22]      -63.9011    298.197     -0.214      0.830    -649.062     521.259
C(pickup\_cluster)[T.23]      282.6861    198.987      1.421      0.156    -107.793     673.165
C(pickup\_cluster)[T.24]      131.7009    122.646      1.074      0.283    -108.971     372.372
C(pickup\_cluster)[T.25]     -242.6923    289.691     -0.838      0.402    -811.163     325.778
C(pickup\_cluster)[T.26]      -42.0795    120.883     -0.348      0.728    -279.291     195.132
C(pickup\_cluster)[T.27]      -16.5851    130.829     -0.127      0.899    -273.314     240.144
C(pickup\_cluster)[T.28]      131.6374    301.433      0.437      0.662    -459.873     723.148
C(pickup\_cluster)[T.29]       19.6251    113.975      0.172      0.863    -204.031     243.281
C(pickup\_cluster)[T.30]       69.7389     95.774      0.728      0.467    -118.202     257.679
C(pickup\_cluster)[T.31]      -90.5182     80.457     -1.125      0.261    -248.401      67.365
C(pickup\_cluster)[T.32]      193.2064    137.866      1.401      0.161     -77.332     463.745
C(pickup\_cluster)[T.33]      -83.1819    155.288     -0.536      0.592    -387.909     221.545
C(pickup\_cluster)[T.34]      202.2213    362.082      0.558      0.577    -508.304     912.746
C(pickup\_cluster)[T.35]       26.8550    140.420      0.191      0.848    -248.696     302.406
C(pickup\_cluster)[T.36]      103.7869    223.912      0.464      0.643    -335.603     543.176
C(pickup\_cluster)[T.37]        4.8229    147.254      0.033      0.974    -284.138     293.783
C(pickup\_cluster)[T.38]      -13.4978    237.844     -0.057      0.955    -480.227     453.231
C(pickup\_cluster)[T.39]      -44.1905    114.857     -0.385      0.701    -269.578     181.197
C(pickup\_cluster)[T.40]      206.7461    182.449      1.133      0.257    -151.279     564.772
C(pickup\_cluster)[T.41]      119.7579    156.037      0.767      0.443    -186.438     425.954
C(pickup\_cluster)[T.42]       62.9968    118.885      0.530      0.596    -170.295     296.288
C(pickup\_cluster)[T.43]      356.0706    419.281      0.849      0.396    -466.698    1178.839
C(pickup\_cluster)[T.44]     -233.4198    180.470     -1.293      0.196    -587.562     120.722
C(pickup\_cluster)[T.45]      164.8350    214.743      0.768      0.443    -256.563     586.233
C(pickup\_cluster)[T.46]       43.7701    140.245      0.312      0.755    -231.438     318.978
C(pickup\_cluster)[T.47]      157.0208    162.125      0.969      0.333    -161.122     475.163
C(pickup\_cluster)[T.48]      819.2246    495.130      1.655      0.098    -152.385    1790.834
C(pickup\_cluster)[T.49]       66.4244    367.652      0.181      0.857    -655.031     787.880
C(pickup\_cluster)[T.50]     -125.8426    181.287     -0.694      0.488    -481.588     229.903
C(pickup\_cluster)[T.51]      -47.4472    191.679     -0.248      0.805    -423.586     328.691
C(pickup\_cluster)[T.52]     -144.8655    245.379     -0.590      0.555    -626.380     336.649
C(pickup\_cluster)[T.54]      189.8467    168.911      1.124      0.261    -141.613     521.306
C(pickup\_cluster)[T.55]     -129.4785    315.548     -0.410      0.682    -748.688     489.731
C(pickup\_cluster)[T.56]      145.2278    149.804      0.969      0.333    -148.737     439.193
C(pickup\_cluster)[T.57]      -18.4159    252.996     -0.073      0.942    -514.879     478.047
C(pickup\_cluster)[T.58]       31.3401     91.790      0.341      0.733    -148.782     211.463
C(pickup\_cluster)[T.59]     -149.6322    162.201     -0.923      0.356    -467.924     168.659
C(pickup\_cluster)[T.60]       42.3256    104.268      0.406      0.685    -162.283     246.934
C(pickup\_cluster)[T.61]      113.9910    120.837      0.943      0.346    -123.131     351.114
C(pickup\_cluster)[T.62]      131.9614    211.596      0.624      0.533    -283.261     547.184
C(pickup\_cluster)[T.63]      -39.8435    251.855     -0.158      0.874    -534.066     454.379
C(pickup\_cluster)[T.64]      103.4498    133.805      0.773      0.440    -159.120     366.020
C(pickup\_cluster)[T.66]       95.3050    216.686      0.440      0.660    -329.905     520.515
C(pickup\_cluster)[T.68]     -336.8697    243.378     -1.384      0.167    -814.458     140.718
C(pickup\_cluster)[T.70]     -100.8693    261.751     -0.385      0.700    -614.512     412.774
C(pickup\_cluster)[T.71]      267.5719    209.253      1.279      0.201    -143.051     678.195
C(pickup\_cluster)[T.72]      -22.8128    220.387     -0.104      0.918    -455.285     409.659
C(pickup\_cluster)[T.73]      -73.4410    327.261     -0.224      0.822    -715.636     568.754
C(pickup\_cluster)[T.74]      125.9756    143.192      0.880      0.379    -155.014     406.965
C(pickup\_cluster)[T.75]      -42.3200     99.355     -0.426      0.670    -237.288     152.648
C(pickup\_cluster)[T.76]      -12.5280    174.645     -0.072      0.943    -355.240     330.184
C(pickup\_cluster)[T.77]      -30.9514    123.426     -0.251      0.802    -273.154     211.251
C(pickup\_cluster)[T.78]        6.5229    143.031      0.046      0.964    -274.150     287.196
C(pickup\_cluster)[T.79]     -226.8620    120.382     -1.885      0.060    -463.092       9.368
C(pickup\_cluster)[T.80]       33.9848    130.565      0.260      0.795    -222.228     290.197
C(pickup\_cluster)[T.81]     -129.1144    103.975     -1.242      0.215    -333.147      74.919
C(pickup\_cluster)[T.82]       58.4022    123.587      0.473      0.637    -184.116     300.920
C(pickup\_cluster)[T.83]      205.0182    188.172      1.090      0.276    -164.238     574.274
C(pickup\_cluster)[T.84]       72.7903    175.540      0.415      0.678    -271.677     417.258
C(pickup\_cluster)[T.85]      -38.2081    183.142     -0.209      0.835    -397.594     321.177
C(pickup\_cluster)[T.86]       57.8141    109.627      0.527      0.598    -157.310     272.938
C(pickup\_cluster)[T.87]      551.2670    376.725      1.463      0.144    -187.992    1290.526
C(pickup\_cluster)[T.88]      278.2842    130.444      2.133      0.033      22.311     534.258
C(pickup\_cluster)[T.89]      126.1780    261.157      0.483      0.629    -386.299     638.655
C(pickup\_cluster)[T.90]       -9.0864    268.800     -0.034      0.973    -536.561     518.388
C(pickup\_cluster)[T.91]       77.3649    200.048      0.387      0.699    -315.196     469.925
C(pickup\_cluster)[T.92]       10.1156    123.941      0.082      0.935    -233.099     253.330
C(pickup\_cluster)[T.93]      148.2858    112.922      1.313      0.189     -73.305     369.876
C(pickup\_cluster)[T.94]      -38.1929    102.473     -0.373      0.709    -239.279     162.893
C(pickup\_cluster)[T.95]      -60.1615    118.343     -0.508      0.611    -292.389     172.066
C(pickup\_cluster)[T.96]      153.7117    138.978      1.106      0.269    -119.010     426.434
C(pickup\_cluster)[T.98]       40.4109    209.828      0.193      0.847    -371.341     452.163
C(pickup\_cluster)[T.99]       28.9009    112.308      0.257      0.797    -191.484     249.286
C(dropoff\_cluster)[T.1]     -187.0485    196.616     -0.951      0.342    -572.875     198.778
C(dropoff\_cluster)[T.2]     -244.9189    245.226     -0.999      0.318    -726.134     236.296
C(dropoff\_cluster)[T.3]      -29.4481    132.450     -0.222      0.824    -289.360     230.464
C(dropoff\_cluster)[T.4]     -156.4640    142.289     -1.100      0.272    -435.683     122.755
C(dropoff\_cluster)[T.5]     -111.7908    186.618     -0.599      0.549    -477.997     254.416
C(dropoff\_cluster)[T.6]      510.7575    422.074      1.210      0.227    -317.491    1339.006
C(dropoff\_cluster)[T.7]     -151.3952    146.890     -1.031      0.303    -439.642     136.852
C(dropoff\_cluster)[T.8]     -236.6479    104.945     -2.255      0.024    -442.585     -30.711
C(dropoff\_cluster)[T.9]     -250.2253    130.663     -1.915      0.056    -506.630       6.180
C(dropoff\_cluster)[T.10]    -247.7935    123.114     -2.013      0.044    -489.384      -6.203
C(dropoff\_cluster)[T.11]    -189.7534    270.675     -0.701      0.483    -720.907     341.400
C(dropoff\_cluster)[T.12]     -39.8101     84.037     -0.474      0.636    -204.720     125.099
C(dropoff\_cluster)[T.13]      45.0540    352.307      0.128      0.898    -646.290     736.398
C(dropoff\_cluster)[T.14]     -51.7172    156.687     -0.330      0.741    -359.190     255.756
C(dropoff\_cluster)[T.15]    -301.1726    196.613     -1.532      0.126    -686.993      84.648
C(dropoff\_cluster)[T.16]     -84.7400     92.517     -0.916      0.360    -266.288      96.809
C(dropoff\_cluster)[T.17]     -89.7869    212.391     -0.423      0.673    -506.569     326.996
C(dropoff\_cluster)[T.18]      40.8255    181.378      0.225      0.822    -315.099     396.750
C(dropoff\_cluster)[T.19]     -45.4747    122.199     -0.372      0.710    -285.269     194.320
C(dropoff\_cluster)[T.20]    -200.1224    301.259     -0.664      0.507    -791.293     391.049
C(dropoff\_cluster)[T.21]     -76.2773    322.556     -0.236      0.813    -709.240     556.685
C(dropoff\_cluster)[T.22]    -147.7927    158.285     -0.934      0.351    -458.401     162.815
C(dropoff\_cluster)[T.23]     -34.0352    171.314     -0.199      0.843    -370.211     302.140
C(dropoff\_cluster)[T.24]     -75.8702    124.492     -0.609      0.542    -320.164     168.424
C(dropoff\_cluster)[T.25]    -296.0897    233.416     -1.269      0.205    -754.130     161.950
C(dropoff\_cluster)[T.26]      -0.9100    117.416     -0.008      0.994    -231.319     229.499
C(dropoff\_cluster)[T.27]    -259.2537    123.201     -2.104      0.036    -501.015     -17.492
C(dropoff\_cluster)[T.28]     227.9829    245.272      0.930      0.353    -253.322     709.288
C(dropoff\_cluster)[T.29]    -199.6202    118.371     -1.686      0.092    -431.904      32.664
C(dropoff\_cluster)[T.30]     116.8342     95.711      1.221      0.222     -70.983     304.652
C(dropoff\_cluster)[T.31]     -48.5878     74.954     -0.648      0.517    -195.673      98.498
C(dropoff\_cluster)[T.32]    -235.5894    128.648     -1.831      0.067    -488.039      16.860
C(dropoff\_cluster)[T.33]     -82.6680    104.547     -0.791      0.429    -287.824     122.488
C(dropoff\_cluster)[T.35]     -81.2008    125.209     -0.649      0.517    -326.903     164.502
C(dropoff\_cluster)[T.36]     -86.1783    195.149     -0.442      0.659    -469.126     296.769
C(dropoff\_cluster)[T.37]    -165.9364    138.943     -1.194      0.233    -438.589     106.716
C(dropoff\_cluster)[T.38]    -229.1254    207.976     -1.102      0.271    -637.244     178.993
C(dropoff\_cluster)[T.39]    -249.3575    107.881     -2.311      0.021    -461.056     -37.659
C(dropoff\_cluster)[T.40]    -211.6569    157.482     -1.344      0.179    -520.688      97.375
C(dropoff\_cluster)[T.41]    -246.5159    128.007     -1.926      0.054    -497.707       4.676
C(dropoff\_cluster)[T.42]    -110.6847    114.306     -0.968      0.333    -334.990     113.621
C(dropoff\_cluster)[T.43]    -180.5147    300.054     -0.602      0.548    -769.320     408.291
C(dropoff\_cluster)[T.44]    -224.6994    156.714     -1.434      0.152    -532.223      82.825
C(dropoff\_cluster)[T.45]    -110.9444    189.872     -0.584      0.559    -483.536     261.648
C(dropoff\_cluster)[T.46]    -132.8934    133.893     -0.993      0.321    -395.635     129.849
C(dropoff\_cluster)[T.47]      39.1457    149.488      0.262      0.793    -254.200     332.491
C(dropoff\_cluster)[T.48]      90.5586    374.575      0.242      0.809    -644.482     825.600
C(dropoff\_cluster)[T.49]    -156.9224    316.582     -0.496      0.620    -778.161     464.316
C(dropoff\_cluster)[T.50]    -179.6717    162.314     -1.107      0.269    -498.186     138.843
C(dropoff\_cluster)[T.51]    -191.1678    166.584     -1.148      0.251    -518.061     135.725
C(dropoff\_cluster)[T.52]    -263.4740    206.815     -1.274      0.203    -669.314     142.366
C(dropoff\_cluster)[T.53]     -22.3560    312.817     -0.071      0.943    -636.207     591.495
C(dropoff\_cluster)[T.54]     -34.7432    157.427     -0.221      0.825    -343.668     274.182
C(dropoff\_cluster)[T.55]    -247.7084    258.440     -0.958      0.338    -754.854     259.437
C(dropoff\_cluster)[T.56]    -179.5739    135.511     -1.325      0.185    -445.492      86.344
C(dropoff\_cluster)[T.57]    -117.8400    231.579     -0.509      0.611    -572.275     336.595
C(dropoff\_cluster)[T.58]      18.8510     92.785      0.203      0.839    -163.224     200.926
C(dropoff\_cluster)[T.59]    -242.9083    137.739     -1.764      0.078    -513.198      27.381
C(dropoff\_cluster)[T.60]     -46.0573     93.814     -0.491      0.624    -230.151     138.037
C(dropoff\_cluster)[T.61]       7.1577    101.983      0.070      0.944    -192.967     207.283
C(dropoff\_cluster)[T.62]      -2.2454    179.278     -0.013      0.990    -354.048     349.557
C(dropoff\_cluster)[T.63]    -215.1018    213.396     -1.008      0.314    -633.856     203.653
C(dropoff\_cluster)[T.64]    -189.4983    121.759     -1.556      0.120    -428.429      49.433
C(dropoff\_cluster)[T.65]    -327.6697    296.970     -1.103      0.270    -910.424     255.085
C(dropoff\_cluster)[T.66]      44.4433    247.340      0.180      0.857    -440.921     529.807
C(dropoff\_cluster)[T.67]     275.3144    339.143      0.812      0.417    -390.197     940.826
C(dropoff\_cluster)[T.68]    -293.8946    207.505     -1.416      0.157    -701.088     113.299
C(dropoff\_cluster)[T.69]    -189.4443    252.753     -0.750      0.454    -685.429     306.540
C(dropoff\_cluster)[T.70]    -226.4013    224.520     -1.008      0.314    -666.984     214.181
C(dropoff\_cluster)[T.71]      -1.2118    182.100     -0.007      0.995    -358.552     356.129
C(dropoff\_cluster)[T.72]    -183.6020    176.576     -1.040      0.299    -530.103     162.899
C(dropoff\_cluster)[T.73]    -351.6542    280.889     -1.252      0.211    -902.852     199.543
C(dropoff\_cluster)[T.74]     -41.4294    126.986     -0.326      0.744    -290.617     207.758
C(dropoff\_cluster)[T.75]     -26.5051     95.109     -0.279      0.781    -213.140     160.130
C(dropoff\_cluster)[T.76]    -320.3317    157.571     -2.033      0.042    -629.539     -11.125
C(dropoff\_cluster)[T.77]    -200.1573    118.238     -1.693      0.091    -432.179      31.864
C(dropoff\_cluster)[T.78]    -132.3591    144.620     -0.915      0.360    -416.151     151.433
C(dropoff\_cluster)[T.79]    -224.9420    120.593     -1.865      0.062    -461.586      11.702
C(dropoff\_cluster)[T.80]    -245.0518    108.599     -2.256      0.024    -458.158     -31.945
C(dropoff\_cluster)[T.81]    -139.6328    112.367     -1.243      0.214    -360.134      80.868
C(dropoff\_cluster)[T.82]     -79.1267    108.383     -0.730      0.466    -291.811     133.558
C(dropoff\_cluster)[T.83]     -48.8092    168.238     -0.290      0.772    -378.948     281.329
C(dropoff\_cluster)[T.84]      74.0771    171.356      0.432      0.666    -262.179     410.334
C(dropoff\_cluster)[T.85]    -101.7693    160.167     -0.635      0.525    -416.070     212.532
C(dropoff\_cluster)[T.86]    -127.2360    101.119     -1.258      0.209    -325.664      71.192
C(dropoff\_cluster)[T.87]     318.1690    357.335      0.890      0.373    -383.040    1019.378
C(dropoff\_cluster)[T.88]     161.1685    114.984      1.402      0.161     -64.469     386.806
C(dropoff\_cluster)[T.89]    -199.0517    230.152     -0.865      0.387    -650.686     252.583
C(dropoff\_cluster)[T.90]    -161.3617    223.845     -0.721      0.471    -600.620     277.897
C(dropoff\_cluster)[T.91]    -240.0055    181.586     -1.322      0.187    -596.337     116.326
C(dropoff\_cluster)[T.92]    -117.9790    113.817     -1.037      0.300    -341.326     105.368
C(dropoff\_cluster)[T.93]     -27.5062    101.652     -0.271      0.787    -226.981     171.969
C(dropoff\_cluster)[T.94]     128.4251     99.008      1.297      0.195     -65.862     322.712
C(dropoff\_cluster)[T.95]    -226.6339    120.770     -1.877      0.061    -463.624      10.356
C(dropoff\_cluster)[T.96]    -149.9203    128.447     -1.167      0.243    -401.976     102.135
C(dropoff\_cluster)[T.97]      95.3050    216.686      0.440      0.660    -329.905     520.515
C(dropoff\_cluster)[T.98]    -178.1390    188.592     -0.945      0.345    -548.219     191.941
C(dropoff\_cluster)[T.99]    -201.5303    103.257     -1.952      0.051    -404.155       1.094
passenger\_count                7.1401      6.268      1.139      0.255      -5.160      19.440
pickup\_longitude            -352.3189   1820.894     -0.193      0.847   -3925.518    3220.880
pickup\_latitude             2112.7363   2288.181      0.923      0.356   -2377.434    6602.906
dropoff\_longitude            919.0964   1676.715      0.548      0.584   -2371.175    4209.368
dropoff\_latitude           -1078.3728   2002.359     -0.539      0.590   -5007.665    2850.919
distance                     200.2331      5.929     33.772      0.000     188.599     211.868
pickup\_pca0                  987.6951   2446.174      0.404      0.686   -3812.509    5787.900
pickup\_pca1                -7142.1177   3868.861     -1.846      0.065   -1.47e+04     449.873
dropoff\_pca0                -924.3183   2078.305     -0.445      0.657   -5002.643    3154.006
dropoff\_pca1               -4288.3694   3378.799     -1.269      0.205   -1.09e+04    2341.955
==============================================================================
Omnibus:                      126.344   Durbin-Watson:                   1.922
Prob(Omnibus):                  0.000   Jarque-Bera (JB):              261.960
Skew:                           0.630   Prob(JB):                     1.31e-57
Kurtosis:                       4.873   Cond. No.                     5.15e+17
==============================================================================

Warnings:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.
[2] The smallest eigenvalue is 6.63e-29. This might indicate that there are
strong multicollinearity problems or that the design matrix is singular.

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}84}]:} \PY{n}{Y\PYZus{}test2} \PY{o}{=} \PY{n}{model2}\PY{o}{.}\PY{n}{predict}\PY{p}{(}\PY{n}{X\PYZus{}test1}\PY{p}{)}
         \PY{n}{Y\PYZus{}test2}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{,} \PY{n+nb}{len}\PY{p}{(}\PY{n}{Y\PYZus{}test2}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}84}]:} (0     749.142025
          1     856.959467
          2     573.372417
          3    1313.131172
          4     469.739026
          dtype: float64, 625134)
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}85}]:} \PY{n}{sub} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{p}{(}\PY{p}{)}
         \PY{n}{sub}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Id}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{test1}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{id}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}
         \PY{n}{sub}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{trip\PYZus{}duration}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{Y\PYZus{}test2}
         \PY{n}{sub}\PY{o}{.}\PY{n}{to\PYZus{}csv}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{submission\PYZus{}model2\PYZus{}2.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{index}\PY{o}{=}\PY{k+kc}{False}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor} }]:} \PY{c+c1}{\PYZsh{}score(RMSEL) = 0.54213}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}106}]:} \PY{n}{Y\PYZus{}test2\PYZus{}3\PYZus{}1} \PY{o}{=} \PY{n}{model2\PYZus{}3\PYZus{}1}\PY{o}{.}\PY{n}{predict}\PY{p}{(}\PY{n}{X\PYZus{}test1}\PY{p}{)}
          \PY{n}{Y\PYZus{}test2\PYZus{}3\PYZus{}1}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{,} \PY{n+nb}{len}\PY{p}{(}\PY{n}{Y\PYZus{}test2\PYZus{}3\PYZus{}1}\PY{p}{)}
          \PY{n}{sub} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{p}{(}\PY{p}{)}
          \PY{n}{sub}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Id}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{test1}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{id}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}
          \PY{n}{sub}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{trip\PYZus{}duration}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{Y\PYZus{}test2\PYZus{}3\PYZus{}1}
          \PY{n}{sub}\PY{o}{.}\PY{n}{to\PYZus{}csv}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{submission\PYZus{}model2\PYZus{}3\PYZus{}1.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{index}\PY{o}{=}\PY{k+kc}{False}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}105}]:} \PY{n}{model2\PYZus{}3\PYZus{}1} \PY{o}{=} \PY{n}{sm}\PY{o}{.}\PY{n}{OLS}\PY{o}{.}\PY{n}{from\PYZus{}formula}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{trip\PYZus{}duration \PYZti{} C(vendor\PYZus{}id) + passenger\PYZus{}count + pickup\PYZus{}longitude + pickup\PYZus{}latitude + dropoff\PYZus{}longitude + dropoff\PYZus{}latitude + C(store\PYZus{}and\PYZus{}fwd\PYZus{}flag) + C(pick\PYZus{}dayofweek) + C(pick\PYZus{}dayofmonth) + C(pick\PYZus{}datehour) + distance + 0}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{data}\PY{o}{=}\PY{n}{train}\PY{p}{)}\PY{o}{.}\PY{n}{fit}\PY{p}{(}\PY{p}{)}
          \PY{n+nb}{print}\PY{p}{(}\PY{n}{model2\PYZus{}3\PYZus{}1}\PY{o}{.}\PY{n}{summary}\PY{p}{(}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
                            OLS Regression Results                            
==============================================================================
Dep. Variable:          trip\_duration   R-squared:                       0.571
Model:                            OLS   Adj. R-squared:                  0.556
Method:                 Least Squares   F-statistic:                     37.80
Date:                Mon, 05 Mar 2018   Prob (F-statistic):          2.07e-187
Time:                        20:39:47   Log-Likelihood:                -8587.3
No. Observations:                1234   AIC:                         1.726e+04
Df Residuals:                    1191   BIC:                         1.748e+04
Df Model:                          42                                         
Covariance Type:            nonrobust                                         
==============================================================================================
                                 coef    std err          t      P>|t|      [0.025      0.975]
----------------------------------------------------------------------------------------------
C(vendor\_id)[1]            -2.666e+04   7.07e+04     -0.377      0.706   -1.65e+05    1.12e+05
C(vendor\_id)[2]            -2.667e+04   7.07e+04     -0.377      0.706   -1.65e+05    1.12e+05
C(store\_and\_fwd\_flag)[T.1]   157.3999     89.281      1.763      0.078     -17.765     332.565
C(pick\_dayofweek)[T.1]        52.9146     29.040      1.822      0.069      -4.060     109.889
C(pick\_dayofweek)[T.2]        16.9351     28.307      0.598      0.550     -38.601      72.471
C(pick\_dayofweek)[T.3]        61.9412     27.935      2.217      0.027       7.135     116.748
C(pick\_dayofweek)[T.4]         1.0882     28.911      0.038      0.970     -55.633      57.810
C(pick\_dayofweek)[T.5]         0.9489     28.288      0.034      0.973     -54.551      56.449
C(pick\_dayofweek)[T.6]       -56.8271     30.122     -1.887      0.059    -115.926       2.272
C(pick\_dayofmonth)[T.2]       32.4839     26.342      1.233      0.218     -19.198      84.165
C(pick\_dayofmonth)[T.3]       45.0765     26.329      1.712      0.087      -6.579      96.732
C(pick\_dayofmonth)[T.4]       74.6145     26.232      2.844      0.005      23.149     126.080
C(pick\_dayofmonth)[T.5]       73.9144     26.546      2.784      0.005      21.832     125.996
C(pick\_dayofmonth)[T.6]       50.9509     26.731      1.906      0.057      -1.495     103.397
C(pick\_datehour)[T.1]       -123.0004     57.107     -2.154      0.031    -235.043     -10.958
C(pick\_datehour)[T.2]       -162.3801     83.512     -1.944      0.052    -326.227       1.467
C(pick\_datehour)[T.3]       -222.2532     81.221     -2.736      0.006    -381.606     -62.901
C(pick\_datehour)[T.4]       -256.5762     90.311     -2.841      0.005    -433.762     -79.390
C(pick\_datehour)[T.5]       -188.9830    105.517     -1.791      0.074    -396.004      18.038
C(pick\_datehour)[T.6]       -229.9893     61.974     -3.711      0.000    -351.580    -108.398
C(pick\_datehour)[T.7]       -123.8310     50.708     -2.442      0.015    -223.318     -24.344
C(pick\_datehour)[T.8]         77.2506     50.588      1.527      0.127     -22.002     176.503
C(pick\_datehour)[T.9]         76.0732     56.240      1.353      0.176     -34.268     186.414
C(pick\_datehour)[T.10]        78.1100     49.234      1.586      0.113     -18.486     174.706
C(pick\_datehour)[T.11]       129.7014     51.896      2.499      0.013      27.884     231.519
C(pick\_datehour)[T.12]        81.0274     48.898      1.657      0.098     -14.909     176.964
C(pick\_datehour)[T.13]        23.9872     49.324      0.486      0.627     -72.785     120.759
C(pick\_datehour)[T.14]        72.2991     50.722      1.425      0.154     -27.215     171.813
C(pick\_datehour)[T.15]        39.5665     51.846      0.763      0.446     -62.152     141.285
C(pick\_datehour)[T.16]       109.7801     50.642      2.168      0.030      10.422     209.138
C(pick\_datehour)[T.17]        48.0033     49.754      0.965      0.335     -49.611     145.618
C(pick\_datehour)[T.18]        31.3458     47.241      0.664      0.507     -61.338     124.030
C(pick\_datehour)[T.19]        19.5320     46.825      0.417      0.677     -72.337     111.401
C(pick\_datehour)[T.20]       -90.8189     47.061     -1.930      0.054    -183.150       1.512
C(pick\_datehour)[T.21]       -87.6721     46.823     -1.872      0.061    -179.537       4.193
C(pick\_datehour)[T.22]       -94.3938     48.825     -1.933      0.053    -190.187       1.399
C(pick\_datehour)[T.23]       -91.2335     49.862     -1.830      0.068    -189.061       6.594
passenger\_count                6.2901      5.963      1.055      0.292      -5.410      17.990
pickup\_longitude            -955.2334    702.340     -1.360      0.174   -2333.194     422.727
pickup\_latitude              902.4359    613.612      1.471      0.142    -301.446    2106.318
dropoff\_longitude            130.4868    602.376      0.217      0.829   -1051.350    1312.324
dropoff\_latitude           -1741.0282    492.700     -3.534      0.000   -2707.685    -774.371
distance                     190.6786      5.254     36.294      0.000     180.371     200.986
==============================================================================
Omnibus:                      186.855   Durbin-Watson:                   1.997
Prob(Omnibus):                  0.000   Jarque-Bera (JB):              381.742
Skew:                           0.891   Prob(JB):                     1.28e-83
Kurtosis:                       5.061   Cond. No.                     1.62e+06
==============================================================================

Warnings:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.
[2] The condition number is large, 1.62e+06. This might indicate that there are
strong multicollinearity or other numerical problems.

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}86}]:} \PY{n}{model2\PYZus{}3} \PY{o}{=} \PY{n}{sm}\PY{o}{.}\PY{n}{OLS}\PY{o}{.}\PY{n}{from\PYZus{}formula}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{trip\PYZus{}duration \PYZti{} C(vendor\PYZus{}id) + passenger\PYZus{}count + pickup\PYZus{}longitude + pickup\PYZus{}latitude + dropoff\PYZus{}longitude + dropoff\PYZus{}latitude + C(store\PYZus{}and\PYZus{}fwd\PYZus{}flag) + C(pick\PYZus{}dayofweek) + C(pick\PYZus{}dayofmonth) + C(pick\PYZus{}datehour) + distance + pickup\PYZus{}pca0 + pickup\PYZus{}pca1 + dropoff\PYZus{}pca0 + dropoff\PYZus{}pca1 + pickup\PYZus{}cluster + dropoff\PYZus{}cluster + 0}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{data}\PY{o}{=}\PY{n}{train}\PY{p}{)}\PY{o}{.}\PY{n}{fit}\PY{p}{(}\PY{p}{)}
         \PY{n+nb}{print}\PY{p}{(}\PY{n}{model2\PYZus{}3}\PY{o}{.}\PY{n}{summary}\PY{p}{(}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
                            OLS Regression Results                            
==============================================================================
Dep. Variable:          trip\_duration   R-squared:                       0.572
Model:                            OLS   Adj. R-squared:                  0.556
Method:                 Least Squares   F-statistic:                     36.09
Date:                Mon, 05 Mar 2018   Prob (F-statistic):          4.26e-186
Time:                        20:19:48   Log-Likelihood:                -8586.7
No. Observations:                1234   AIC:                         1.726e+04
Df Residuals:                    1189   BIC:                         1.749e+04
Df Model:                          44                                         
Covariance Type:            nonrobust                                         
==============================================================================================
                                 coef    std err          t      P>|t|      [0.025      0.975]
----------------------------------------------------------------------------------------------
C(vendor\_id)[1]                3.5118      8.264      0.425      0.671     -12.702      19.726
C(vendor\_id)[2]               -5.4020      8.352     -0.647      0.518     -21.787      10.983
C(store\_and\_fwd\_flag)[T.1]   155.8281     89.320      1.745      0.081     -19.414     331.070
C(pick\_dayofweek)[T.1]        51.8976     29.081      1.785      0.075      -5.157     108.953
C(pick\_dayofweek)[T.2]        17.4722     28.328      0.617      0.537     -38.106      73.050
C(pick\_dayofweek)[T.3]        61.9546     27.952      2.216      0.027       7.114     116.795
C(pick\_dayofweek)[T.4]         1.8333     28.974      0.063      0.950     -55.012      58.678
C(pick\_dayofweek)[T.5]         1.5301     28.304      0.054      0.957     -54.002      57.062
C(pick\_dayofweek)[T.6]       -56.1053     30.143     -1.861      0.063    -115.244       3.034
C(pick\_dayofmonth)[T.2]       31.5244     26.371      1.195      0.232     -20.214      83.263
C(pick\_dayofmonth)[T.3]       45.0627     26.347      1.710      0.087      -6.629      96.754
C(pick\_dayofmonth)[T.4]       74.5828     26.241      2.842      0.005      23.099     126.066
C(pick\_dayofmonth)[T.5]       73.3870     26.559      2.763      0.006      21.279     125.495
C(pick\_dayofmonth)[T.6]       50.2559     26.760      1.878      0.061      -2.245     102.757
C(pick\_datehour)[T.1]       -121.8621     57.141     -2.133      0.033    -233.971      -9.753
C(pick\_datehour)[T.2]       -159.3289     83.603     -1.906      0.057    -323.355       4.697
C(pick\_datehour)[T.3]       -221.3110     81.253     -2.724      0.007    -380.727     -61.895
C(pick\_datehour)[T.4]       -256.9451     90.404     -2.842      0.005    -434.315     -79.576
C(pick\_datehour)[T.5]       -195.7432    105.723     -1.851      0.064    -403.169      11.682
C(pick\_datehour)[T.6]       -225.0236     62.226     -3.616      0.000    -347.109    -102.938
C(pick\_datehour)[T.7]       -124.1203     50.747     -2.446      0.015    -223.684     -24.557
C(pick\_datehour)[T.8]         76.6889     50.675      1.513      0.130     -22.734     176.112
C(pick\_datehour)[T.9]         76.6735     56.334      1.361      0.174     -33.852     187.199
C(pick\_datehour)[T.10]        79.1068     49.277      1.605      0.109     -17.573     175.786
C(pick\_datehour)[T.11]       128.3527     51.927      2.472      0.014      26.474     230.231
C(pick\_datehour)[T.12]        81.6809     48.927      1.669      0.095     -14.313     177.674
C(pick\_datehour)[T.13]        22.5997     49.381      0.458      0.647     -74.283     119.483
C(pick\_datehour)[T.14]        69.6445     50.946      1.367      0.172     -30.309     169.598
C(pick\_datehour)[T.15]        38.7681     51.910      0.747      0.455     -63.076     140.613
C(pick\_datehour)[T.16]       108.0104     50.727      2.129      0.033       8.485     207.536
C(pick\_datehour)[T.17]        46.7669     49.795      0.939      0.348     -50.930     144.464
C(pick\_datehour)[T.18]        31.2206     47.264      0.661      0.509     -61.510     123.951
C(pick\_datehour)[T.19]        20.2216     46.847      0.432      0.666     -71.689     112.133
C(pick\_datehour)[T.20]       -92.1324     47.092     -1.956      0.051    -184.526       0.261
C(pick\_datehour)[T.21]       -87.7346     46.859     -1.872      0.061    -179.671       4.202
C(pick\_datehour)[T.22]       -94.6788     48.862     -1.938      0.053    -190.545       1.187
C(pick\_datehour)[T.23]       -91.5840     49.893     -1.836      0.067    -189.472       6.304
passenger\_count                5.8503      5.980      0.978      0.328      -5.883      17.583
pickup\_longitude            -427.7704    274.652     -1.557      0.120    -966.627     111.087
pickup\_latitude              421.8061    268.140      1.573      0.116    -104.274     947.887
dropoff\_longitude            154.8817    281.010      0.551      0.582    -396.448     706.212
dropoff\_latitude            -913.1778    237.013     -3.853      0.000   -1378.189    -448.167
distance                     190.3879      5.262     36.182      0.000     180.064     200.711
pickup\_pca0                   90.2086    199.626      0.452      0.651    -301.450     481.867
pickup\_pca1                 -750.2489    580.197     -1.293      0.196   -1888.574     388.076
dropoff\_pca0                -680.9537    174.933     -3.893      0.000   -1024.166    -337.742
dropoff\_pca1                 485.4591    475.506      1.021      0.307    -447.465    1418.383
pickup\_cluster                 0.2710      0.247      1.097      0.273      -0.214       0.756
dropoff\_cluster               -0.0576      0.256     -0.225      0.822      -0.560       0.445
==============================================================================
Omnibus:                      187.725   Durbin-Watson:                   1.994
Prob(Omnibus):                  0.000   Jarque-Bera (JB):              385.251
Skew:                           0.893   Prob(JB):                     2.21e-84
Kurtosis:                       5.074   Cond. No.                     4.56e+17
==============================================================================

Warnings:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.
[2] The smallest eigenvalue is 1.13e-28. This might indicate that there are
strong multicollinearity problems or that the design matrix is singular.

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}87}]:} \PY{n}{Y\PYZus{}test2\PYZus{}3} \PY{o}{=} \PY{n}{model2\PYZus{}3}\PY{o}{.}\PY{n}{predict}\PY{p}{(}\PY{n}{X\PYZus{}test1}\PY{p}{)}
         \PY{n}{Y\PYZus{}test2\PYZus{}3}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{,} \PY{n+nb}{len}\PY{p}{(}\PY{n}{Y\PYZus{}test2\PYZus{}3}\PY{p}{)}
         \PY{n}{sub} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{p}{(}\PY{p}{)}
         \PY{n}{sub}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Id}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{test1}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{id}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}
         \PY{n}{sub}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{trip\PYZus{}duration}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{Y\PYZus{}test2\PYZus{}3}
         \PY{n}{sub}\PY{o}{.}\PY{n}{to\PYZus{}csv}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{submission\PYZus{}model2\PYZus{}3.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{index}\PY{o}{=}\PY{k+kc}{False}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}88}]:} \PY{c+c1}{\PYZsh{}score(RMSLE) = 0.54766}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}67}]:} \PY{n}{model2\PYZus{}1} \PY{o}{=} \PY{n}{sm}\PY{o}{.}\PY{n}{OLS}\PY{o}{.}\PY{n}{from\PYZus{}formula}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{trip\PYZus{}duration \PYZti{} X\PYZus{}train}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{data}\PY{o}{=}\PY{n}{train}\PY{p}{)}\PY{o}{.}\PY{n}{fit}\PY{p}{(}\PY{p}{)}
         \PY{n+nb}{print}\PY{p}{(}\PY{n}{model2\PYZus{}1}\PY{o}{.}\PY{n}{summary}\PY{p}{(}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
                            OLS Regression Results                            
==============================================================================
Dep. Variable:          trip\_duration   R-squared:                       0.510
Model:                            OLS   Adj. R-squared:                  0.505
Method:                 Least Squares   F-statistic:                     97.69
Date:                Mon, 05 Mar 2018   Prob (F-statistic):          1.85e-178
Time:                        19:47:00   Log-Likelihood:                -8669.8
No. Observations:                1234   AIC:                         1.737e+04
Df Residuals:                    1220   BIC:                         1.744e+04
Df Model:                          13                                         
Covariance Type:            nonrobust                                         
===============================================================================
                  coef    std err          t      P>|t|      [0.025      0.975]
-------------------------------------------------------------------------------
Intercept      -3.0435      5.187     -0.587      0.558     -13.221       7.134
X\_train[0]    -11.2662     16.568     -0.680      0.497     -43.771      21.239
X\_train[1]      5.4122      6.237      0.868      0.386      -6.824      17.649
X\_train[2]   -139.6647    282.688     -0.494      0.621    -694.273     414.944
X\_train[3]    488.0935    277.830      1.757      0.079     -56.985    1033.171
X\_train[4]    -60.5236    289.817     -0.209      0.835    -629.119     508.072
X\_train[5]   -846.0309    246.758     -3.429      0.001   -1330.149    -361.913
X\_train[6]    158.8617     92.743      1.713      0.087     -23.092     340.815
X\_train[7]     -9.5036      4.051     -2.346      0.019     -17.451      -1.556
X\_train[8]     10.9725      4.666      2.351      0.019       1.817      20.128
X\_train[9]      0.1887      1.232      0.153      0.878      -2.228       2.605
X\_train[10]   186.1892      5.477     33.997      0.000     175.445     196.934
X\_train[11]   298.3486    205.780      1.450      0.147    -105.373     702.071
X\_train[12]  -647.1386    606.753     -1.067      0.286   -1837.533     543.256
X\_train[13]  -756.9660    181.903     -4.161      0.000   -1113.843    -400.089
X\_train[14]   172.8994    492.349      0.351      0.726    -793.044    1138.843
X\_train[15]     0.4654      0.257      1.810      0.071      -0.039       0.970
X\_train[16]    -0.0218      0.267     -0.081      0.935      -0.546       0.503
==============================================================================
Omnibus:                      231.168   Durbin-Watson:                   1.967
Prob(Omnibus):                  0.000   Jarque-Bera (JB):              463.805
Skew:                           1.089   Prob(JB):                    1.93e-101
Kurtosis:                       5.068   Cond. No.                     8.47e+20
==============================================================================

Warnings:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.
[2] The smallest eigenvalue is 3.33e-35. This might indicate that there are
strong multicollinearity problems or that the design matrix is singular.

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}130}]:} \PY{n}{Y\PYZus{}test} \PY{o}{=} \PY{n}{model2}\PY{o}{.}\PY{n}{predict}\PY{p}{(}\PY{n}{X\PYZus{}test}\PY{p}{)}
          \PY{n}{Y\PYZus{}test}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{,} \PY{n+nb}{len}\PY{p}{(}\PY{n}{Y\PYZus{}test}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}130}]:} (203245    1178.080617
           620104     361.238682
           437782     278.841313
           84434      277.984098
           558155     392.230070
           dtype: float64, 544)
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}131}]:} \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{TSS = }\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{model2}\PY{o}{.}\PY{n}{uncentered\PYZus{}tss}\PY{p}{)}
          \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{ESS = }\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{model2}\PY{o}{.}\PY{n}{mse\PYZus{}model}\PY{p}{)}
          \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{RSS = }\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{model2}\PY{o}{.}\PY{n}{ssr}\PY{p}{)}
          \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{ESS + RSS = }\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{model2}\PY{o}{.}\PY{n}{mse\PYZus{}model} \PY{o}{+} \PY{n}{model2}\PY{o}{.}\PY{n}{ssr}\PY{p}{)}
          \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{R squared = }\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{model2}\PY{o}{.}\PY{n}{rsquared}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
TSS =  719554019.0
ESS =  7326123.00582538
RSS =  91490034.43885678
ESS + RSS =  98816157.44468217
R squared =  0.5100400899586734

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}132}]:} \PY{n}{sm}\PY{o}{.}\PY{n}{stats}\PY{o}{.}\PY{n}{anova\PYZus{}lm}\PY{p}{(}\PY{n}{model2}\PY{p}{,} \PY{n}{typ}\PY{o}{=}\PY{l+m+mi}{2}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}132}]:}                           sum\_sq      df            F         PR(>F)
          vendor\_id           3.467636e+04     1.0     0.462402   4.966326e-01
          passenger\_count     5.646874e+04     1.0     0.752998   3.856992e-01
          pickup\_longitude    1.830511e+04     1.0     0.244095   6.213532e-01
          pickup\_latitude     2.314520e+05     1.0     3.086363   7.920193e-02
          dropoff\_longitude   3.270506e+03     1.0     0.043611   8.346130e-01
          dropoff\_latitude    8.815414e+05     1.0    11.755166   6.269844e-04
          store\_and\_fwd\_flag  2.200338e+05     1.0     2.934103   8.698089e-02
          pick\_dayofweek      4.127544e+05     1.0     5.503991   1.913251e-02
          pick\_dayofmonth     4.146226e+05     1.0     5.528903   1.886320e-02
          pick\_datehour       1.760408e+03     1.0     0.023475   8.782545e-01
          distance            8.667435e+07     1.0  1155.783880  8.954278e-179
          pickup\_pca0         1.576360e+05     1.0     2.102042   1.473596e-01
          pickup\_pca1         8.530709e+04     1.0     1.137552   2.863813e-01
          dropoff\_pca0        1.298636e+06     1.0    17.317034   3.385245e-05
          dropoff\_pca1        9.248166e+03     1.0     0.123322   7.255194e-01
          pickup\_cluster      2.456211e+05     1.0     3.275305   7.057585e-02
          dropoff\_cluster     4.978434e+02     1.0     0.006639   9.350753e-01
          Residual            9.149003e+07  1220.0          NaN            NaN
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}133}]:} \PY{c+c1}{\PYZsh{} X\PYZus{}train2 = pd.DataFrame(scale(X\PYZus{}train), columns = Index1)}
          \PY{c+c1}{\PYZsh{} X\PYZus{}train2.head(), len(X\PYZus{}train2)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}134}]:} \PY{c+c1}{\PYZsh{} len(Y\PYZus{}train)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}135}]:} \PY{n}{model3} \PY{o}{=} \PY{n}{sm}\PY{o}{.}\PY{n}{OLS}\PY{o}{.}\PY{n}{from\PYZus{}formula}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Y\PYZus{}train \PYZti{} scale(X\PYZus{}train)}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{data}\PY{o}{=}\PY{n}{train}\PY{p}{)}\PY{o}{.}\PY{n}{fit}\PY{p}{(}\PY{p}{)}
          \PY{n+nb}{print}\PY{p}{(}\PY{n}{model3}\PY{o}{.}\PY{n}{summary}\PY{p}{(}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
                            OLS Regression Results                            
==============================================================================
Dep. Variable:                Y\_train   R-squared:                       0.510
Model:                            OLS   Adj. R-squared:                  0.505
Method:                 Least Squares   F-statistic:                     97.69
Date:                Mon, 05 Mar 2018   Prob (F-statistic):          1.85e-178
Time:                        01:05:41   Log-Likelihood:                -8669.8
No. Observations:                1234   AIC:                         1.737e+04
Df Residuals:                    1220   BIC:                         1.744e+04
Df Model:                          13                                         
Covariance Type:            nonrobust                                         
======================================================================================
                         coef    std err          t      P>|t|      [0.025      0.975]
--------------------------------------------------------------------------------------
Intercept            657.1045      7.796     84.292      0.000     641.810     672.399
scale(X\_train)[0]     -5.6301      8.280     -0.680      0.497     -21.874      10.614
scale(X\_train)[1]      7.1914      8.287      0.868      0.386      -9.068      23.451
scale(X\_train)[2]      0.8876      3.853      0.230      0.818      -6.673       8.448
scale(X\_train)[3]      8.2366      4.574      1.801      0.072      -0.737      17.210
scale(X\_train)[4]     -9.3479      4.141     -2.258      0.024     -17.471      -1.224
scale(X\_train)[5]    -17.2104      4.416     -3.897      0.000     -25.874      -8.547
scale(X\_train)[6]     13.5174      7.891      1.713      0.087      -1.965      29.000
scale(X\_train)[7]    -18.5299      7.898     -2.346      0.019     -34.026      -3.034
scale(X\_train)[8]     18.3741      7.814      2.351      0.019       3.043      33.705
scale(X\_train)[9]      1.2082      7.886      0.153      0.878     -14.263      16.679
scale(X\_train)[10]   272.2832      8.009     33.997      0.000     256.570     287.996
scale(X\_train)[11]     6.0339      3.777      1.597      0.110      -1.376      13.444
scale(X\_train)[12]    -8.3261      6.619     -1.258      0.209     -21.313       4.661
scale(X\_train)[13]   -15.8532      3.778     -4.196      0.000     -23.266      -8.441
scale(X\_train)[14]     7.3934      6.355      1.163      0.245      -5.075      19.861
scale(X\_train)[15]    14.2025      7.848      1.810      0.071      -1.194      29.599
scale(X\_train)[16]    -0.6376      7.825     -0.081      0.935     -15.990      14.715
==============================================================================
Omnibus:                      231.168   Durbin-Watson:                   1.967
Prob(Omnibus):                  0.000   Jarque-Bera (JB):              463.805
Skew:                           1.089   Prob(JB):                    1.93e-101
Kurtosis:                       5.068   Cond. No.                     1.89e+16
==============================================================================

Warnings:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.
[2] The smallest eigenvalue is 1.46e-29. This might indicate that there are
strong multicollinearity problems or that the design matrix is singular.

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}136}]:} \PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{preprocessing} \PY{k}{import} \PY{n}{scale}\PY{p}{,} \PY{n}{robust\PYZus{}scale}\PY{p}{,} \PY{n}{minmax\PYZus{}scale}\PY{p}{,} \PY{n}{maxabs\PYZus{}scale}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}137}]:} \PY{n}{model4} \PY{o}{=} \PY{n}{sm}\PY{o}{.}\PY{n}{OLS}\PY{o}{.}\PY{n}{from\PYZus{}formula}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{trip\PYZus{}duration \PYZti{} robust\PYZus{}scale(X\PYZus{}train)}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{data}\PY{o}{=}\PY{n}{train}\PY{p}{)}\PY{o}{.}\PY{n}{fit}\PY{p}{(}\PY{p}{)}
          \PY{n+nb}{print}\PY{p}{(}\PY{n}{model4}\PY{o}{.}\PY{n}{summary}\PY{p}{(}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
                            OLS Regression Results                            
==============================================================================
Dep. Variable:          trip\_duration   R-squared:                       0.510
Model:                            OLS   Adj. R-squared:                  0.505
Method:                 Least Squares   F-statistic:                     97.69
Date:                Mon, 05 Mar 2018   Prob (F-statistic):          1.85e-178
Time:                        01:05:47   Log-Likelihood:                -8669.8
No. Observations:                1234   AIC:                         1.737e+04
Df Residuals:                    1220   BIC:                         1.744e+04
Df Model:                          13                                         
Covariance Type:            nonrobust                                         
=============================================================================================
                                coef    std err          t      P>|t|      [0.025      0.975]
---------------------------------------------------------------------------------------------
Intercept                   571.5043     13.061     43.757      0.000     545.880     597.128
robust\_scale(X\_train)[0]    -11.2662     16.568     -0.680      0.497     -43.771      21.239
robust\_scale(X\_train)[1]      5.4122      6.237      0.868      0.386      -6.824      17.649
robust\_scale(X\_train)[2]     32.7959      5.442      6.026      0.000      22.119      43.473
robust\_scale(X\_train)[3]    -10.9253      6.537     -1.671      0.095     -23.751       1.900
robust\_scale(X\_train)[4]     10.7398      5.188      2.070      0.039       0.562      20.918
robust\_scale(X\_train)[5]    -43.1444      5.805     -7.432      0.000     -54.533     -31.756
robust\_scale(X\_train)[6]    158.8617     92.743      1.713      0.087     -23.092     340.815
robust\_scale(X\_train)[7]    -38.0144     16.204     -2.346      0.019     -69.804      -6.225
robust\_scale(X\_train)[8]     32.9174     13.999      2.351      0.019       5.452      60.383
robust\_scale(X\_train)[9]      1.8874     12.318      0.153      0.878     -22.280      26.055
robust\_scale(X\_train)[10]   342.5707     10.077     33.997      0.000     322.801     362.340
robust\_scale(X\_train)[11]     5.1453      4.821      1.067      0.286      -4.314      14.604
robust\_scale(X\_train)[12]   -33.6698      9.018     -3.733      0.000     -51.363     -15.977
robust\_scale(X\_train)[13]   -20.2519      4.648     -4.357      0.000     -29.370     -11.134
robust\_scale(X\_train)[14]    -8.6324      7.842     -1.101      0.271     -24.017       6.752
robust\_scale(X\_train)[15]    26.8747     14.850      1.810      0.071      -2.259      56.008
robust\_scale(X\_train)[16]    -1.1110     13.635     -0.081      0.935     -27.862      25.640
==============================================================================
Omnibus:                      231.168   Durbin-Watson:                   1.967
Prob(Omnibus):                  0.000   Jarque-Bera (JB):              463.805
Skew:                           1.089   Prob(JB):                    1.93e-101
Kurtosis:                       5.068   Cond. No.                     1.36e+16
==============================================================================

Warnings:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.
[2] The smallest eigenvalue is 1.76e-29. This might indicate that there are
strong multicollinearity problems or that the design matrix is singular.

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}90}]:} \PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{datasets} \PY{k}{import} \PY{n}{load\PYZus{}iris}
         
         \PY{n}{X\PYZus{}train2} \PY{o}{=} \PY{n}{normalize}\PY{p}{(}\PY{n}{X\PYZus{}train}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}98}]:} \PY{n}{X\PYZus{}test2} \PY{o}{=} \PY{n}{normalize}\PY{p}{(}\PY{n}{X\PYZus{}test1}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}99}]:} \PY{n+nb}{len}\PY{p}{(}\PY{n}{X\PYZus{}test2}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}99}]:} 625134
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}91}]:} \PY{n}{X\PYZus{}train2}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}91}]:} array([[ 1.57838783e-02,  1.57838783e-02, -5.83932026e-01, {\ldots},
                  1.36472271e-04,  2.52542052e-01,  1.34162965e-01],
                [ 1.14105786e-02,  1.14105786e-02, -4.22089769e-01, {\ldots},
                 -2.84826002e-06,  5.36297192e-01,  4.90654878e-01],
                [ 6.69513429e-03,  6.69513429e-03, -4.95234444e-01, {\ldots},
                  3.09195531e-05,  2.00854029e-02,  5.89171818e-01],
                {\ldots},
                [ 1.37778688e-02,  6.88893439e-03, -5.09674031e-01, {\ldots},
                  9.18857430e-05,  4.13336063e-01,  3.72002457e-01],
                [ 7.30710817e-03,  7.30710817e-03, -5.40626103e-01, {\ldots},
                 -7.28316715e-06,  4.23812274e-01,  2.33827461e-01],
                [ 1.43650788e-02,  7.18253941e-03, -5.31438597e-01, {\ldots},
                 -8.34033792e-05,  0.00000000e+00,  4.88412680e-01]])
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}92}]:} \PY{n}{model5\PYZus{}1} \PY{o}{=} \PY{n}{sm}\PY{o}{.}\PY{n}{OLS}\PY{o}{.}\PY{n}{from\PYZus{}formula}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{trip\PYZus{}duration \PYZti{} X\PYZus{}train2}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{data}\PY{o}{=}\PY{n}{train}\PY{p}{)}\PY{o}{.}\PY{n}{fit}\PY{p}{(}\PY{p}{)}
         \PY{n+nb}{print}\PY{p}{(}\PY{n}{model5\PYZus{}1}\PY{o}{.}\PY{n}{summary}\PY{p}{(}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
                            OLS Regression Results                            
==============================================================================
Dep. Variable:          trip\_duration   R-squared:                       0.507
Model:                            OLS   Adj. R-squared:                  0.502
Method:                 Least Squares   F-statistic:                     89.68
Date:                Mon, 05 Mar 2018   Prob (F-statistic):          4.93e-176
Time:                        20:23:48   Log-Likelihood:                -8673.2
No. Observations:                1234   AIC:                         1.738e+04
Df Residuals:                    1219   BIC:                         1.745e+04
Df Model:                          14                                         
Covariance Type:            nonrobust                                         
================================================================================
                   coef    std err          t      P>|t|      [0.025      0.975]
--------------------------------------------------------------------------------
Intercept      556.7370    327.307      1.701      0.089     -85.410    1198.884
X\_train2[0]  -1109.5269   2360.992     -0.470      0.638   -5741.585    3522.531
X\_train2[1]    789.5087    886.419      0.891      0.373    -949.567    2528.585
X\_train2[2]  -8644.6462   3.98e+04     -0.217      0.828   -8.66e+04    6.93e+04
X\_train2[3]   7.055e+04   3.94e+04      1.789      0.074   -6829.774    1.48e+05
X\_train2[4]  -1.833e+04   4.08e+04     -0.450      0.653   -9.83e+04    6.17e+04
X\_train2[5]  -1.208e+05    3.5e+04     -3.448      0.001   -1.89e+05    -5.2e+04
X\_train2[6]   2.778e+04   1.33e+04      2.090      0.037    1701.157    5.39e+04
X\_train2[7]  -1427.3010    574.238     -2.486      0.013   -2553.906    -300.696
X\_train2[8]   1635.0240    664.226      2.462      0.014     331.872    2938.176
X\_train2[9]     40.4672    175.720      0.230      0.818    -304.280     385.215
X\_train2[10]  2.635e+04    778.435     33.846      0.000    2.48e+04    2.79e+04
X\_train2[11]  4.738e+04   2.94e+04      1.614      0.107   -1.02e+04    1.05e+05
X\_train2[12] -1.072e+05   8.61e+04     -1.244      0.214   -2.76e+05    6.18e+04
X\_train2[13] -1.158e+05    2.6e+04     -4.451      0.000   -1.67e+05   -6.48e+04
X\_train2[14] -6910.7634   6.91e+04     -0.100      0.920   -1.42e+05    1.29e+05
X\_train2[15]    93.8542    113.678      0.826      0.409    -129.171     316.880
X\_train2[16]    19.6053    116.673      0.168      0.867    -209.297     248.508
==============================================================================
Omnibus:                      235.648   Durbin-Watson:                   1.972
Prob(Omnibus):                  0.000   Jarque-Bera (JB):              486.701
Skew:                           1.095   Prob(JB):                    2.06e-106
Kurtosis:                       5.161   Cond. No.                     1.26e+17
==============================================================================

Warnings:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.
[2] The smallest eigenvalue is 1.48e-31. This might indicate that there are
strong multicollinearity problems or that the design matrix is singular.

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}93}]:} \PY{n}{model5} \PY{o}{=} \PY{n}{sm}\PY{o}{.}\PY{n}{OLS}\PY{o}{.}\PY{n}{from\PYZus{}formula}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{trip\PYZus{}duration \PYZti{} X\PYZus{}train2}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{data}\PY{o}{=}\PY{n}{train}\PY{p}{)}\PY{o}{.}\PY{n}{fit}\PY{p}{(}\PY{p}{)}
         \PY{n+nb}{print}\PY{p}{(}\PY{n}{model5}\PY{o}{.}\PY{n}{summary}\PY{p}{(}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
                            OLS Regression Results                            
==============================================================================
Dep. Variable:          trip\_duration   R-squared:                       0.507
Model:                            OLS   Adj. R-squared:                  0.502
Method:                 Least Squares   F-statistic:                     89.68
Date:                Mon, 05 Mar 2018   Prob (F-statistic):          4.93e-176
Time:                        20:23:48   Log-Likelihood:                -8673.2
No. Observations:                1234   AIC:                         1.738e+04
Df Residuals:                    1219   BIC:                         1.745e+04
Df Model:                          14                                         
Covariance Type:            nonrobust                                         
================================================================================
                   coef    std err          t      P>|t|      [0.025      0.975]
--------------------------------------------------------------------------------
Intercept      556.7370    327.307      1.701      0.089     -85.410    1198.884
X\_train2[0]  -1109.5269   2360.992     -0.470      0.638   -5741.585    3522.531
X\_train2[1]    789.5087    886.419      0.891      0.373    -949.567    2528.585
X\_train2[2]  -8644.6462   3.98e+04     -0.217      0.828   -8.66e+04    6.93e+04
X\_train2[3]   7.055e+04   3.94e+04      1.789      0.074   -6829.774    1.48e+05
X\_train2[4]  -1.833e+04   4.08e+04     -0.450      0.653   -9.83e+04    6.17e+04
X\_train2[5]  -1.208e+05    3.5e+04     -3.448      0.001   -1.89e+05    -5.2e+04
X\_train2[6]   2.778e+04   1.33e+04      2.090      0.037    1701.157    5.39e+04
X\_train2[7]  -1427.3010    574.238     -2.486      0.013   -2553.906    -300.696
X\_train2[8]   1635.0240    664.226      2.462      0.014     331.872    2938.176
X\_train2[9]     40.4672    175.720      0.230      0.818    -304.280     385.215
X\_train2[10]  2.635e+04    778.435     33.846      0.000    2.48e+04    2.79e+04
X\_train2[11]  4.738e+04   2.94e+04      1.614      0.107   -1.02e+04    1.05e+05
X\_train2[12] -1.072e+05   8.61e+04     -1.244      0.214   -2.76e+05    6.18e+04
X\_train2[13] -1.158e+05    2.6e+04     -4.451      0.000   -1.67e+05   -6.48e+04
X\_train2[14] -6910.7634   6.91e+04     -0.100      0.920   -1.42e+05    1.29e+05
X\_train2[15]    93.8542    113.678      0.826      0.409    -129.171     316.880
X\_train2[16]    19.6053    116.673      0.168      0.867    -209.297     248.508
==============================================================================
Omnibus:                      235.648   Durbin-Watson:                   1.972
Prob(Omnibus):                  0.000   Jarque-Bera (JB):              486.701
Skew:                           1.095   Prob(JB):                    2.06e-106
Kurtosis:                       5.161   Cond. No.                     1.26e+17
==============================================================================

Warnings:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.
[2] The smallest eigenvalue is 1.48e-31. This might indicate that there are
strong multicollinearity problems or that the design matrix is singular.

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}94}]:} \PY{n}{model6} \PY{o}{=} \PY{n}{sm}\PY{o}{.}\PY{n}{OLS}\PY{o}{.}\PY{n}{from\PYZus{}formula}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{trip\PYZus{}duration \PYZti{} scale(X\PYZus{}train2)}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{data}\PY{o}{=}\PY{n}{train}\PY{p}{)}\PY{o}{.}\PY{n}{fit}\PY{p}{(}\PY{p}{)}
         \PY{n+nb}{print}\PY{p}{(}\PY{n}{model6}\PY{o}{.}\PY{n}{summary}\PY{p}{(}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
                            OLS Regression Results                            
==============================================================================
Dep. Variable:          trip\_duration   R-squared:                       0.507
Model:                            OLS   Adj. R-squared:                  0.502
Method:                 Least Squares   F-statistic:                     89.68
Date:                Mon, 05 Mar 2018   Prob (F-statistic):          4.93e-176
Time:                        20:23:49   Log-Likelihood:                -8673.2
No. Observations:                1234   AIC:                         1.738e+04
Df Residuals:                    1219   BIC:                         1.745e+04
Df Model:                          14                                         
Covariance Type:            nonrobust                                         
=======================================================================================
                          coef    std err          t      P>|t|      [0.025      0.975]
---------------------------------------------------------------------------------------
Intercept             657.1045      7.820     84.029      0.000     641.762     672.447
scale(X\_train2)[0]     -4.0933      8.710     -0.470      0.638     -21.182      12.995
scale(X\_train2)[1]      7.4590      8.375      0.891      0.373      -8.971      23.889
scale(X\_train2)[2]      8.9719      6.479      1.385      0.166      -3.739      21.683
scale(X\_train2)[3]     -8.8577      6.481     -1.367      0.172     -21.572       3.857
scale(X\_train2)[4]      8.8704      6.480      1.369      0.171      -3.842      21.583
scale(X\_train2)[5]     -9.1936      6.481     -1.418      0.156     -21.909       3.522
scale(X\_train2)[6]     16.5450      7.917      2.090      0.037       1.013      32.077
scale(X\_train2)[7]    -20.0144      8.052     -2.486      0.013     -35.812      -4.217
scale(X\_train2)[8]     19.7389      8.019      2.462      0.014       4.007      35.471
scale(X\_train2)[9]      1.8636      8.092      0.230      0.818     -14.013      17.740
scale(X\_train2)[10]   274.7282      8.117     33.846      0.000     258.803     290.653
scale(X\_train2)[11]    17.0691      9.922      1.720      0.086      -2.396      36.534
scale(X\_train2)[12]   -10.6898      8.624     -1.240      0.215     -27.610       6.230
scale(X\_train2)[13]   -42.9910      9.785     -4.393      0.000     -62.189     -23.793
scale(X\_train2)[14]     3.9750      8.728      0.455      0.649     -13.149      21.099
scale(X\_train2)[15]    17.7401     21.487      0.826      0.409     -24.416      59.896
scale(X\_train2)[16]     3.5552     21.157      0.168      0.867     -37.954      45.064
==============================================================================
Omnibus:                      235.648   Durbin-Watson:                   1.972
Prob(Omnibus):                  0.000   Jarque-Bera (JB):              486.701
Skew:                           1.095   Prob(JB):                    2.06e-106
Kurtosis:                       5.161   Cond. No.                     4.08e+15
==============================================================================

Warnings:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.
[2] The smallest eigenvalue is 3.7e-28. This might indicate that there are
strong multicollinearity problems or that the design matrix is singular.

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}96}]:} \PY{n}{X\PYZus{}test1}\PY{o}{.}\PY{n}{info}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
<class 'pandas.core.frame.DataFrame'>
RangeIndex: 625134 entries, 0 to 625133
Data columns (total 17 columns):
vendor\_id             625134 non-null int64
passenger\_count       625134 non-null int64
pickup\_longitude      625134 non-null float64
pickup\_latitude       625134 non-null float64
dropoff\_longitude     625134 non-null float64
dropoff\_latitude      625134 non-null float64
store\_and\_fwd\_flag    625134 non-null int64
pick\_dayofweek        625134 non-null int64
pick\_dayofmonth       625134 non-null int64
pick\_datehour         625134 non-null int64
distance              625134 non-null float64
pickup\_pca0           625134 non-null float64
pickup\_pca1           625134 non-null float64
dropoff\_pca0          625134 non-null float64
dropoff\_pca1          625134 non-null float64
pickup\_cluster        625134 non-null int32
dropoff\_cluster       625134 non-null int32
dtypes: float64(9), int32(2), int64(6)
memory usage: 76.3 MB

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}103}]:} \PY{n}{X\PYZus{}test3} \PY{o}{=} \PY{n}{scale}\PY{p}{(}\PY{n}{X\PYZus{}test2}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]

        ---------------------------------------------------------------------------

        NameError                                 Traceback (most recent call last)

        <ipython-input-103-ebc078b175cb> in <module>()
    ----> 1 X\_test3 = scale(X\_test2)
    

        NameError: name 'scale' is not defined

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}104}]:} \PY{n}{Y\PYZus{}test5} \PY{o}{=} \PY{n}{model5}\PY{o}{.}\PY{n}{predict}\PY{p}{(}\PY{n}{X\PYZus{}test}\PY{p}{)}
          \PY{n}{Y\PYZus{}test5}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{,} \PY{n+nb}{len}\PY{p}{(}\PY{n}{Y\PYZus{}test5}\PY{p}{)}
          \PY{n}{sub} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{p}{(}\PY{p}{)}
          \PY{n}{sub}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Id}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{test1}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{id}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}
          \PY{n}{sub}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{trip\PYZus{}duration}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{=} \PY{n}{Y\PYZus{}test5}
          \PY{n}{sub}\PY{o}{.}\PY{n}{to\PYZus{}csv}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{submission\PYZus{}model5.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{index}\PY{o}{=}\PY{k+kc}{False}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]

        ---------------------------------------------------------------------------

        PatsyError                                Traceback (most recent call last)

        <ipython-input-104-296bcc8d4ce1> in <module>()
    ----> 1 Y\_test5 = model5.predict(X\_test)
          2 Y\_test5.head(), len(Y\_test5)
          3 sub = pd.DataFrame()
          4 sub['Id'] = test1["id"]
          5 sub['trip\_duration'] = Y\_test5


        \textasciitilde{}/enter/lib/python3.6/site-packages/statsmodels/base/model.py in predict(self, exog, transform, *args, **kwargs)
        774                 exog\_index = exog.index
        775             exog = dmatrix(self.model.data.design\_info.builder,
    --> 776                            exog, return\_type="dataframe")
        777             if len(exog) < len(exog\_index):
        778                 \# missing values, rows have been dropped


        \textasciitilde{}/enter/lib/python3.6/site-packages/patsy/highlevel.py in dmatrix(formula\_like, data, eval\_env, NA\_action, return\_type)
        289     eval\_env = EvalEnvironment.capture(eval\_env, reference=1)
        290     (lhs, rhs) = \_do\_highlevel\_design(formula\_like, data, eval\_env,
    --> 291                                       NA\_action, return\_type)
        292     if lhs.shape[1] != 0:
        293         raise PatsyError("encountered outcome variables for a model "


        \textasciitilde{}/enter/lib/python3.6/site-packages/patsy/highlevel.py in \_do\_highlevel\_design(formula\_like, data, eval\_env, NA\_action, return\_type)
        167         return build\_design\_matrices(design\_infos, data,
        168                                      NA\_action=NA\_action,
    --> 169                                      return\_type=return\_type)
        170     else:
        171         \# No builders, but maybe we can still get matrices


        \textasciitilde{}/enter/lib/python3.6/site-packages/patsy/build.py in build\_design\_matrices(design\_infos, data, NA\_action, return\_type, dtype)
        891                 name = factor\_info.factor.name()
        892                 origin = factor\_info.factor.origin
    --> 893                 rows\_checker.check(value.shape[0], name, origin)
        894                 if (have\_pandas
        895                     and isinstance(value, (pandas.Series, pandas.DataFrame))):


        \textasciitilde{}/enter/lib/python3.6/site-packages/patsy/build.py in check(self, seen\_value, desc, origin)
        793                 \# XX FIXME: this is a case where having discontiguous Origins
        794                 \# would be useful{\ldots}
    --> 795                 raise PatsyError(msg, origin)
        796 
        797 def build\_design\_matrices(design\_infos, data,


        PatsyError: Number of rows mismatch between data argument and X\_train2 (544 versus 1234)
        trip\_duration \textasciitilde{} X\_train2
                        \^{}\^{}\^{}\^{}\^{}\^{}\^{}\^{}

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}143}]:} \PY{n}{result6\PYZus{}1} \PY{o}{=} \PY{n}{sm}\PY{o}{.}\PY{n}{OLS}\PY{o}{.}\PY{n}{from\PYZus{}formula}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{trip\PYZus{}duration \PYZti{} scale(X\PYZus{}train2)}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{data}\PY{o}{=}\PY{n}{train}\PY{p}{)}\PY{o}{.}\PY{n}{fit\PYZus{}regularized}\PY{p}{(}\PY{n}{alpha}\PY{o}{=}\PY{l+m+mf}{0.01}\PY{p}{,} \PY{n}{L1\PYZus{}wt}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{)}
          \PY{n}{result6\PYZus{}1}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}143}]:} <statsmodels.base.elastic\_net.RegularizedResults at 0x7f4cfc3aec50>
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}144}]:} \PY{n}{result6\PYZus{}2} \PY{o}{=} \PY{n}{sm}\PY{o}{.}\PY{n}{OLS}\PY{o}{.}\PY{n}{from\PYZus{}formula}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{trip\PYZus{}duration \PYZti{} scale(X\PYZus{}train2)}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{data}\PY{o}{=}\PY{n}{train}\PY{p}{)}\PY{o}{.}\PY{n}{fit\PYZus{}regularized}\PY{p}{(}\PY{n}{alpha}\PY{o}{=}\PY{l+m+mf}{0.01}\PY{p}{,} \PY{n}{L1\PYZus{}wt}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}
          \PY{n}{result6\PYZus{}2}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}144}]:} <statsmodels.base.elastic\_net.RegularizedResultsWrapper at 0x7f4d3a01b4e0>
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}145}]:} \PY{n}{result6\PYZus{}3} \PY{o}{=} \PY{n}{sm}\PY{o}{.}\PY{n}{OLS}\PY{o}{.}\PY{n}{from\PYZus{}formula}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{trip\PYZus{}duration \PYZti{} scale(X\PYZus{}train2)}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{data}\PY{o}{=}\PY{n}{train}\PY{p}{)}\PY{o}{.}\PY{n}{fit\PYZus{}regularized}\PY{p}{(}\PY{n}{alpha}\PY{o}{=}\PY{l+m+mf}{0.01}\PY{p}{,} \PY{n}{L1\PYZus{}wt}\PY{o}{=}\PY{l+m+mf}{0.5}\PY{p}{)}
          \PY{n}{result6\PYZus{}3}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}145}]:} <statsmodels.base.elastic\_net.RegularizedResultsWrapper at 0x7f4cfc3cd940>
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}221}]:} \PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{metrics} \PY{k}{import} \PY{n}{mean\PYZus{}squared\PYZus{}error}
          
          \PY{k}{def} \PY{n+nf}{rmsle}\PY{p}{(}\PY{n}{y}\PY{p}{,} \PY{n}{y\PYZus{}pred}\PY{p}{)}\PY{p}{:}
              \PY{k}{return} \PY{n}{np}\PY{o}{.}\PY{n}{sqrt}\PY{p}{(}\PY{n}{mean\PYZus{}squared\PYZus{}error}\PY{p}{(}\PY{n}{y}\PY{p}{,} \PY{n}{y\PYZus{}pred}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}222}]:} \PY{n}{Y\PYZus{}test}\PY{o}{.}\PY{n}{shape}\PY{p}{,} \PY{n}{X\PYZus{}test}\PY{o}{.}\PY{n}{shape}\PY{p}{,} \PY{n}{Y\PYZus{}train}\PY{o}{.}\PY{n}{shape}\PY{p}{,} \PY{n}{X\PYZus{}train}\PY{o}{.}\PY{n}{shape}\PY{p}{,} 
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}222}]:} ((544,), (544, 11), (1234,), (1234, 11))
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}224}]:} \PY{n}{Y\PYZus{}test} \PY{o}{=} \PY{n}{model2}\PY{o}{.}\PY{n}{predict}\PY{p}{(}\PY{n}{X\PYZus{}test}\PY{p}{)}
          \PY{n}{Y\PYZus{}test}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{,} \PY{n+nb}{len}\PY{p}{(}\PY{n}{Y\PYZus{}test}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}224}]:} (203245    1163.862951
           620104     342.687858
           437782     282.015555
           84434      265.717348
           558155     389.443627
           dtype: float64, 544)
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}225}]:} \PY{n}{Y\PYZus{}train1} \PY{o}{=} \PY{n}{model2}\PY{o}{.}\PY{n}{predict}\PY{p}{(}\PY{n}{X\PYZus{}train}\PY{p}{)}
          \PY{n}{Y\PYZus{}train1}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{,} \PY{n+nb}{len}\PY{p}{(}\PY{n}{Y\PYZus{}train1}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}225}]:} (100879     1280.651925
           203245      507.486881
           1133010     603.554269
           1102498     456.396830
           557489     1293.770425
           dtype: float64, 1234)
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}68}]:} \PY{c+c1}{\PYZsh{} rmsle(Y\PYZus{}train, Y\PYZus{}train1)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}182}]:} \PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{metrics} \PY{k}{import} \PY{n}{mean\PYZus{}squared\PYZus{}error}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}183}]:} \PY{c+c1}{\PYZsh{} mean\PYZus{}squared\PYZus{}error(Y\PYZus{}train, Y\PYZus{}test) }
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}66}]:} \PY{k+kn}{import} \PY{n+nn}{statsmodels}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}67}]:} \PY{c+c1}{\PYZsh{}influence plot}
         \PY{n}{statsmodels}\PY{o}{.}\PY{n}{graphics}\PY{o}{.}\PY{n}{regressionplots}\PY{o}{.}\PY{n}{influence\PYZus{}plot}\PY{p}{(}\PY{n}{model2}\PY{p}{,} \PY{n}{criterion}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cooks}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}

\texttt{\color{outcolor}Out[{\color{outcolor}67}]:}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_189_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_189_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}69}]:} \PY{c+c1}{\PYZsh{}influence plot}
         \PY{n}{statsmodels}\PY{o}{.}\PY{n}{graphics}\PY{o}{.}\PY{n}{regressionplots}\PY{o}{.}\PY{n}{influence\PYZus{}plot}\PY{p}{(}\PY{n}{model6}\PY{p}{,} \PY{n}{criterion}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cooks}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}

\texttt{\color{outcolor}Out[{\color{outcolor}69}]:}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_190_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_190_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}79}]:} \PY{k+kn}{import} \PY{n+nn}{plotly}\PY{n+nn}{.}\PY{n+nn}{plotly} \PY{k}{as} \PY{n+nn}{py}
         \PY{k+kn}{import} \PY{n+nn}{plotly}\PY{n+nn}{.}\PY{n+nn}{graph\PYZus{}objs} \PY{k}{as} \PY{n+nn}{go}
         \PY{k+kn}{from} \PY{n+nn}{plotly}\PY{n+nn}{.}\PY{n+nn}{tools} \PY{k}{import} \PY{n}{FigureFactory} \PY{k}{as} \PY{n}{FF}
         
         \PY{k+kn}{import} \PY{n+nn}{numpy} \PY{k}{as} \PY{n+nn}{np}
         \PY{k+kn}{import} \PY{n+nn}{pandas} \PY{k}{as} \PY{n+nn}{pd}
         \PY{k+kn}{import} \PY{n+nn}{scipy}
         
         \PY{k+kn}{import} \PY{n+nn}{statsmodels}
         \PY{k+kn}{import} \PY{n+nn}{statsmodels}\PY{n+nn}{.}\PY{n+nn}{api} \PY{k}{as} \PY{n+nn}{sm}
         \PY{k+kn}{from} \PY{n+nn}{statsmodels}\PY{n+nn}{.}\PY{n+nn}{formula}\PY{n+nn}{.}\PY{n+nn}{api} \PY{k}{import} \PY{n}{ols}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}80}]:} \PY{n}{Y\PYZus{}test} \PY{o}{=} \PY{n}{OLS\PYZus{}model}\PY{o}{.}\PY{n}{predict}\PY{p}{(}\PY{n}{X\PYZus{}test}\PY{p}{)}
         \PY{n}{Y\PYZus{}test}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{,} \PY{n+nb}{len}\PY{p}{(}\PY{n}{Y\PYZus{}test}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]

        ---------------------------------------------------------------------------

        ValueError                                Traceback (most recent call last)

        <ipython-input-80-178138275098> in <module>()
    ----> 1 Y\_test = OLS\_model.predict(X\_test)
          2 Y\_test.head(), len(Y\_test)


        \textasciitilde{}/enter/lib/python3.6/site-packages/statsmodels/base/model.py in predict(self, exog, transform, *args, **kwargs)
        790             exog = np.atleast\_2d(exog)  \# needed in count model shape[1]
        791 
    --> 792         predict\_results = self.model.predict(self.params, exog, *args, **kwargs)
        793 
        794         if exog\_index is not None and not hasattr(predict\_results, 'predicted\_values'):


        \textasciitilde{}/enter/lib/python3.6/site-packages/statsmodels/regression/linear\_model.py in predict(self, params, exog)
        259             exog = self.exog
        260 
    --> 261         return np.dot(exog, params)
        262 
        263     def get\_distribution(self, params, scale, exog=None, dist\_class=None):


        ValueError: shapes (2,2) and (11,) not aligned: 2 (dim 1) != 11 (dim 0)

    \end{Verbatim}

    \section{model validation score}\label{model-validation-score}

    \section{RMSLE}\label{rmsle}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}70}]:} \PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{metrics} \PY{k}{import} \PY{n}{mean\PYZus{}squared\PYZus{}error}
         
         \PY{k}{def} \PY{n+nf}{rmsle}\PY{p}{(}\PY{n}{y}\PY{p}{,} \PY{n}{y\PYZus{}pred}\PY{p}{)}\PY{p}{:}
             \PY{k}{return} \PY{n}{np}\PY{o}{.}\PY{n}{sqrt}\PY{p}{(}\PY{n}{mean\PYZus{}squared\PYZus{}error}\PY{p}{(}\PY{n}{y}\PY{p}{,} \PY{n}{y\PYZus{}pred}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}155}]:} \PY{n}{Y\PYZus{}train1} \PY{o}{=} \PY{n}{OLS\PYZus{}model}\PY{o}{.}\PY{n}{predict}\PY{p}{(}\PY{n}{X\PYZus{}train}\PY{p}{)}
          \PY{n}{Y\PYZus{}train1}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}\PY{p}{,} \PY{n+nb}{len}\PY{p}{(}\PY{n}{Y\PYZus{}train1}\PY{p}{)}\PY{p}{,} \PY{n}{rmsle}\PY{p}{(}\PY{n}{Y\PYZus{}train}\PY{p}{,} \PY{n}{Y\PYZus{}train1}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}155}]:} (100879     1285.174817
           203245      507.305781
           1133010     606.051511
           1102498     453.519926
           557489     1288.112839
           dtype: float64, 1234, 272.69107745791587)
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}72}]:} \PY{n}{rmsle}\PY{p}{(}\PY{n}{Y\PYZus{}train}\PY{p}{,} \PY{n}{Y\PYZus{}train1}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}72}]:} 272.69107745791587
\end{Verbatim}
            
    \section{kaggle data submission}\label{kaggle-data-submission}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}169}]:} \PY{c+c1}{\PYZsh{} sub = pd.DataFrame()}
          \PY{c+c1}{\PYZsh{} sub[\PYZsq{}Id\PYZsq{}] = test[\PYZdq{}id\PYZdq{}]}
          \PY{c+c1}{\PYZsh{} sub[\PYZsq{}trip\PYZus{}duration\PYZsq{}] = Y\PYZus{}test}
          \PY{c+c1}{\PYZsh{} sub.to\PYZus{}csv(\PYZsq{}submission\PYZus{}sample.csv\PYZsq{},index=False)}
\end{Verbatim}


    \section{ridge}\label{ridge}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}62}]:} \PY{o}{\PYZgt{}\PYZgt{}}\PY{o}{\PYZgt{}}
         \PY{o}{\PYZgt{}\PYZgt{}}\PY{o}{\PYZgt{}} \PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{linear\PYZus{}model} \PY{k}{import} \PY{n}{Ridge}
         \PY{o}{\PYZgt{}\PYZgt{}}\PY{o}{\PYZgt{}} \PY{k+kn}{import} \PY{n+nn}{numpy} \PY{k}{as} \PY{n+nn}{np}
         
         \PY{n}{clf} \PY{o}{=} \PY{n}{Ridge}\PY{p}{(}\PY{n}{alpha}\PY{o}{=}\PY{l+m+mf}{1.0}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}63}]:} \PY{n}{clf}\PY{o}{.}\PY{n}{fit}\PY{p}{(}\PY{n}{X\PYZus{}train}\PY{p}{,} \PY{n}{Y\PYZus{}train}\PY{p}{)} 
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}63}]:} Ridge(alpha=1.0, copy\_X=True, fit\_intercept=True, max\_iter=None,
            normalize=False, random\_state=None, solver='auto', tol=0.001)
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}72}]:} \PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{linear\PYZus{}model} \PY{k}{import} \PY{n}{Ridge}
             \PY{c+c1}{\PYZsh{}Fit the model}
         \PY{n}{ridgereg} \PY{o}{=} \PY{n}{Ridge}\PY{p}{(}\PY{n}{normalize}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}
         \PY{n}{ridgereg}\PY{o}{.}\PY{n}{fit}\PY{p}{(}\PY{n}{X\PYZus{}train}\PY{p}{,} \PY{n}{Y\PYZus{}train}\PY{p}{)}
         \PY{n}{y\PYZus{}pred} \PY{o}{=} \PY{n}{ridgereg}\PY{o}{.}\PY{n}{predict}\PY{p}{(}\PY{n}{X\PYZus{}test}\PY{p}{)}
             
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}74}]:} \PY{n+nb}{len}\PY{p}{(}\PY{n}{y\PYZus{}pred}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}74}]:} 544
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor} }]:}     \PY{c+c1}{\PYZsh{}Return the result in pre\PYZhy{}defined format}
        \PY{n}{rss} \PY{o}{=} \PY{n+nb}{sum}\PY{p}{(}\PY{p}{(}\PY{n}{y\PYZus{}pred} \PY{o}{\PYZhy{}} \PY{n}{Y\PYZus{}train}\PY{p}{)}\PY{o}{*}\PY{o}{*}\PY{l+m+mi}{2}\PY{p}{)}
        \PY{n}{ret} \PY{o}{=} \PY{p}{[}\PY{n}{rss}\PY{p}{]}
        \PY{n}{ret}\PY{o}{.}\PY{n}{extend}\PY{p}{(}\PY{p}{[}\PY{n}{ridgereg}\PY{o}{.}\PY{n}{intercept\PYZus{}}\PY{p}{]}\PY{p}{)}
        \PY{n}{ret}\PY{o}{.}\PY{n}{extend}\PY{p}{(}\PY{n}{ridgereg}\PY{o}{.}\PY{n}{coef\PYZus{}}\PY{p}{)}
            
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}83}]:} 
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}83}]:} (100879     1246.099331
          203245      560.923062
          1133010     714.240959
          1102498     227.111347
          557489     1369.188706
          dtype: float64, 1234)
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}84}]:} 
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}84}]:} 254.67625658694774
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}87}]:} \PY{k+kn}{from} \PY{n+nn}{sklearn}\PY{n+nn}{.}\PY{n+nn}{cluster} \PY{k}{import} \PY{n}{KMeans}
         \PY{k+kn}{import} \PY{n+nn}{numpy} \PY{k}{as} \PY{n+nn}{np}
         \PY{n}{X} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{p}{[}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{,} \PY{l+m+mi}{2}\PY{p}{]}\PY{p}{,} \PY{p}{[}\PY{l+m+mi}{1}\PY{p}{,} \PY{l+m+mi}{4}\PY{p}{]}\PY{p}{,} \PY{p}{[}\PY{l+m+mi}{1}\PY{p}{,} \PY{l+m+mi}{0}\PY{p}{]}\PY{p}{,}
                        \PY{p}{[}\PY{l+m+mi}{4}\PY{p}{,} \PY{l+m+mi}{2}\PY{p}{]}\PY{p}{,} \PY{p}{[}\PY{l+m+mi}{4}\PY{p}{,} \PY{l+m+mi}{4}\PY{p}{]}\PY{p}{,} \PY{p}{[}\PY{l+m+mi}{4}\PY{p}{,} \PY{l+m+mi}{0}\PY{p}{]}\PY{p}{]}\PY{p}{)}
         \PY{n}{kmeans} \PY{o}{=} \PY{n}{KMeans}\PY{p}{(}\PY{n}{n\PYZus{}clusters}\PY{o}{=}\PY{l+m+mi}{2}\PY{p}{,} \PY{n}{random\PYZus{}state}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{)}\PY{o}{.}\PY{n}{fit}\PY{p}{(}\PY{n}{X}\PY{p}{)}
         \PY{n}{kmeans}\PY{o}{.}\PY{n}{labels\PYZus{}}
         \PY{n}{kmeans}\PY{o}{.}\PY{n}{predict}\PY{p}{(}\PY{p}{[}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{,} \PY{l+m+mi}{0}\PY{p}{]}\PY{p}{,} \PY{p}{[}\PY{l+m+mi}{4}\PY{p}{,} \PY{l+m+mi}{4}\PY{p}{]}\PY{p}{]}\PY{p}{)}
         \PY{n}{kmeans}\PY{o}{.}\PY{n}{cluster\PYZus{}centers\PYZus{}}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}87}]:} array([[1., 2.],
                [4., 2.]])
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}92}]:} \PY{n}{KMeans}\PY{o}{.}\PY{n}{fit}\PY{p}{(}\PY{n}{X}\PY{p}{,} \PY{n}{y}\PY{o}{=}\PY{k+kc}{None}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]

        ---------------------------------------------------------------------------

        TypeError                                 Traceback (most recent call last)

        <ipython-input-92-e4b9eb0e6792> in <module>()
    ----> 1 KMeans.fit(X, y=None)
    

        TypeError: fit() missing 1 required positional argument: 'X'

    \end{Verbatim}

    \section{leverage}\label{leverage}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}110}]:} \PY{n}{influence} \PY{o}{=} \PY{n}{model2}\PY{o}{.}\PY{n}{get\PYZus{}influence}\PY{p}{(}\PY{p}{)}
          \PY{n}{hat} \PY{o}{=} \PY{n}{influence}\PY{o}{.}\PY{n}{hat\PYZus{}matrix\PYZus{}diag}
          
          \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{,} \PY{l+m+mi}{2}\PY{p}{)}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{stem}\PY{p}{(}\PY{n}{hat}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_211_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}111}]:} \PY{n}{influence} \PY{o}{=} \PY{n}{model3}\PY{o}{.}\PY{n}{get\PYZus{}influence}\PY{p}{(}\PY{p}{)}
          \PY{n}{hat} \PY{o}{=} \PY{n}{influence}\PY{o}{.}\PY{n}{hat\PYZus{}matrix\PYZus{}diag}
          
          \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{,} \PY{l+m+mi}{2}\PY{p}{)}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{stem}\PY{p}{(}\PY{n}{hat}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_212_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}112}]:} \PY{n}{influence} \PY{o}{=} \PY{n}{model5}\PY{o}{.}\PY{n}{get\PYZus{}influence}\PY{p}{(}\PY{p}{)}
          \PY{n}{hat} \PY{o}{=} \PY{n}{influence}\PY{o}{.}\PY{n}{hat\PYZus{}matrix\PYZus{}diag}
          
          \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{,} \PY{l+m+mi}{2}\PY{p}{)}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{stem}\PY{p}{(}\PY{n}{hat}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_213_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}113}]:} \PY{n}{influence} \PY{o}{=} \PY{n}{model6}\PY{o}{.}\PY{n}{get\PYZus{}influence}\PY{p}{(}\PY{p}{)}
          \PY{n}{hat} \PY{o}{=} \PY{n}{influence}\PY{o}{.}\PY{n}{hat\PYZus{}matrix\PYZus{}diag}
          
          \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{,} \PY{l+m+mi}{2}\PY{p}{)}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{stem}\PY{p}{(}\PY{n}{hat}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_214_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \section{Appendix}\label{appendix}

    \subsubsection{1. degree of decimal}\label{degree-of-decimal}

\begin{itemize}
\tightlist
\item
  0.000001 = 1.11mm
\end{itemize}

\subsubsection{2. spatial data analysis}\label{spatial-data-analysis}

\begin{itemize}
\tightlist
\item
  PCA
\item
  discriminant analysis
\end{itemize}

\subsubsection{3. clustering}\label{clustering}

\begin{itemize}
\tightlist
\item
  K means
\item
  K nearest neighbor
\item
  Expectation Maximization
\end{itemize}

\subsubsection{4. ensemble methods}\label{ensemble-methods}

\begin{itemize}
\tightlist
\item
  aggregation
\item
  boosting
\end{itemize}


    % Add a bibliography block to the postdoc
    
    
    
    \end{document}
